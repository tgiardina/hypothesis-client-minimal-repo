{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "node_modules/approx-string-match/dist/index.js",
    "node_modules/classnames/index.js",
    "node_modules/focus-visible/dist/focus-visible.js",
    "node_modules/hammerjs/hammer.js",
    "node_modules/lodash.debounce/index.js",
    "node_modules/preact/dist/preact.js",
    "node_modules/preact/hooks/dist/hooks.js",
    "node_modules/prop-types/factoryWithThrowingShims.js",
    "node_modules/prop-types/index.js",
    "node_modules/prop-types/lib/ReactPropTypesSecret.js",
    "node_modules/scroll-into-view/scrollIntoView.js",
    "node_modules/tiny-emitter/index.js",
    "src/annotator/adder.js",
    "src/annotator/anchoring/html.js",
    "src/annotator/anchoring/match-quote.js",
    "src/annotator/anchoring/pdf.js",
    "src/annotator/anchoring/range.js",
    "src/annotator/anchoring/text-range.js",
    "src/annotator/anchoring/types.js",
    "src/annotator/anchoring/xpath-util.js",
    "src/annotator/anchoring/xpath.js",
    "src/annotator/annotation-counts.js",
    "src/annotator/annotation-sync.js",
    "src/annotator/components/adder-toolbar.js",
    "src/annotator/components/buckets.js",
    "src/annotator/components/toolbar.js",
    "src/annotator/config/config-func-settings-from.js",
    "src/annotator/config/index.js",
    "src/annotator/config/is-browser-extension.js",
    "src/annotator/config/settings.js",
    "src/annotator/config/sidebar.js",
    "src/annotator/delegator.js",
    "src/annotator/features.js",
    "src/annotator/frame-observer.js",
    "src/annotator/guest.js",
    "src/annotator/highlighter.js",
    "src/annotator/icons.js",
    "src/annotator/index.js",
    "src/annotator/notebook.js",
    "src/annotator/pdf-sidebar.js",
    "src/annotator/pdfjs-rendering-states.js",
    "src/annotator/plugin/bucket-bar.js",
    "src/annotator/plugin/cross-frame.js",
    "src/annotator/plugin/document.js",
    "src/annotator/plugin/pdf-metadata.js",
    "src/annotator/plugin/pdf.js",
    "src/annotator/range-util.js",
    "src/annotator/selection-observer.js",
    "src/annotator/sidebar-trigger.js",
    "src/annotator/sidebar.js",
    "src/annotator/toolbar.js",
    "src/annotator/util/buckets.js",
    "src/annotator/util/frame-util.js",
    "src/annotator/util/shadow-root.js",
    "src/annotator/util/url.js",
    "src/boot/parse-json-config.js",
    "src/images/icons/annotate.svg",
    "src/images/icons/cancel.svg",
    "src/images/icons/caret-left.svg",
    "src/images/icons/caret-right.svg",
    "src/images/icons/caution.svg",
    "src/images/icons/hide.svg",
    "src/images/icons/highlight.svg",
    "src/images/icons/note.svg",
    "src/images/icons/pointer.svg",
    "src/images/icons/show.svg",
    "src/shared/bridge-events.js",
    "src/shared/bridge.js",
    "src/shared/browser-compatibility-utils.js",
    "src/shared/components/svg-icon.js",
    "src/shared/discovery.js",
    "src/shared/frame-rpc.js",
    "src/shared/shortcut.js",
    "src/shared/type-coercions.js",
    "src/shared/warn-once.js"
  ],
  "names": [
    "outer",
    "modules",
    "cache",
    "entry",
    "previousRequire",
    "hypothesisRequire",
    "newRequire",
    "name",
    "jumped",
    "currentRequire",
    "err",
    "Error",
    "code",
    "m",
    "exports",
    "call",
    "x",
    "id",
    "i",
    "length",
    "1",
    "require",
    "module",
    "reverse",
    "r",
    "split",
    "join",
    "oneIfNotZero",
    "advanceBlock",
    "e",
    "n",
    "t",
    "a",
    "P",
    "o",
    "M",
    "s",
    "f",
    "l",
    "c",
    "h",
    "d",
    "lastRowMask",
    "findMatchEnds",
    "Math",
    "min",
    "ceil",
    "Uint32Array",
    "fill",
    "Map",
    "push",
    "charCodeAt",
    "has",
    "v",
    "set",
    "u",
    "g",
    "w",
    "max",
    "p",
    "A",
    "k",
    "get",
    "y",
    "splice",
    "start",
    "end",
    "errors",
    "Object",
    "defineProperty",
    "value",
    "default",
    "map",
    "slice",
    "reduce",
    "findMatchStarts",
    "hasOwnProperty",
    "arguments",
    "Array",
    "isArray",
    "apply",
    "define",
    "amd",
    "window",
    "classNames",
    "text",
    "search",
    "url",
    "tel",
    "email",
    "password",
    "number",
    "date",
    "month",
    "week",
    "time",
    "datetime",
    "datetime-local",
    "document",
    "nodeName",
    "classList",
    "contains",
    "add",
    "setAttribute",
    "addEventListener",
    "target",
    "toLowerCase",
    "removeEventListener",
    "metaKey",
    "altKey",
    "ctrlKey",
    "activeElement",
    "visibilityState",
    "type",
    "tagName",
    "readOnly",
    "isContentEditable",
    "hasAttribute",
    "clearTimeout",
    "setTimeout",
    "remove",
    "removeAttribute",
    "nodeType",
    "Node",
    "DOCUMENT_FRAGMENT_NODE",
    "host",
    "DOCUMENT_NODE",
    "documentElement",
    "applyFocusVisiblePolyfill",
    "CustomEvent",
    "createEvent",
    "initCustomEvent",
    "dispatchEvent",
    "createElement",
    "round",
    "abs",
    "Date",
    "now",
    "forEach",
    "stack",
    "replace",
    "console",
    "warn",
    "log",
    "this",
    "assign",
    "TypeError",
    "keys",
    "prototype",
    "create",
    "constructor",
    "_super",
    "T",
    "E",
    "C",
    "I",
    "parentNode",
    "_",
    "indexOf",
    "trim",
    "S",
    "b",
    "sort",
    "D",
    "toUpperCase",
    "ownerDocument",
    "defaultView",
    "parentWindow",
    "O",
    "R",
    "test",
    "navigator",
    "userAgent",
    "z",
    "N",
    "Y",
    "F",
    "W",
    "manager",
    "callback",
    "element",
    "options",
    "inputTarget",
    "domHandler",
    "enable",
    "handler",
    "init",
    "q",
    "pointers",
    "changedPointers",
    "isFirst",
    "isFinal",
    "session",
    "eventType",
    "firstInput",
    "firstMultiple",
    "center",
    "H",
    "timeStamp",
    "deltaTime",
    "angle",
    "j",
    "distance",
    "V",
    "offsetDelta",
    "prevDelta",
    "prevInput",
    "deltaX",
    "deltaY",
    "offsetDirection",
    "U",
    "L",
    "overallVelocityX",
    "overallVelocityY",
    "overallVelocity",
    "scale",
    "rotation",
    "maxPointers",
    "lastInterval",
    "velocity",
    "velocityX",
    "velocityY",
    "direction",
    "srcEvent",
    "emit",
    "recognize",
    "clientX",
    "clientY",
    "sqrt",
    "atan2",
    "PI",
    "evEl",
    "evTarget",
    "evWin",
    "destroy",
    "G",
    "mousedown",
    "mousemove",
    "mouseup",
    "Z",
    "B",
    "$",
    "pressed",
    "button",
    "which",
    "pointerType",
    "J",
    "pointerdown",
    "pointermove",
    "pointerup",
    "pointercancel",
    "pointerout",
    "K",
    "2",
    "3",
    "4",
    "5",
    "Q",
    "tt",
    "et",
    "store",
    "pointerEvents",
    "MSPointerEvent",
    "PointerEvent",
    "pointerId",
    "it",
    "touchstart",
    "touchmove",
    "touchend",
    "touchcancel",
    "nt",
    "rt",
    "st",
    "started",
    "ot",
    "touches",
    "changedTouches",
    "concat",
    "at",
    "ht",
    "ut",
    "targetIds",
    "ct",
    "identifier",
    "filter",
    "lt",
    "touch",
    "mouse",
    "primaryTouch",
    "lastTouches",
    "pt",
    "ft",
    "dt",
    "sourceCapabilities",
    "firesTouchEvents",
    "vt",
    "style",
    "mt",
    "gt",
    "Tt",
    "yt",
    "Et",
    "It",
    "At",
    "_t",
    "CSS",
    "supports",
    "Ct",
    "compute",
    "actions",
    "update",
    "touchAction",
    "recognizers",
    "getTouchAction",
    "preventDefaults",
    "prevented",
    "preventDefault",
    "none",
    "preventSrc",
    "St",
    "bt",
    "defaults",
    "state",
    "simultaneous",
    "requireFail",
    "Pt",
    "Dt",
    "xt",
    "wt",
    "Ot",
    "pX",
    "pY",
    "Rt",
    "Mt",
    "_timer",
    "_input",
    "zt",
    "Nt",
    "Xt",
    "pTime",
    "pCenter",
    "count",
    "Yt",
    "preset",
    "Ft",
    "handlers",
    "oldCssProps",
    "input",
    "inputClass",
    "Wt",
    "recognizeWith",
    "requireFailure",
    "cssProps",
    "dropRecognizeWith",
    "dropRequireFailure",
    "hasRequireFailures",
    "canRecognizeWith",
    "event",
    "additionalEvent",
    "tryEmit",
    "canEmit",
    "reset",
    "process",
    "attrTest",
    "threshold",
    "directionTest",
    "taps",
    "interval",
    "posThreshold",
    "failTimeout",
    "tapCount",
    "VERSION",
    "domEvents",
    "userSelect",
    "touchSelect",
    "touchCallout",
    "contentZooming",
    "userDrag",
    "tapHighlightColor",
    "stop",
    "stopped",
    "curRecognizer",
    "on",
    "off",
    "initEvent",
    "gesture",
    "INPUT_START",
    "INPUT_MOVE",
    "INPUT_END",
    "INPUT_CANCEL",
    "STATE_POSSIBLE",
    "STATE_BEGAN",
    "STATE_CHANGED",
    "STATE_ENDED",
    "STATE_RECOGNIZED",
    "STATE_CANCELLED",
    "STATE_FAILED",
    "DIRECTION_NONE",
    "DIRECTION_LEFT",
    "DIRECTION_RIGHT",
    "DIRECTION_UP",
    "DIRECTION_DOWN",
    "DIRECTION_HORIZONTAL",
    "DIRECTION_VERTICAL",
    "DIRECTION_ALL",
    "Manager",
    "Input",
    "TouchAction",
    "TouchInput",
    "MouseInput",
    "PointerEventInput",
    "TouchMouseInput",
    "SingleTouchInput",
    "Recognizer",
    "AttrRecognizer",
    "Tap",
    "Pan",
    "Swipe",
    "Pinch",
    "Rotate",
    "Press",
    "each",
    "merge",
    "extend",
    "inherit",
    "bindFn",
    "prefixed",
    "self",
    "Hammer",
    "reTrim",
    "reIsBadHex",
    "reIsBinary",
    "reIsOctal",
    "freeParseInt",
    "parseInt",
    "freeGlobal",
    "global",
    "freeSelf",
    "root",
    "Function",
    "objectToString",
    "toString",
    "nativeMax",
    "nativeMin",
    "isObject",
    "toNumber",
    "isObjectLike",
    "isSymbol",
    "NaN",
    "valueOf",
    "leading",
    "maxWait",
    "trailing",
    "cancel",
    "flush",
    "removeChild",
    "children",
    "defaultProps",
    "props",
    "key",
    "ref",
    "__k",
    "__",
    "__b",
    "__e",
    "__d",
    "__c",
    "__h",
    "__v",
    "vnode",
    "context",
    "base",
    "__r",
    "debounceRendering",
    "some",
    "__P",
    "__n",
    "ownerSVGElement",
    "appendChild",
    "nextSibling",
    "insertBefore",
    "setProperty",
    "cssText",
    "removeAttributeNS",
    "setAttributeNS",
    "contextType",
    "__E",
    "render",
    "sub",
    "__s",
    "getDerivedStateFromProps",
    "componentWillMount",
    "componentDidMount",
    "componentWillReceiveProps",
    "shouldComponentUpdate",
    "componentWillUpdate",
    "componentDidUpdate",
    "getChildContext",
    "getSnapshotBeforeUpdate",
    "diffed",
    "localName",
    "createTextNode",
    "createElementNS",
    "is",
    "data",
    "childNodes",
    "dangerouslySetInnerHTML",
    "attributes",
    "__html",
    "innerHTML",
    "checked",
    "current",
    "unmount",
    "componentWillUnmount",
    "getDerivedStateFromError",
    "setState",
    "componentDidCatch",
    "forceUpdate",
    "Promise",
    "then",
    "bind",
    "resolve",
    "hydrate",
    "Fragment",
    "createRef",
    "isValidElement",
    "Component",
    "cloneElement",
    "createContext",
    "Consumer",
    "Provider",
    "toChildArray",
    "__u",
    "__H",
    "requestAnimationFrame",
    "cancelAnimationFrame",
    "useState",
    "useReducer",
    "useEffect",
    "useLayoutEffect",
    "useRef",
    "useImperativeHandle",
    "useMemo",
    "useCallback",
    "useContext",
    "useDebugValue",
    "useErrorBoundary",
    "ReactPropTypesSecret",
    "emptyFunction",
    "emptyFunctionWithReset",
    "resetWarningCache",
    "isRequired",
    "array",
    "bool",
    "func",
    "object",
    "string",
    "symbol",
    "any",
    "arrayOf",
    "elementType",
    "instanceOf",
    "node",
    "objectOf",
    "oneOf",
    "oneOfType",
    "shape",
    "exact",
    "checkPropTypes",
    "PropTypes",
    "COMPLETE",
    "CANCELED",
    "setElementScroll",
    "scrollTo",
    "scrollLeft",
    "scrollTop",
    "animate",
    "_scrollSettings",
    "maxSynchronousAlignments",
    "align",
    "getBoundingClientRect",
    "left",
    "top",
    "leftOffset",
    "topOffset",
    "isWindow",
    "width",
    "innerWidth",
    "height",
    "innerHeight",
    "pageXOffset",
    "pageYOffset",
    "clientWidth",
    "clientHeight",
    "scrollWidth",
    "scrollHeight",
    "differenceX",
    "differenceY",
    "getTargetScrollLocation",
    "startTime",
    "endIterations",
    "ease",
    "raf",
    "defaultIsWindow",
    "transitionScrollTo",
    "passive",
    "parentElement",
    "debug",
    "cancellable",
    "defaultIsScrollable",
    "getComputedStyle",
    "overflow",
    "defaultValidTarget",
    "findParentElement",
    "assignedSlot",
    "ownerWindow",
    "getRootNode",
    "isNaN",
    "pow",
    "validTarget",
    "isScrollable",
    "error",
    "fn",
    "ctx",
    "once",
    "TinyEmitter",
    "_preact",
    "_adderToolbar",
    "__esModule",
    "_shadowRoot",
    "ARROW_POINTING_DOWN",
    "toPx",
    "ARROW_POINTING_UP",
    "Adder",
    "[object Object]",
    "_container",
    "createShadowRoot",
    "display",
    "position",
    "_view",
    "_width",
    "firstChild",
    "_height",
    "_isVisible",
    "_arrowDirection",
    "_onAnnotate",
    "onAnnotate",
    "_onHighlight",
    "onHighlight",
    "_onShowAnnotations",
    "onShowAnnotations",
    "annotationsForSelection",
    "_render",
    "arrowDirection",
    "_calculateTarget",
    "_showAt",
    "elementsFromPoint",
    "Set",
    "zIndex",
    "Number",
    "isInteger",
    "nearestPositionedAncestor",
    "_findZindex",
    "isVisible",
    "onCommand",
    "hide",
    "annotationCount",
    "hint",
    "reject",
    "catch",
    "querySelector",
    "_types",
    "RangeAnchor",
    "fromSelector",
    "TextPositionAnchor",
    "TextQuoteAnchor",
    "fromRange",
    "toSelector",
    "async",
    "toRange",
    "prefix",
    "textMatchScore",
    "suffix",
    "score",
    "_approxStringMatch",
    "getPdfViewer",
    "pagesCount",
    "getPageTextContent",
    "find",
    "findPage",
    "index",
    "offset",
    "textContent",
    "substr",
    "anchorByPosition",
    "quotePositionCache",
    "pageIndex",
    "anchor",
    "shift",
    "pop",
    "prioritizePages",
    "findInPages",
    "_textRange",
    "TextRange",
    "getNodeTextLayer",
    "startContainer",
    "endContainer",
    "TextPosition",
    "fromPoint",
    "startOffset",
    "relativeTo",
    "endOffset",
    "previousSibling",
    "getSiblingIndex",
    "getPageOffset",
    "pageTextCache",
    "_pdfjsRenderingStates",
    "closest",
    "PDFViewerApplication",
    "pdfViewer",
    "getPageView",
    "pdfPage",
    "eventBus",
    "getTextContent",
    "normalizeWhitespace",
    "items",
    "str",
    "renderingState",
    "FINISHED",
    "textLayer",
    "renderingDone",
    "textLayerDiv",
    "div",
    "createRange",
    "setStartBefore",
    "setEndAfter",
    "all",
    "toPositionAnchor",
    "commonAncestorContainer",
    "BrowserRange",
    "SerializedRange",
    "NormalizedRange",
    "_xpath",
    "_xpathUtil",
    "parents",
    "tainted",
    "ELEMENT_NODE",
    "getFirstTextNodeNotBefore",
    "TEXT_NODE",
    "getLastTextNodeUpTo",
    "nodeValue",
    "splitText",
    "commonAncestor",
    "normalize",
    "serialize",
    "textNodes",
    "xpathFromNode",
    "getTextNodes",
    "nodeFromXPath",
    "RangeError",
    "nodeTextLength",
    "previousSiblingsTextLength",
    "resolveOffsets",
    "createNodeIterator",
    "NodeFilter",
    "SHOW_TEXT",
    "nextNode",
    "RESOLVE_BACKWARDS",
    "RESOLVE_FORWARDS",
    "createTreeWalker",
    "currentNode",
    "previousNode",
    "Range",
    "setStart",
    "setEnd",
    "_range",
    "_matchQuote",
    "ownKeys",
    "getOwnPropertySymbols",
    "getOwnPropertyDescriptor",
    "enumerable",
    "_objectSpread",
    "_defineProperty",
    "getOwnPropertyDescriptors",
    "defineProperties",
    "configurable",
    "writable",
    "range",
    "sniff",
    "fromOffsets",
    "matchQuote",
    "getPathSegment",
    "getNodeName",
    "getNodePosition",
    "from",
    "lastChild",
    "body",
    "match",
    "nthChildOfType",
    "evaluateSimpleXPath",
    "evaluate",
    "XPathResult",
    "FIRST_ORDERED_NODE_TYPE",
    "singleNodeValue",
    "_bridgeEvents",
    "PUBLIC_ANNOTATION_COUNT_CHANGED",
    "querySelectorAll",
    "bridge",
    "_on",
    "_emit",
    "_parse",
    "$tag",
    "_format",
    "btoa",
    "random",
    "tag",
    "msg",
    "_tag",
    "_classnames",
    "_interopRequireDefault",
    "_propTypes",
    "_shortcut",
    "_svgIcon",
    "ToolbarButton",
    "badgeCount",
    "icon",
    "label",
    "onClick",
    "shortcut",
    "useShortcut",
    "className",
    "aria-label",
    "title",
    "AdderToolbar",
    "stopPropagation",
    "class",
    "annotator-adder--down",
    "annotator-adder--up",
    "is-active",
    "visibility",
    "inline",
    "annotator-adder-arrow--down",
    "annotator-adder-arrow--up",
    "propTypes",
    "_scrollIntoView",
    "_highlighter",
    "_buckets",
    "BucketButton",
    "bucket",
    "onSelectAnnotations",
    "anchors",
    "annotation",
    "setHighlightsFocused",
    "highlights",
    "onMouseMove",
    "onMouseOut",
    "onBlur",
    "NavigationBucketButton",
    "findClosestOffscreenAnchor",
    "Buckets",
    "above",
    "below",
    "buckets",
    "buttonRef",
    "expanded",
    "selected",
    "aria-expanded",
    "aria-pressed",
    "Toolbar",
    "closeSidebar",
    "createAnnotation",
    "isSidebarOpen",
    "newAnnotationType",
    "showHighlights",
    "toggleHighlights",
    "toggleSidebar",
    "toggleSidebarRef",
    "useMinimalControls",
    "hypothesisConfig",
    "_settings",
    "annotations",
    "assetRoot",
    "hostPageSetting",
    "allowInBrowserExt",
    "branding",
    "clientUrl",
    "enableExperimentalNewNoteButton",
    "experimental",
    "defaultValue",
    "group",
    "focus",
    "theme",
    "usernameUrl",
    "onLayoutChange",
    "openSidebar",
    "coerce",
    "_typeCoercions",
    "toBoolean",
    "query",
    "requestConfigFromFrame",
    "services",
    "notebookAppUrl",
    "sidebarAppUrl",
    "subFrameIdentifier",
    "externalContainerSelector",
    "startsWith",
    "_parseJsonConfig",
    "parseJsonConfig",
    "_configFuncSettingsFrom",
    "href",
    "_isBrowserExtension",
    "location",
    "decodeURIComponent",
    "createSidebarConfig",
    "onLoginRequest",
    "onLoginRequestProvided",
    "onLogoutRequest",
    "onLogoutRequestProvided",
    "onSignupRequest",
    "onSignupRequestProvided",
    "onProfileRequest",
    "onProfileRequestProvided",
    "onHelpRequest",
    "onHelpRequestProvided",
    "_tinyEmitter",
    "_hypothesisEventBus",
    "_eventBus",
    "_subscriptions",
    "_warnOnce",
    "_features",
    "_set",
    "_default",
    "FEATURE_FLAGS_UPDATED",
    "flagEnabled",
    "_lodash",
    "FrameUtil",
    "_getRequireWildcardCache",
    "_interopRequireWildcard",
    "WeakMap",
    "DEBOUNCE_WAIT",
    "_target",
    "_handledFrames",
    "_mutationObserver",
    "MutationObserver",
    "_discoverFrames",
    "_onFrameAdded",
    "_onFrameRemoved",
    "observe",
    "childList",
    "subtree",
    "disconnect",
    "isAccessible",
    "isDocumentReady",
    "contentWindow",
    "_removeFrame",
    "findFrames",
    "includes",
    "_addFrame",
    "difference",
    "_delegator",
    "_adder",
    "htmlAnchoring",
    "rangeUtil",
    "_selectionObserver",
    "_url",
    "annotationsAt",
    "getHighlightsContainingNode",
    "_annotation",
    "resolveAnchor",
    "Guest",
    "super",
    "Document",
    "visibleHighlights",
    "toolbar",
    "adderToolbar",
    "adderCtrl",
    "getSelection",
    "removeAllRanges",
    "setVisibleHighlights",
    "createHighlight",
    "selectAnnotations",
    "selectionObserver",
    "SelectionObserver",
    "_onSelection",
    "_onClearSelection",
    "plugins",
    "frameIdentifier",
    "anchoring",
    "config",
    "subscribe",
    "publish",
    "addPlugin",
    "crossframe",
    "CrossFrame",
    "onConnect",
    "_setupInitialState",
    "closeSidebarOnDocumentClick",
    "_connectAnnotationSync",
    "_connectAnnotationUISync",
    "pluginClasses",
    "_elementEventListeners",
    "_setupElementEvents",
    "isEventInAnnotator",
    "focusAnnotations",
    "PDF",
    "getMetadata",
    "uri",
    "metadata",
    "link",
    "normalizeURI",
    "detach",
    "bubbles",
    "cancelable",
    "detail",
    "getDocumentInfo",
    "_removeElementEvents",
    "removeAllHighlights",
    "selector",
    "highlightRange",
    "removeHighlights",
    "$orphan",
    "BucketBar",
    "sync",
    "selectedRanges",
    "describe",
    "source",
    "$highlight",
    "isSelectionBackwards",
    "selectionFocusRect",
    "getRangeAt",
    "itemsForRange",
    "show",
    "toggleAnnotationSelection",
    "showAnnotations",
    "setHighlightsVisible",
    "highlightsVisible",
    "collapsed",
    "_rangeUtil",
    "isNodeInRange",
    "wholeTextNodesInRange",
    "replaceChild",
    "getPdfCanvas",
    "isCSSPropertySupported",
    "SVG_NAMESPACE",
    "mixBlendMode",
    "opacity",
    "drawHighlightsAbovePdfCanvas",
    "svgHighlight",
    "toggle",
    "bottom",
    "right",
    "replaceWith",
    "annotate",
    "caution",
    "caret-left",
    "caret-right",
    "highlight",
    "note",
    "pointer",
    "_icons",
    "_index",
    "_bucketBar",
    "_crossFrame",
    "_document",
    "_guest",
    "_notebook",
    "_pdf",
    "_pdfSidebar",
    "_sidebar",
    "registerIcons",
    "window_",
    "appLinkEl",
    "readyState",
    "__hypothesis_frame",
    "Notebook",
    "frame",
    "_groupId",
    "_prevGroupId",
    "container",
    "encodeURIComponent",
    "JSON",
    "stringify",
    "src",
    "createNotebookFrame",
    "_update",
    "defaultConfig",
    "scrollables",
    "PdfSidebar",
    "_lastSidebarLayoutState",
    "pdfContainer",
    "appConfig",
    "appContainer",
    "sideBySideActive",
    "fitSideBySide",
    "activateSideBySide",
    "deactivateSideBySide",
    "currentScaleValue",
    "INITIAL",
    "RUNNING",
    "PAUSED",
    "_buckets2",
    "annotator",
    "updateFunc",
    "_updatePending",
    "anchorBuckets",
    "_annotationSync",
    "_bridge",
    "_discovery",
    "frameUtil",
    "_frameObserver",
    "server",
    "startDiscovery",
    "createChannel",
    "hasHypothesis",
    "isLoaded",
    "generateToken",
    "injectHypothesis",
    "delete",
    "stopDiscovery",
    "createMetadata",
    "dc",
    "eprints",
    "facebook",
    "highwire",
    "prism",
    "twitter",
    "DocumentMeta",
    "baseURI",
    "beforeAnnotationCreated",
    "getDocumentMetadata",
    "unsubscribe",
    "_getDocumentHref",
    "rel",
    "_getHighwire",
    "_getDublinCore",
    "_getFacebook",
    "_getEprints",
    "_getPrism",
    "_getTwitter",
    "_getFavicon",
    "_getTitle",
    "_getLinks",
    "_getMetaTags",
    "getAttribute",
    "content",
    "RegExp",
    "hreflang",
    "_absoluteUrl",
    "documentFingerprint",
    "favicon",
    "URL",
    "protocol",
    "fingerprintToURN",
    "String",
    "getPDFURL",
    "_loaded",
    "initializedPromise",
    "initialized",
    "setInterval",
    "pdfViewerInitialized",
    "downloadComplete",
    "pdfDocument",
    "fingerprint",
    "documentInfo",
    "Title",
    "pdfAnchoring",
    "_pdfMetadata",
    "WarningBanner",
    "viewer",
    "pdfMetadata",
    "observer",
    "attributeFilter",
    "_warningBanner",
    "_checkForSelectableText",
    "_updateAnnotationLayerVisibility",
    "isCollapsed",
    "getUri",
    "documentHasText",
    "_showNoSelectableTextWarning",
    "ResizeObserver",
    "focusNode",
    "anchorNode",
    "focusOffset",
    "anchorOffset",
    "comparePoint",
    "forEachNodeInRange",
    "SHOW_ALL",
    "getTextBoundingBoxes",
    "selectNodeContents",
    "getClientRects",
    "_pendingCallback",
    "rangeCount",
    "selectedRange",
    "_eventHandler",
    "_cancelPendingCallback",
    "_events",
    "_hammerjs",
    "_annotationCounts",
    "_sidebarTrigger",
    "_toolbar",
    "Sidebar",
    "createSidebarIframe",
    "externalFrame",
    "ToolbarController",
    "setSidebarOpen",
    "setAllVisibleHighlights",
    "prepend",
    "toolbarWidth",
    "getWidth",
    "_gestureState",
    "initial",
    "final",
    "_setupGestures",
    "_notifyOfLayoutChange",
    "_setupSidebarEvents",
    "_hammerManager",
    "LOGIN_REQUESTED",
    "LOGOUT_REQUESTED",
    "SIGNUP_REQUESTED",
    "PROFILE_REQUESTED",
    "HELP_REQUESTED",
    "sidebarToggleButton",
    "_onPan",
    "renderFrame",
    "marginLeft",
    "_resetGestureState",
    "_updateLayout",
    "sidebarOpen",
    "_useMinimalControls",
    "_newAnnotationType",
    "_highlightsVisible",
    "_sidebarOpen",
    "_closeSidebar",
    "_toggleSidebar",
    "_toggleHighlights",
    "_createAnnotation",
    "_sidebarToggleButton",
    "getAnchorPositions",
    "shouldEnableAnnotation",
    "getElementsByTagName",
    "innerText",
    "contentDocument",
    "attachShadow",
    "mode",
    "loadStyles",
    "parse",
    "_frameRpc",
    "links",
    "channelListeners",
    "onConnectListeners",
    "channel",
    "connect",
    "normalizeKeyName",
    "Left",
    "Up",
    "Down",
    "Right",
    "Spacebar",
    "Del",
    "iconRegistry",
    "_hooks",
    "_extends",
    "SvgIcon",
    "svg-icon--inline",
    "origin",
    "requestInProgress",
    "onDiscovery",
    "_onMessage",
    "_beacon",
    "postMessage",
    "frames",
    "reply",
    "discovered",
    "token",
    "_processMessage",
    "RPC",
    "dst",
    "_sequence",
    "_callbacks",
    "_onmessage",
    "_destroyed",
    "_handle",
    "_methods",
    "version",
    "sequence",
    "method",
    "response",
    "rootElement",
    "installShortcut",
    "_browserCompatibilityUtils",
    "modifiers",
    "alt",
    "ctrl",
    "meta",
    "matchShortcut",
    "shiftKey",
    "toLocaleLowerCase",
    "Boolean",
    "toInteger",
    "toObject",
    "shownWarnings",
    "warnOnce"
  ],
  "mappings": "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",
  "sourcesContent": [
    "\n// modules are defined as an array\n// [ module function, map of requireuires ]\n//\n// map of requireuires is short require name -> numeric require\n//\n// anything defined in a previous bundle is accessed via the\n// orig method which is the requireuire for previous bundles\n\n(function() {\n\nfunction outer(modules, cache, entry) {\n    // Save the require from previous bundle to this closure if any\n    var previousRequire = typeof hypothesisRequire == \"function\" && hypothesisRequire;;\n\n    function newRequire(name, jumped){\n        if(!cache[name]) {\n            if(!modules[name]) {\n                // if we cannot find the module within our internal map or\n                // cache jump to the current global require ie. the last bundle\n                // that was added to the page.\n                var currentRequire = typeof hypothesisRequire == \"function\" && hypothesisRequire;;\n                if (!jumped && currentRequire) return currentRequire(name, true);\n\n                // If there are other bundles on this page the require from the\n                // previous one is saved to 'previousRequire'. Repeat this as\n                // many times as there are bundles until the module is found or\n                // we exhaust the require chain.\n                if (previousRequire) return previousRequire(name, true);\n                var err = new Error('Cannot find module \\'' + name + '\\'');\n                err.code = 'MODULE_NOT_FOUND';\n                throw err;\n            }\n            var m = cache[name] = {exports:{}};\n            modules[name][0].call(m.exports, function(x){\n                var id = modules[name][1][x];\n                return newRequire(id ? id : x);\n            },m,m.exports,outer,modules,cache,entry);\n        }\n        return cache[name].exports;\n    }\n    for(var i=0;i<entry.length;i++) newRequire(entry[i]);\n\n    // Override the current require with this new one\n    return newRequire;\n}\n\nreturn outer;\n\n})()\n",
    "\"use strict\";function reverse(r){return r.split(\"\").reverse().join(\"\")}function findMatchStarts(r,e,n){var t=reverse(e);return n.map((function(n){var a=Math.max(0,n.end-e.length-n.errors);return{start:findMatchEnds(reverse(r.slice(a,n.end)),t,n.errors).reduce((function(r,e){return n.end-e.end<r?n.end-e.end:r}),n.end),end:n.end,errors:n.errors}}))}function oneIfNotZero(r){return(r|-r)>>31&1}function advanceBlock(r,e,n,t){var a=r.P[n],o=r.M[n],s=t>>>31,i=e[n]|s,f=i|o,l=(i&a)+a^a|i,c=o|~(l|a),h=a&l,d=oneIfNotZero(c&r.lastRowMask[n])-oneIfNotZero(h&r.lastRowMask[n]);return c<<=1,h<<=1,a=(h|=s)|~(f|(c|=oneIfNotZero(t)-s)),o=c&f,r.P[n]=a,r.M[n]=o,d}function findMatchEnds(r,e,n){if(0===e.length)return[];n=Math.min(n,e.length);var t=[],a=32,o=Math.ceil(e.length/a)-1,s={P:new Uint32Array(o+1),M:new Uint32Array(o+1),lastRowMask:new Uint32Array(o+1)};s.lastRowMask.fill(1<<31),s.lastRowMask[o]=1<<(e.length-1)%a;for(var i=new Uint32Array(o+1),f=new Map,l=[],c=0;c<256;c++)l.push(i);for(var h=0;h<e.length;h+=1){var d=e.charCodeAt(h);if(!f.has(d)){var v=new Uint32Array(o+1);f.set(d,v),d<l.length&&(l[d]=v);for(var u=0;u<=o;u+=1){v[u]=0;for(var M=0;M<a;M+=1){var g=u*a+M;if(!(g>=e.length))e.charCodeAt(g)===d&&(v[u]|=1<<M)}}}}var w=Math.max(0,Math.ceil(n/a)-1),p=new Uint32Array(o+1);for(u=0;u<=w;u+=1)p[u]=(u+1)*a;p[o]=e.length;for(u=0;u<=w;u+=1)s.P[u]=-1,s.M[u]=0;for(var A=0;A<r.length;A+=1){var k=r.charCodeAt(A);v=void 0;k<l.length?v=l[k]:void 0===(v=f.get(k))&&(v=i);var y=0;for(u=0;u<=w;u+=1)y=advanceBlock(s,v,u,y),p[u]+=y;if(p[w]-y<=n&&w<o&&(1&v[w+1]||y<0)){w+=1,s.P[w]=-1,s.M[w]=0;var P=w===o?e.length%a:a;p[w]=p[w-1]+P-y+advanceBlock(s,v,w,y)}else for(;w>0&&p[w]>=n+a;)w-=1;w===o&&p[w]<=n&&(p[w]<n&&t.splice(0,t.length),t.push({start:-1,end:A+1,errors:p[w]}),n=p[w])}return t}function search(r,e,n){return findMatchStarts(r,e,findMatchEnds(r,e,n))}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=search;",
    "/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n!function(){\"use strict\";var e={}.hasOwnProperty;function n(){for(var r=[],t=0;t<arguments.length;t++){var f=arguments[t];if(f){var o=typeof f;if(\"string\"===o||\"number\"===o)r.push(f);else if(Array.isArray(f)&&f.length){var i=n.apply(null,f);i&&r.push(i)}else if(\"object\"===o)for(var a in f)e.call(f,a)&&f[a]&&r.push(a)}}return r.join(\" \")}\"undefined\"!=typeof module&&module.exports?(n.default=n,module.exports=n):\"function\"==typeof define&&\"object\"==typeof define.amd&&define.amd?define(\"classnames\",[],(function(){return n})):window.classNames=n}();",
    "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t():\"function\"==typeof define&&define.amd?define(t):t()}(0,(function(){\"use strict\";function e(e){var t=!0,n=!1,o=null,d={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,\"datetime-local\":!0};function i(e){return!!(e&&e!==document&&\"HTML\"!==e.nodeName&&\"BODY\"!==e.nodeName&&\"classList\"in e&&\"contains\"in e.classList)}function s(e){e.classList.contains(\"focus-visible\")||(e.classList.add(\"focus-visible\"),e.setAttribute(\"data-focus-visible-added\",\"\"))}function u(e){t=!1}function a(){document.addEventListener(\"mousemove\",c),document.addEventListener(\"mousedown\",c),document.addEventListener(\"mouseup\",c),document.addEventListener(\"pointermove\",c),document.addEventListener(\"pointerdown\",c),document.addEventListener(\"pointerup\",c),document.addEventListener(\"touchmove\",c),document.addEventListener(\"touchstart\",c),document.addEventListener(\"touchend\",c)}function c(e){e.target.nodeName&&\"html\"===e.target.nodeName.toLowerCase()||(t=!1,document.removeEventListener(\"mousemove\",c),document.removeEventListener(\"mousedown\",c),document.removeEventListener(\"mouseup\",c),document.removeEventListener(\"pointermove\",c),document.removeEventListener(\"pointerdown\",c),document.removeEventListener(\"pointerup\",c),document.removeEventListener(\"touchmove\",c),document.removeEventListener(\"touchstart\",c),document.removeEventListener(\"touchend\",c))}document.addEventListener(\"keydown\",(function(n){n.metaKey||n.altKey||n.ctrlKey||(i(e.activeElement)&&s(e.activeElement),t=!0)}),!0),document.addEventListener(\"mousedown\",u,!0),document.addEventListener(\"pointerdown\",u,!0),document.addEventListener(\"touchstart\",u,!0),document.addEventListener(\"visibilitychange\",(function(e){\"hidden\"===document.visibilityState&&(n&&(t=!0),a())}),!0),a(),e.addEventListener(\"focus\",(function(e){var n,o,u;i(e.target)&&(t||(n=e.target,o=n.type,\"INPUT\"===(u=n.tagName)&&d[o]&&!n.readOnly||\"TEXTAREA\"===u&&!n.readOnly||n.isContentEditable))&&s(e.target)}),!0),e.addEventListener(\"blur\",(function(e){var t;i(e.target)&&(e.target.classList.contains(\"focus-visible\")||e.target.hasAttribute(\"data-focus-visible-added\"))&&(n=!0,window.clearTimeout(o),o=window.setTimeout((function(){n=!1}),100),(t=e.target).hasAttribute(\"data-focus-visible-added\")&&(t.classList.remove(\"focus-visible\"),t.removeAttribute(\"data-focus-visible-added\")))}),!0),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host?e.host.setAttribute(\"data-js-focus-visible\",\"\"):e.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add(\"js-focus-visible\"),document.documentElement.setAttribute(\"data-js-focus-visible\",\"\"))}if(\"undefined\"!=typeof window&&\"undefined\"!=typeof document){var t;window.applyFocusVisiblePolyfill=e;try{t=new CustomEvent(\"focus-visible-polyfill-ready\")}catch(n){(t=document.createEvent(\"CustomEvent\")).initCustomEvent(\"focus-visible-polyfill-ready\",!1,!1,{})}window.dispatchEvent(t)}\"undefined\"!=typeof document&&e(document)}));",
    "/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n!function(t,e,i,n){\"use strict\";var r,s=[\"\",\"webkit\",\"Moz\",\"MS\",\"ms\",\"o\"],o=e.createElement(\"div\"),a=Math.round,h=Math.abs,u=Date.now;function c(t,e,i){return setTimeout(g(t,i),e)}function l(t,e,i){return!!Array.isArray(t)&&(p(t,i[e],i),!0)}function p(t,e,i){var r;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(r=0;r<t.length;)e.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}function f(e,i,n){var r=\"DEPRECATED METHOD: \"+i+\"\\n\"+n+\" AT \\n\";return function(){var i=new Error(\"get-stack-trace\"),n=i&&i.stack?i.stack.replace(/^[^\\(]+?[\\n$]/gm,\"\").replace(/^\\s+at\\s+/gm,\"\").replace(/^Object.<anonymous>\\s*\\(/gm,\"{anonymous}()@\"):\"Unknown Stack Trace\",s=t.console&&(t.console.warn||t.console.log);return s&&s.call(t.console,r,n),e.apply(this,arguments)}}r=\"function\"!=typeof Object.assign?function(t){if(t===n||null===t)throw new TypeError(\"Cannot convert undefined or null to object\");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(r!==n&&null!==r)for(var s in r)r.hasOwnProperty(s)&&(e[s]=r[s])}return e}:Object.assign;var d=f((function(t,e,i){for(var r=Object.keys(e),s=0;s<r.length;)(!i||i&&t[r[s]]===n)&&(t[r[s]]=e[r[s]]),s++;return t}),\"extend\",\"Use `assign`.\"),v=f((function(t,e){return d(t,e,!0)}),\"merge\",\"Use `assign`.\");function m(t,e,i){var n,s=e.prototype;(n=t.prototype=Object.create(s)).constructor=t,n._super=s,i&&r(n,i)}function g(t,e){return function(){return t.apply(e,arguments)}}function T(t,e){return\"function\"==typeof t?t.apply(e&&e[0]||n,e):t}function y(t,e){return t===n?e:t}function E(t,e,i){p(C(e),(function(e){t.addEventListener(e,i,!1)}))}function I(t,e,i){p(C(e),(function(e){t.removeEventListener(e,i,!1)}))}function A(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function C(t){return t.trim().split(/\\s+/g)}function S(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function P(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];S(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort((function(t,i){return t[e]>i[e]})):n.sort()),n}function D(t,e){for(var i,r,o=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((r=(i=s[a])?i+o:e)in t)return r;a++}return n}var x=1;function w(e){var i=e.ownerDocument||e;return i.defaultView||i.parentWindow||t}var O=\"ontouchstart\"in t,R=D(t,\"PointerEvent\")!==n,M=O&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),z=\"touch\",N=\"mouse\",X=24,Y=[\"x\",\"y\"],F=[\"clientX\",\"clientY\"];function W(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){T(t.options.enable,[t])&&i.handler(e)},this.init()}function q(t,e,i){var r=i.pointers.length,s=i.changedPointers.length,o=1&e&&r-s==0,a=12&e&&r-s==0;i.isFirst=!!o,i.isFinal=!!a,o&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,r=e.pointers,s=r.length;i.firstInput||(i.firstInput=k(e));s>1&&!i.firstMultiple?i.firstMultiple=k(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,a=i.firstMultiple,c=a?a.center:o.center,l=e.center=H(r);e.timeStamp=u(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=j(c,l),e.distance=V(c,l),function(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};1!==e.eventType&&4!==s.eventType||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y});e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}(i,e),e.offsetDirection=U(e.deltaX,e.deltaY);var p=L(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=h(p.x)>h(p.y)?p.x:p.y,e.scale=a?(f=a.pointers,d=r,V(d[0],d[1],F)/V(f[0],f[1],F)):1,e.rotation=a?function(t,e){return j(e[1],e[0],F)+j(t[1],t[0],F)}(a.pointers,r):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,r,s,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(u>25||a.velocity===n)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,p=L(u,c,l);r=p.x,s=p.y,i=h(p.x)>h(p.y)?p.x:p.y,o=U(c,l),t.lastInterval=e}else i=a.velocity,r=a.velocityX,s=a.velocityY,o=a.direction;e.velocity=i,e.velocityX=r,e.velocityY=s,e.direction=o}(i,e);var f,d;var v=t.element;A(e.srcEvent.target,v)&&(v=e.srcEvent.target);e.target=v}(t,i),t.emit(\"hammer.input\",i),t.recognize(i),t.session.prevInput=i}function k(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:a(t.pointers[i].clientX),clientY:a(t.pointers[i].clientY)},i++;return{timeStamp:u(),pointers:e,center:H(e),deltaX:t.deltaX,deltaY:t.deltaY}}function H(t){var e=t.length;if(1===e)return{x:a(t[0].clientX),y:a(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:a(i/e),y:a(n/e)}}function L(t,e,i){return{x:e/t||0,y:i/t||0}}function U(t,e){return t===e?1:h(t)>=h(e)?t<0?2:4:e<0?8:16}function V(t,e,i){i||(i=Y);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function j(t,e,i){i||(i=Y);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}W.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(w(this.element),this.evWin,this.domHandler)}};var G={mousedown:1,mousemove:2,mouseup:4},Z=\"mousedown\",B=\"mousemove mouseup\";function $(){this.evEl=Z,this.evWin=B,this.pressed=!1,W.apply(this,arguments)}m($,W,{handler:function(t){var e=G[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:N,srcEvent:t}))}});var J={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},K={2:z,3:\"pen\",4:N,5:\"kinect\"},Q=\"pointerdown\",tt=\"pointermove pointerup pointercancel\";function et(){this.evEl=Q,this.evWin=tt,W.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&!t.PointerEvent&&(Q=\"MSPointerDown\",tt=\"MSPointerMove MSPointerUp MSPointerCancel\"),m(et,W,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace(\"ms\",\"\"),r=J[n],s=K[t.pointerType]||t.pointerType,o=s==z,a=S(e,t.pointerId,\"pointerId\");1&r&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):12&r&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var it={touchstart:1,touchmove:2,touchend:4,touchcancel:8},nt=\"touchstart\",rt=\"touchstart touchmove touchend touchcancel\";function st(){this.evTarget=nt,this.evWin=rt,this.started=!1,W.apply(this,arguments)}function ot(t,e){var i=b(t.touches),n=b(t.changedTouches);return 12&e&&(i=P(i.concat(n),\"identifier\",!0)),[i,n]}m(st,W,{handler:function(t){var e=it[t.type];if(1===e&&(this.started=!0),this.started){var i=ot.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:z,srcEvent:t})}}});var at={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht=\"touchstart touchmove touchend touchcancel\";function ut(){this.evTarget=ht,this.targetIds={},W.apply(this,arguments)}function ct(t,e){var i=b(t.touches),n=this.targetIds;if(3&e&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=b(t.changedTouches),a=[],h=this.target;if(s=i.filter((function(t){return A(t.target,h)})),1===e)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),12&e&&delete n[o[r].identifier],r++;return a.length?[P(s.concat(a),\"identifier\",!0),a]:void 0}m(ut,W,{handler:function(t){var e=at[t.type],i=ct.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:z,srcEvent:t})}});function lt(){W.apply(this,arguments);var t=g(this.handler,this);this.touch=new ut(this.manager,t),this.mouse=new $(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function pt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,ft.call(this,e)):12&t&&ft.call(this,e)}function ft(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout((function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)}),2500)}}function dt(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=25&&o<=25)return!0}return!1}m(lt,W,{handler:function(t,e,i){var n=i.pointerType==z,r=i.pointerType==N;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)pt.call(this,e,i);else if(r&&dt.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=D(o.style,\"touchAction\"),mt=vt!==n,gt=\"compute\",Tt=\"auto\",yt=\"manipulation\",Et=\"none\",It=\"pan-x\",At=\"pan-y\",_t=function(){if(!mt)return!1;var e={},i=t.CSS&&t.CSS.supports;return[\"auto\",\"manipulation\",\"pan-y\",\"pan-x\",\"pan-x pan-y\",\"none\"].forEach((function(n){e[n]=!i||t.CSS.supports(\"touch-action\",n)})),e}();function Ct(t,e){this.manager=t,this.set(e)}Ct.prototype={set:function(t){t==gt&&(t=this.compute()),mt&&this.manager.element.style&&_t[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,(function(e){T(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(_(t,Et))return Et;var e=_(t,It),i=_(t,At);if(e&&i)return Et;if(e||i)return e?It:At;if(_(t,yt))return yt;return Tt}(t.join(\" \"))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,r=_(n,Et)&&!_t.none,s=_(n,At)&&!_t[\"pan-y\"],o=_(n,It)&&!_t[\"pan-x\"];if(r){var a=1===t.pointers.length,h=t.distance<2,u=t.deltaTime<250;if(a&&h&&u)return}if(!o||!s)return r||s&&6&i||o&&i&X?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var St=32;function bt(t){this.options=r({},this.defaults,t||{}),this.id=x++,this.manager=null,this.options.enable=y(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Pt(t){return 16&t?\"cancel\":8&t?\"end\":4&t?\"move\":2&t?\"start\":\"\"}function Dt(t){return 16==t?\"down\":8==t?\"up\":2==t?\"left\":4==t?\"right\":\"\"}function xt(t,e){var i=e.manager;return i?i.get(t):t}function wt(){bt.apply(this,arguments)}function Ot(){wt.apply(this,arguments),this.pX=null,this.pY=null}function Rt(){wt.apply(this,arguments)}function Mt(){bt.apply(this,arguments),this._timer=null,this._input=null}function zt(){wt.apply(this,arguments)}function Nt(){wt.apply(this,arguments)}function Xt(){bt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Yt(t,e){return(e=e||{}).recognizers=y(e.recognizers,Yt.defaults.preset),new Ft(t,e)}bt.prototype={defaults:{},set:function(t){return r(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,\"recognizeWith\",this))return this;var e=this.simultaneous;return e[(t=xt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,\"dropRecognizeWith\",this)||(t=xt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(l(t,\"requireFailure\",this))return this;var e=this.requireFail;return-1===S(e,t=xt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,\"dropRequireFailure\",this))return this;t=xt(t,this);var e=S(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function n(i){e.manager.emit(i,t)}i<8&&n(e.options.event+Pt(i)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),i>=8&&n(e.options.event+Pt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=St},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=r({},t);if(!T(this.options.enable,[this,e]))return this.reset(),void(this.state=St);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},m(wt,bt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,r=this.attrTest(t);return n&&(8&i||!r)?16|e:n||r?4&i?8|e:2&e?4|e:2:St}}),m(Ot,wt,{defaults:{event:\"pan\",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(At),t&X&&e.push(It),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(6&e.direction?(r=0===s?1:s<0?2:4,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?1:o<0?8:16,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return wt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Dt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),m(Rt,wt,{defaults:{event:\"pinch\",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?\"in\":\"out\";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),m(Mt,bt,{defaults:{event:\"press\",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Tt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=c((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return St},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+\"up\",t):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}}),m(zt,wt,{defaults:{event:\"rotate\",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),m(Nt,wt,{defaults:{event:\"swipe\",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Ot.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:i&X&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&h(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Dt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),m(Xt,bt,{defaults:{event:\"tap\",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[yt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&r&&i){if(4!=t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||V(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=c((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return St},failTimeout:function(){return this._timer=c((function(){this.state=St}),this.options.interval,this),St},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Yt.VERSION=\"2.0.7\",Yt.defaults={domEvents:!1,touchAction:gt,enable:!0,inputTarget:null,inputClass:null,preset:[[zt,{enable:!1}],[Rt,{enable:!1},[\"rotate\"]],[Nt,{direction:6}],[Ot,{direction:6},[\"swipe\"]],[Xt],[Xt,{event:\"doubletap\",taps:2},[\"tap\"]],[Mt]],cssProps:{userSelect:\"none\",touchSelect:\"none\",touchCallout:\"none\",contentZooming:\"none\",userDrag:\"none\",tapHighlightColor:\"rgba(0,0,0,0)\"}};function Ft(t,e){var i;this.options=r({},Yt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(R?et:M?ut:O?lt:$))(i,q),this.touchAction=new Ct(this,this.options.touchAction),Wt(this,!0),p(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Wt(t,e){var i,n=t.element;n.style&&(p(t.options.cssProps,(function(r,s){i=D(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=t.oldCssProps[i]||\"\"})),e||(t.oldCssProps={}))}Ft.prototype={set:function(t){return r(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var n=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&14&i.state&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof bt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(l(t,\"add\",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,\"remove\",this))return this;if(t=this.get(t)){var e=this.recognizers,i=S(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==n&&e!==n){var i=this.handlers;return p(C(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==n){var i=this.handlers;return p(C(t),(function(t){e?i[t]&&i[t].splice(S(i[t],e),1):delete i[t]})),this}},emit:function(t,i){this.options.domEvents&&function(t,i){var n=e.createEvent(\"Event\");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}(t,i);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){i.type=t,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](i),r++}},destroy:function(){this.element&&Wt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},r(Yt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:St,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:X,DIRECTION_ALL:30,Manager:Ft,Input:W,TouchAction:Ct,TouchInput:ut,MouseInput:$,PointerEventInput:et,TouchMouseInput:lt,SingleTouchInput:st,Recognizer:bt,AttrRecognizer:wt,Tap:Xt,Pan:Ot,Swipe:Nt,Pinch:Rt,Rotate:zt,Press:Mt,on:E,off:I,each:p,merge:v,extend:d,assign:r,inherit:m,bindFn:g,prefixed:D}),(void 0!==t?t:\"undefined\"!=typeof self?self:{}).Hammer=Yt,\"function\"==typeof define&&define.amd?define((function(){return Yt})):\"undefined\"!=typeof module&&module.exports?module.exports=Yt:t.Hammer=Yt}(window,document);",
    "var FUNC_ERROR_TEXT=\"Expected a function\",NAN=NaN,symbolTag=\"[object Symbol]\",reTrim=/^\\s+|\\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=\"object\"==typeof global&&global&&global.Object===Object&&global,freeSelf=\"object\"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function(\"return this\")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(e,t,r){var o,n,i,u,a,f,c=0,l=!1,b=!1,s=!0;if(\"function\"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);function v(t){var r=o,i=n;return o=n=void 0,c=t,u=e.apply(i,r)}function m(e){return c=e,a=setTimeout(y,t),l?v(e):u}function j(e){var r=e-f;return void 0===f||r>=t||r<0||b&&e-c>=i}function y(){var e=now();if(j(e))return p(e);a=setTimeout(y,function(e){var r=t-(e-f);return b?nativeMin(r,i-(e-c)):r}(e))}function p(e){return a=void 0,s&&o?v(e):(o=n=void 0,u)}function O(){var e=now(),r=j(e);if(o=arguments,n=this,f=e,r){if(void 0===a)return m(f);if(b)return a=setTimeout(y,t),v(f)}return void 0===a&&(a=setTimeout(y,t)),u}return t=toNumber(t)||0,isObject(r)&&(l=!!r.leading,i=(b=\"maxWait\"in r)?nativeMax(toNumber(r.maxWait)||0,t):i,s=\"trailing\"in r?!!r.trailing:s),O.cancel=function(){void 0!==a&&clearTimeout(a),c=0,o=f=n=a=void 0},O.flush=function(){return void 0===a?u:p(now())},O}function isObject(e){var t=typeof e;return!!e&&(\"object\"==t||\"function\"==t)}function isObjectLike(e){return!!e&&\"object\"==typeof e}function isSymbol(e){return\"symbol\"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if(\"number\"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject(e)){var t=\"function\"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+\"\":t}if(\"string\"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,\"\");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}module.exports=debounce;",
    "var n,l,u,t,i,o,r,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(e,n){for(var t in n)e[t]=n[t];return e}function a(e){var n=e.parentNode;n&&n.removeChild(e)}function p(e,n,t){var _,l,o,r=arguments,u={};for(o in n)\"key\"==o?_=n[o]:\"ref\"==o?l=n[o]:u[o]=n[o];if(arguments.length>3)for(t=[t],o=3;o<arguments.length;o++)t.push(r[o]);if(null!=t&&(u.children=t),\"function\"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===u[o]&&(u[o]=e.defaultProps[o]);return v(e,u,_,l,null)}function v(e,t,_,l,o){var r={type:e,props:t,key:_,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++n.__v:o};return null!=n.vnode&&n.vnode(r),r}function h(e){return e.children}function y(e,n){this.props=e,this.context=n}function d(e,n){if(null==n)return e.__?d(e.__,e.__.__k.indexOf(e)+1):null;for(var t;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e)return t.__e;return\"function\"==typeof e.type?d(e):null}function _(e){var n,t;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e){e.__e=e.__c.base=t.__e;break}return _(e)}}function w(e){(!e.__d&&(e.__d=!0)&&u.push(e)&&!x.__r++||i!==n.debounceRendering)&&((i=n.debounceRendering)||t)(x)}function x(){for(var e;x.__r=u.length;)e=u.sort((function(e,n){return e.__v.__b-n.__v.__b})),u=[],e.some((function(e){var n,t,l,o,r,u,i;e.__d&&(u=(r=(n=e).__v).__e,(i=n.__P)&&(t=[],(l=s({},r)).__v=r.__v+1,o=N(i,r,l,n.__n,void 0!==i.ownerSVGElement,null!=r.__h?[u]:null,t,null==u?d(r):u,r.__h),T(t,r),o!=u&&_(r)))}))}function k(n,t,_,l,o,r,u,i,s,p){var c,y,m,k,x,b,w,C=l&&l.__k||e,P=C.length;for(s==f&&(s=null!=u?u[0]:P?d(l,0):null),_.__k=[],c=0;c<t.length;c++)if(null!=(k=_.__k[c]=null==(k=t[c])||\"boolean\"==typeof k?null:\"string\"==typeof k||\"number\"==typeof k?v(null,k,null,null,k):Array.isArray(k)?v(h,{children:k},null,null,null):null!=k.__e||null!=k.__c?v(k.type,k.props,k.key,null,k.__v):k)){if(k.__=_,k.__b=_.__b+1,null===(m=C[c])||m&&k.key==m.key&&k.type===m.type)C[c]=void 0;else for(y=0;y<P;y++){if((m=C[y])&&k.key==m.key&&k.type===m.type){C[y]=void 0;break}m=null}x=N(n,k,m=m||f,o,r,u,i,s,p),(y=k.ref)&&m.ref!=y&&(w||(w=[]),m.ref&&w.push(m.ref,null,k),w.push(y,k.__c||x,k)),null!=x?(null==b&&(b=x),s=g(n,k,m,C,u,x,s),p||\"option\"!=_.type?\"function\"==typeof _.type&&(_.__d=s):n.value=\"\"):s&&m.__e==s&&s.parentNode!=n&&(s=d(m))}if(_.__e=b,null!=u&&\"function\"!=typeof _.type)for(c=u.length;c--;)null!=u[c]&&a(u[c]);for(c=P;c--;)null!=C[c]&&H(C[c],C[c]);if(w)for(c=0;c<w.length;c++)j(w[c],w[++c],w[++c])}function g(e,n,t,_,l,o,r){var u,i,s;if(void 0!==n.__d)u=n.__d,n.__d=void 0;else if(l==t||o!=r||null==o.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(o),u=null;else{for(i=r,s=0;(i=i.nextSibling)&&s<_.length;s+=2)if(i==o)break e;e.insertBefore(o,r),u=r}return void 0!==u?u:o.nextSibling}function m(e,n,t,_,l){var o;for(o in t)\"children\"===o||\"key\"===o||o in n||A(e,o,null,t[o],_);for(o in n)l&&\"function\"!=typeof n[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||t[o]===n[o]||A(e,o,n[o],t[o],_)}function b(e,n,t){\"-\"===n[0]?e.setProperty(n,t):e[n]=null==t?\"\":\"number\"!=typeof t||c.test(n)?t:t+\"px\"}function A(e,n,t,_,l){var o,r,u;if(l&&\"className\"==n&&(n=\"class\"),\"style\"===n)if(\"string\"==typeof t)e.style.cssText=t;else{if(\"string\"==typeof _&&(e.style.cssText=_=\"\"),_)for(n in _)t&&n in t||b(e.style,n,\"\");if(t)for(n in t)_&&t[n]===_[n]||b(e.style,n,t[n])}else\"o\"===n[0]&&\"n\"===n[1]?(o=n!==(n=n.replace(/Capture$/,\"\")),(r=n.toLowerCase())in e&&(n=r),n=n.slice(2),e.l||(e.l={}),e.l[n+o]=t,u=o?C:P,t?_||e.addEventListener(n,u,o):e.removeEventListener(n,u,o)):\"list\"!==n&&\"tagName\"!==n&&\"form\"!==n&&\"type\"!==n&&\"size\"!==n&&\"download\"!==n&&\"href\"!==n&&!l&&n in e?e[n]=null==t?\"\":t:\"function\"!=typeof t&&\"dangerouslySetInnerHTML\"!==n&&(n!==(n=n.replace(/xlink:?/,\"\"))?null==t||!1===t?e.removeAttributeNS(\"http://www.w3.org/1999/xlink\",n.toLowerCase()):e.setAttributeNS(\"http://www.w3.org/1999/xlink\",n.toLowerCase(),t):null==t||!1===t&&!/^ar/.test(n)?e.removeAttribute(n):e.setAttribute(n,t))}function P(e){this.l[e.type+!1](n.event?n.event(e):e)}function C(e){this.l[e.type+!0](n.event?n.event(e):e)}function z(e,n,t){var _,l;for(_=0;_<e.__k.length;_++)(l=e.__k[_])&&(l.__=e,l.__e&&(\"function\"==typeof l.type&&l.__k.length>1&&z(l,n,t),n=g(t,l,l,e.__k,null,l.__e,n),\"function\"==typeof e.type&&(e.__d=n)))}function N(e,t,_,l,o,r,u,i,p){var c,f,a,d,v,m,g,x,b,w,C,P=t.type;if(void 0!==t.constructor)return null;null!=_.__h&&(p=_.__h,i=t.__e=_.__e,t.__h=null,r=[i]),(c=n.__b)&&c(t);try{e:if(\"function\"==typeof P){if(x=t.props,b=(c=P.contextType)&&l[c.__c],w=c?b?b.props.value:c.__:l,_.__c?g=(f=t.__c=_.__c).__=f.__E:(\"prototype\"in P&&P.prototype.render?t.__c=f=new P(x,w):(t.__c=f=new y(x,w),f.constructor=P,f.render=I),b&&b.sub(f),f.props=x,f.state||(f.state={}),f.context=w,f.__n=l,a=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=P.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=s({},f.__s)),s(f.__s,P.getDerivedStateFromProps(x,f.__s))),d=f.props,v=f.state,a)null==P.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==P.getDerivedStateFromProps&&x!==d&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(x,w),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(x,f.__s,w)||t.__v===_.__v){f.props=x,f.state=f.__s,t.__v!==_.__v&&(f.__d=!1),f.__v=t,t.__e=_.__e,t.__k=_.__k,f.__h.length&&u.push(f),z(t,i,e);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(x,f.__s,w),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(d,v,m)}))}f.context=w,f.props=x,f.state=f.__s,(c=n.__r)&&c(t),f.__d=!1,f.__v=t,f.__P=e,c=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(l=s(s({},l),f.getChildContext())),a||null==f.getSnapshotBeforeUpdate||(m=f.getSnapshotBeforeUpdate(d,v)),C=null!=c&&c.type==h&&null==c.key?c.props.children:c,k(e,Array.isArray(C)?C:[C],t,_,l,o,r,u,i,p),f.base=t.__e,t.__h=null,f.__h.length&&u.push(f),g&&(f.__E=f.__=null),f.__e=!1}else null==r&&t.__v===_.__v?(t.__k=_.__k,t.__e=_.__e):t.__e=$(_.__e,t,_,l,o,r,u,p);(c=n.diffed)&&c(t)}catch(e){t.__v=null,(p||null!=r)&&(t.__e=i,t.__h=!!p,r[r.indexOf(i)]=null),n.__e(e,t,_)}return t.__e}function T(e,t){n.__c&&n.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){n.__e(e,t.__v)}}))}function $(n,t,_,l,o,r,u,i){var s,p,c,a,d,h=_.props,v=t.props;if(o=\"svg\"===t.type||o,null!=r)for(s=0;s<r.length;s++)if(null!=(p=r[s])&&((null===t.type?3===p.nodeType:p.localName===t.type)||n==p)){n=p,r[s]=null;break}if(null==n){if(null===t.type)return document.createTextNode(v);n=o?document.createElementNS(\"http://www.w3.org/2000/svg\",t.type):document.createElement(t.type,v.is&&{is:v.is}),r=null,i=!1}if(null===t.type)h===v||i&&n.data===v||(n.data=v);else{if(null!=r&&(r=e.slice.call(n.childNodes)),c=(h=_.props||f).dangerouslySetInnerHTML,a=v.dangerouslySetInnerHTML,!i){if(null!=r)for(h={},d=0;d<n.attributes.length;d++)h[n.attributes[d].name]=n.attributes[d].value;(a||c)&&(a&&(c&&a.__html==c.__html||a.__html===n.innerHTML)||(n.innerHTML=a&&a.__html||\"\"))}m(n,v,h,o,i),a?t.__k=[]:(s=t.props.children,k(n,Array.isArray(s)?s:[s],t,_,l,\"foreignObject\"!==t.type&&o,r,u,f,i)),i||(\"value\"in v&&void 0!==(s=v.value)&&(s!==n.value||\"progress\"===t.type&&!s)&&A(n,\"value\",s,h.value,!1),\"checked\"in v&&void 0!==(s=v.checked)&&s!==n.checked&&A(n,\"checked\",s,h.checked,!1))}return n}function j(e,t,_){try{\"function\"==typeof e?e(t):e.current=t}catch(e){n.__e(e,_)}}function H(e,t,_){var l,o,r;if(n.unmount&&n.unmount(e),(l=e.ref)&&(l.current&&l.current!==e.__e||j(l,null,t)),_||\"function\"==typeof e.type||(_=null!=(o=e.__e)),e.__e=e.__d=void 0,null!=(l=e.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(e){n.__e(e,t)}l.base=l.__P=null}if(l=e.__k)for(r=0;r<l.length;r++)l[r]&&H(l[r],t,_);null!=o&&a(o)}function I(e,n,t){return this.constructor(e,t)}function L(t,_,l){var r,u,i;n.__&&n.__(t,_),u=(r=l===o)?null:l&&l.__k||_.__k,t=p(h,null,[t]),i=[],N(_,(r?_:l||_).__k=t,u||f,f,void 0!==_.ownerSVGElement,l&&!r?[l]:u?null:_.childNodes.length?e.slice.call(_.childNodes):null,i,l||f,r),T(i,t)}n={__e:function(e,n){for(var t,_,l,o=n.__h;n=n.__;)if((t=n.__c)&&!t.__)try{if((_=t.constructor)&&null!=_.getDerivedStateFromError&&(t.setState(_.getDerivedStateFromError(e)),l=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(e),l=t.__d),l)return n.__h=o,t.__E=t}catch(n){e=n}throw e},__v:0},l=function(e){return null!=e&&void 0===e.constructor},y.prototype.setState=function(e,n){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),\"function\"==typeof e&&(e=e(s({},t),this.props)),e&&s(t,e),null!=e&&this.__v&&(n&&this.__h.push(n),w(this))},y.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),w(this))},y.prototype.render=h,u=[],t=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,x.__r=0,o=f,r=0,exports.render=L,exports.hydrate=function(e,n){L(e,n,o)},exports.createElement=p,exports.h=p,exports.Fragment=h,exports.createRef=function(){return{current:null}},exports.isValidElement=l,exports.Component=y,exports.cloneElement=function(e,n,t){var _,l,o,r=arguments,u=s({},e.props);for(o in n)\"key\"==o?_=n[o]:\"ref\"==o?l=n[o]:u[o]=n[o];if(arguments.length>3)for(t=[t],o=3;o<arguments.length;o++)t.push(r[o]);return null!=t&&(u.children=t),v(e.type,u,_||e.key,l||e.ref,null)},exports.createContext=function(e,n){var t={__c:n=\"__cC\"+r++,__:e,Consumer:function(e,n){return e.children(n)},Provider:function(e,t,_){return this.getChildContext||(t=[],(_={})[n]=this,this.getChildContext=function(){return _},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&t.some(w)},this.sub=function(e){t.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){t.splice(t.indexOf(e),1),n&&n.call(e)}}),e.children}};return t.Provider.__=t.Consumer.contextType=t},exports.toChildArray=function e(n,t){return t=t||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some((function(n){e(n,t)})):t.push(n)),t},exports.__u=H,exports.options=n;",
    "var n,t,r,o=require(\"preact\"),u=0,i=[],c=o.options.__b,e=o.options.__r,f=o.options.diffed,a=o.options.__c,v=o.options.unmount;function p(_,n){o.options.__h&&o.options.__h(t,_,u||n),u=0;var e=t.__H||(t.__H={__:[],__h:[]});return _>=e.__.length&&e.__.push({}),e.__[_]}function s(_){return u=1,x(A,_)}function x(_,o,e){var u=p(n++,2);return u.t=_,u.__c||(u.__=[e?e(o):A(void 0,o),function(_){var t=u.t(u.__[0],_);u.__[0]!==t&&(u.__=[t,u.__[1]],u.__c.setState({}))}],u.__c=t),u.__}function m(_,e){var u=p(n++,4);!o.options.__s&&q(u.__H,e)&&(u.__=_,u.__H=e,t.__h.push(u))}function l(_,t){var o=p(n++,7);return q(o.__H,t)&&(o.__=_(),o.__H=t,o.__h=_),o.__}function y(){i.forEach((function(n){if(n.__P)try{n.__H.__h.forEach(_),n.__H.__h.forEach(d),n.__H.__h=[]}catch(t){n.__H.__h=[],o.options.__e(t,n.__v)}})),i=[]}o.options.__b=function(_){t=null,c&&c(_)},o.options.__r=function(o){e&&e(o),n=0;var u=(t=o.__c).__H;u&&(u.__h.forEach(_),u.__h.forEach(d),u.__h=[])},o.options.diffed=function(_){f&&f(_);var n=_.__c;n&&n.__H&&n.__H.__h.length&&(1!==i.push(n)&&r===o.options.requestAnimationFrame||((r=o.options.requestAnimationFrame)||function(_){var t,n=function(){clearTimeout(o),h&&cancelAnimationFrame(t),setTimeout(_)},o=setTimeout(n,100);h&&(t=requestAnimationFrame(n))})(y)),t=void 0},o.options.__c=function(t,n){n.some((function(t){try{t.__h.forEach(_),t.__h=t.__h.filter((function(_){return!_.__||d(_)}))}catch(r){n.some((function(_){_.__h&&(_.__h=[])})),n=[],o.options.__e(r,t.__v)}})),a&&a(t,n)},o.options.unmount=function(t){v&&v(t);var n=t.__c;if(n&&n.__H)try{n.__H.__.forEach(_)}catch(t){o.options.__e(t,n.__v)}};var h=\"function\"==typeof requestAnimationFrame;function _(_){var n=t;\"function\"==typeof _.__c&&_.__c(),t=n}function d(_){var n=t;_.__c=_.__(),t=n}function q(_,t){return!_||_.length!==t.length||t.some((function(t,n){return t!==_[n]}))}function A(_,t){return\"function\"==typeof t?t(_):t}exports.useState=s,exports.useReducer=x,exports.useEffect=function(_,e){var u=p(n++,3);!o.options.__s&&q(u.__H,e)&&(u.__=_,u.__H=e,t.__H.__h.push(u))},exports.useLayoutEffect=m,exports.useRef=function(_){return u=5,l((function(){return{current:_}}),[])},exports.useImperativeHandle=function(_,t,n){u=6,m((function(){\"function\"==typeof _?_(t()):_&&(_.current=t())}),null==n?n:n.concat(_))},exports.useMemo=l,exports.useCallback=function(_,t){return u=8,l((function(){return _}),t)},exports.useContext=function(_){var o=t.context[_.__c],e=p(n++,9);return e.__c=_,o?(null==e.__&&(e.__=!0,o.sub(t)),o.props.value):_.__},exports.useDebugValue=function(_,t){o.options.useDebugValue&&o.options.useDebugValue(t?t(_):_)},exports.useErrorBoundary=function(_){var o=p(n++,10),e=s();return o.__=_,t.componentDidCatch||(t.componentDidCatch=function(_){o.__&&o.__(_),e[1](_)}),[e[0],function(){e[1](void 0)}]};",
    "\"use strict\";var ReactPropTypesSecret=require(\"./lib/ReactPropTypesSecret\");function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function e(e,t,n,r,o,p){if(p!==ReactPropTypesSecret){var c=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw c.name=\"Invariant Violation\",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return n.PropTypes=n,n};",
    "var ReactIs,throwOnDirectAccess;module.exports=require(\"./factoryWithThrowingShims\")();",
    "\"use strict\";var ReactPropTypesSecret=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\";module.exports=ReactPropTypesSecret;",
    "var COMPLETE=\"complete\",CANCELED=\"canceled\";function raf(e){if(\"requestAnimationFrame\"in window)return window.requestAnimationFrame(e);setTimeout(e,16)}function setElementScroll(e,t,n){e.self===e?e.scrollTo(t,n):(e.scrollLeft=t,e.scrollTop=n)}function getTargetScrollLocation(e,t){var n,l,i,o,r,a,s,f=e.align,c=e.target.getBoundingClientRect(),d=f&&null!=f.left?f.left:.5,u=f&&null!=f.top?f.top:.5,g=f&&null!=f.leftOffset?f.leftOffset:0,m=f&&null!=f.topOffset?f.topOffset:0,h=d,p=u;if(e.isWindow(t))a=Math.min(c.width,t.innerWidth),s=Math.min(c.height,t.innerHeight),l=c.left+t.pageXOffset-t.innerWidth*h+a*h,i=c.top+t.pageYOffset-t.innerHeight*p+s*p,i-=m,o=(l-=g)-t.pageXOffset,r=i-t.pageYOffset;else{a=c.width,s=c.height,n=t.getBoundingClientRect();var E=c.left-(n.left-t.scrollLeft),S=c.top-(n.top-t.scrollTop);l=E+a*h-t.clientWidth*h,i=S+s*p-t.clientHeight*p,l-=g,i-=m,l=Math.max(Math.min(l,t.scrollWidth-t.clientWidth),0),i=Math.max(Math.min(i,t.scrollHeight-t.clientHeight),0),o=l-t.scrollLeft,r=i-t.scrollTop}return{x:l,y:i,differenceX:o,differenceY:r}}function animate(e){var t=e._scrollSettings;if(t){var n=t.maxSynchronousAlignments,l=getTargetScrollLocation(t,e),i=Date.now()-t.startTime,o=Math.min(1/t.time*i,1);if(t.endIterations>=n)return setElementScroll(e,l.x,l.y),e._scrollSettings=null,t.end(COMPLETE);var r=1-t.ease(o);if(setElementScroll(e,l.x-l.differenceX*r,l.y-l.differenceY*r),i>=t.time)return t.endIterations++,animate(e);raf(animate.bind(null,e))}}function defaultIsWindow(e){return e.self===e}function transitionScrollTo(e,t,n,l){var i,o=!t._scrollSettings,r=t._scrollSettings,a=Date.now(),s={passive:!0};function f(e){t._scrollSettings=null,t.parentElement&&t.parentElement._scrollSettings&&t.parentElement._scrollSettings.end(e),n.debug&&console.log(\"Scrolling ended with type\",e,\"for\",t),l(e),i&&(t.removeEventListener(\"touchstart\",i,s),t.removeEventListener(\"wheel\",i,s))}r&&r.end(CANCELED);var c=n.maxSynchronousAlignments;return null==c&&(c=3),t._scrollSettings={startTime:a,endIterations:0,target:e,time:n.time,ease:n.ease,align:n.align,isWindow:n.isWindow||defaultIsWindow,maxSynchronousAlignments:c,end:f},\"cancellable\"in n&&!n.cancellable||(i=f.bind(null,CANCELED),t.addEventListener(\"touchstart\",i,s),t.addEventListener(\"wheel\",i,s)),o&&animate(t),i}function defaultIsScrollable(e){return\"pageXOffset\"in e||(e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth)&&\"hidden\"!==getComputedStyle(e).overflow}function defaultValidTarget(){return!0}function findParentElement(e){if(e.assignedSlot)return findParentElement(e.assignedSlot);if(e.parentElement)return\"BODY\"===e.parentElement.tagName?e.parentElement.ownerDocument.defaultView||e.parentElement.ownerDocument.ownerWindow:e.parentElement;if(e.getRootNode){var t=e.getRootNode();if(11===t.nodeType)return t.host}}module.exports=function(e,t,n){if(e){\"function\"==typeof t&&(n=t,t=null),t||(t={}),t.time=isNaN(t.time)?1e3:t.time,t.ease=t.ease||function(e){return 1-Math.pow(1-e,e/2)};var l,i=findParentElement(e),o=1,r=t.validTarget||defaultValidTarget,a=t.isScrollable;for(t.debug&&(console.log(\"About to scroll to\",e),i||console.error(\"Target did not have a parent, is it mounted in the DOM?\"));i;)if(t.debug&&console.log(\"Scrolling parent node\",i),r(i,o)&&(a?a(i,defaultIsScrollable):defaultIsScrollable(i))&&(o++,l=transitionScrollTo(e,i,t,s)),!(i=findParentElement(i))){s(COMPLETE);break}return l}function s(e){--o||n&&n(e)}};",
    "function E(){}E.prototype={on:function(t,n,e){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:n,ctx:e}),this},once:function(t,n,e){var i=this;function o(){i.off(t,o),n.apply(e,arguments)}return o._=n,this.on(t,o,e)},emit:function(t){for(var n=[].slice.call(arguments,1),e=((this.e||(this.e={}))[t]||[]).slice(),i=0,o=e.length;i<o;i++)e[i].fn.apply(e[i].ctx,n);return this},off:function(t,n){var e=this.e||(this.e={}),i=e[t],o=[];if(i&&n)for(var r=0,f=i.length;r<f;r++)i[r].fn!==n&&i[r].fn._!==n&&o.push(i[r]);return o.length?e[t]=o:delete e[t],this}},module.exports=E,module.exports.TinyEmitter=E;",
    "import { createElement, render } from 'preact';\n\nimport AdderToolbar from './components/adder-toolbar';\nimport { createShadowRoot } from './util/shadow-root';\n\n/**\n *  @typedef {1} ArrowPointingDown\n * Show the adder above the selection with an arrow pointing down at the\n * selected text.\n */\nexport const ARROW_POINTING_DOWN = 1;\n\n/**\n *  @typedef {2} ArrowPointingUp\n * Show the adder above the selection with an arrow pointing up at the\n * selected text.\n */\nexport const ARROW_POINTING_UP = 2;\n\n/**\n *  @typedef {ArrowPointingDown|ArrowPointingUp} ArrowDirection\n * Show the adder above the selection with an arrow pointing up at the\n * selected text.\n */\n\n/**\n * @typedef Target\n * @prop {number} left - Offset from left edge of viewport.\n * @prop {number} top - Offset from top edge of viewport.\n * @prop {ArrowDirection} arrowDirection - Direction of the adder's arrow.\n */\n\nfunction toPx(pixels) {\n  return pixels.toString() + 'px';\n}\n\nconst ARROW_HEIGHT = 10;\n\n// The preferred gap between the end of the text selection and the adder's\n// arrow position.\nconst ARROW_H_MARGIN = 20;\n\n/**\n * Return the closest ancestor of `el` which has been positioned.\n *\n * If no ancestor has been positioned, returns the root element.\n *\n * @param {Element} el\n * @return {Element}\n */\nfunction nearestPositionedAncestor(el) {\n  let parentEl = /** @type {Element} */ (el.parentElement);\n  while (parentEl.parentElement) {\n    if (getComputedStyle(parentEl).position !== 'static') {\n      break;\n    }\n    parentEl = parentEl.parentElement;\n  }\n  return parentEl;\n}\n\n/**\n * @typedef AdderOptions\n * @prop {() => any} onAnnotate - Callback invoked when \"Annotate\" button is clicked\n * @prop {() => any} onHighlight - Callback invoked when \"Highlight\" button is clicked\n * @prop {(annotations: Object[]) => any} onShowAnnotations -\n *   Callback invoked when  \"Show\" button is clicked\n */\n\n/**\n * Container for the 'adder' toolbar which provides controls for the user to\n * annotate and highlight the selected text.\n *\n * The toolbar implementation is split between this class, which is\n * the container for the toolbar that positions it on the page and isolates\n * it from the page's styles using shadow DOM, and the `AdderToolbar` Preact\n * component which actually renders the toolbar.\n */\nexport class Adder {\n  /**\n   * Create the toolbar's container and hide it.\n   *\n   * The adder is initially hidden.\n   *\n   * @param {HTMLElement} container - The DOM element into which the adder will be created\n   * @param {AdderOptions} options - Options object specifying `onAnnotate` and `onHighlight`\n   *        event handlers.\n   */\n  constructor(container, options) {\n    this._container = container;\n    this._shadowRoot = createShadowRoot(container);\n\n    // Set initial style\n    Object.assign(container.style, {\n      display: 'block',\n\n      // take position out of layout flow initially\n      position: 'absolute',\n      top: 0,\n    });\n\n    this._view = /** @type {Window} */ (container.ownerDocument.defaultView);\n\n    this._width = () => {\n      const firstChild = /** @type {Element} */ (this._shadowRoot.firstChild);\n      return firstChild.getBoundingClientRect().width;\n    };\n\n    this._height = () => {\n      const firstChild = /** @type {Element} */ (this._shadowRoot.firstChild);\n      return firstChild.getBoundingClientRect().height;\n    };\n\n    this._isVisible = false;\n\n    /** @type {'up'|'down'} */\n    this._arrowDirection = 'up';\n\n    this._onAnnotate = options.onAnnotate;\n    this._onHighlight = options.onHighlight;\n    this._onShowAnnotations = options.onShowAnnotations;\n\n    /**\n     * Annotation objects associated with the current selection. If non-empty,\n     * a \"Show\" button appears in the toolbar. Clicking the button calls the\n     * `onShowAnnotations` callback with the current value of `annotationsForSelection`.\n     *\n     * @type {Object[]}\n     */\n    this.annotationsForSelection = [];\n\n    this._render();\n  }\n\n  /** Hide the adder */\n  hide() {\n    this._isVisible = false;\n    this._render();\n  }\n\n  /**\n   * Display the adder in the best position in order to target the\n   * selected text in `selectionRect`.\n   *\n   * @param {DOMRect} selectionRect - The rect of text to target, in viewport\n   *        coordinates.\n   * @param {boolean} isRTLselection - True if the selection was made\n   *        rigth-to-left, such that the focus point is mosty likely at the\n   *        top-left edge of `targetRect`.\n   */\n  show(selectionRect, isRTLselection) {\n    const { left, top, arrowDirection } = this._calculateTarget(\n      selectionRect,\n      isRTLselection\n    );\n    this._showAt(left, top);\n\n    this._isVisible = true;\n    this._arrowDirection = arrowDirection === ARROW_POINTING_UP ? 'up' : 'down';\n\n    this._render();\n  }\n\n  /**\n   *  Determine the best position for the Adder and its pointer-arrow.\n   * - Position the pointer-arrow near the end of the selection (where the user's\n   *   cursor/input is most likely to be)\n   * - Position the Adder to center horizontally on the pointer-arrow\n   * - Position the Adder below the selection (arrow pointing up) for LTR selections\n   *   and above (arrow down) for RTL selections\n   *\n   * @param {DOMRect} selectionRect - The rect of text to target, in viewport\n   *        coordinates.\n   * @param {boolean} isRTLselection - True if the selection was made\n   *        rigth-to-left, such that the focus point is mosty likely at the\n   *        top-left edge of `targetRect`.\n   * @return {Target}\n   */\n  _calculateTarget(selectionRect, isRTLselection) {\n    // Set the initial arrow direction based on whether the selection was made\n    // forwards/upwards or downwards/backwards.\n    /** @type {ArrowDirection} */ let arrowDirection;\n    if (isRTLselection) {\n      arrowDirection = ARROW_POINTING_DOWN;\n    } else {\n      arrowDirection = ARROW_POINTING_UP;\n    }\n    let top;\n    let left;\n\n    // Position the adder such that the arrow it is above or below the selection\n    // and close to the end.\n    const hMargin = Math.min(ARROW_H_MARGIN, selectionRect.width);\n    const adderWidth = this._width();\n    const adderHeight = this._height();\n    if (isRTLselection) {\n      left = selectionRect.left - adderWidth / 2 + hMargin;\n    } else {\n      left =\n        selectionRect.left + selectionRect.width - adderWidth / 2 - hMargin;\n    }\n\n    // Flip arrow direction if adder would appear above the top or below the\n    // bottom of the viewport.\n    if (\n      selectionRect.top - adderHeight < 0 &&\n      arrowDirection === ARROW_POINTING_DOWN\n    ) {\n      arrowDirection = ARROW_POINTING_UP;\n    } else if (selectionRect.top + adderHeight > this._view.innerHeight) {\n      arrowDirection = ARROW_POINTING_DOWN;\n    }\n\n    if (arrowDirection === ARROW_POINTING_UP) {\n      top = selectionRect.top + selectionRect.height + ARROW_HEIGHT;\n    } else {\n      top = selectionRect.top - adderHeight - ARROW_HEIGHT;\n    }\n\n    // Constrain the adder to the viewport.\n    left = Math.max(left, 0);\n    left = Math.min(left, this._view.innerWidth - adderWidth);\n\n    top = Math.max(top, 0);\n    top = Math.min(top, this._view.innerHeight - adderHeight);\n\n    return { top, left, arrowDirection };\n  }\n\n  /**\n   * Find a Z index value that will cause the adder to appear on top of any\n   * content in the document when the adder is shown at (left, top).\n   *\n   * @param {number} left - Horizontal offset from left edge of viewport.\n   * @param {number} top - Vertical offset from top edge of viewport.\n   * @return {number} - greatest zIndex (default value of 1)\n   */\n  _findZindex(left, top) {\n    if (document.elementsFromPoint === undefined) {\n      // In case of not being able to use `document.elementsFromPoint`,\n      // default to the large arbitrary number (2^15)\n      return 32768;\n    }\n\n    const adderWidth = this._width();\n    const adderHeight = this._height();\n\n    // Find the Z index of all the elements in the screen for five positions\n    // around the adder (left-top, left-bottom, middle-center, right-top,\n    // right-bottom) and use the greatest.\n\n    // Unique elements so `getComputedStyle` is called the minimum amount of times.\n    const elements = new Set([\n      ...document.elementsFromPoint(left, top),\n      ...document.elementsFromPoint(left, top + adderHeight),\n      ...document.elementsFromPoint(\n        left + adderWidth / 2,\n        top + adderHeight / 2\n      ),\n      ...document.elementsFromPoint(left + adderWidth, top),\n      ...document.elementsFromPoint(left + adderWidth, top + adderHeight),\n    ]);\n\n    const zIndexes = [...elements]\n      .map(element => +getComputedStyle(element).zIndex)\n      .filter(Number.isInteger);\n\n    // Make sure the array contains at least one element,\n    // otherwise `Math.max(...[])` results in +Infinity\n    zIndexes.push(0);\n\n    return Math.max(...zIndexes) + 1;\n  }\n\n  /**\n   * Show the adder at the given position and with the arrow pointing in\n   * `arrowDirection`.\n   *\n   * @param {number} left - Horizontal offset from left edge of viewport.\n   * @param {number} top - Vertical offset from top edge of viewport.\n   */\n  _showAt(left, top) {\n    // Translate the (left, top) viewport coordinates into positions relative to\n    // the adder's nearest positioned ancestor (NPA).\n    //\n    // Typically the adder is a child of the `<body>` and the NPA is the root\n    // `<html>` element. However page styling may make the `<body>` positioned.\n    // See https://github.com/hypothesis/client/issues/487.\n    const positionedAncestor = nearestPositionedAncestor(this._container);\n    const parentRect = positionedAncestor.getBoundingClientRect();\n\n    const zIndex = this._findZindex(left, top);\n\n    Object.assign(this._container.style, {\n      left: toPx(left - parentRect.left),\n      top: toPx(top - parentRect.top),\n      zIndex,\n    });\n  }\n\n  _render() {\n    const handleCommand = command => {\n      switch (command) {\n        case 'annotate':\n          this._onAnnotate();\n          this.hide();\n          break;\n        case 'highlight':\n          this._onHighlight();\n          this.hide();\n          break;\n        case 'show':\n          this._onShowAnnotations(this.annotationsForSelection);\n          break;\n        default:\n          break;\n      }\n    };\n\n    render(\n      <AdderToolbar\n        isVisible={this._isVisible}\n        arrowDirection={this._arrowDirection}\n        onCommand={handleCommand}\n        annotationCount={this.annotationsForSelection.length}\n      />,\n      this._shadowRoot\n    );\n  }\n}\n",
    "import { RangeAnchor, TextPositionAnchor, TextQuoteAnchor } from './types';\n\n/**\n * @typedef {import(\"./types\").AnyRangeType} AnyRangeType\n * @typedef {import('../../types/api').Selector} Selector\n */\n\n/**\n * @param {RangeAnchor|TextPositionAnchor|TextQuoteAnchor} anchor\n * @param {Object} [options]\n *  @param {number} [options.hint]\n */\nasync function querySelector(anchor, options = {}) {\n  return anchor.toRange(options);\n}\n\n/**\n * Anchor a set of selectors.\n *\n * This function converts a set of selectors into a document range.\n * It encapsulates the core anchoring algorithm, using the selectors alone or\n * in combination to establish the best anchor within the document.\n *\n * @param {Element} root - The root element of the anchoring context.\n * @param {Selector[]} selectors - The selectors to try.\n * @param {Object} [options]\n *   @param {number} [options.hint]\n */\nexport function anchor(root, selectors, options = {}) {\n  let position = null;\n  let quote = null;\n  let range = null;\n\n  // Collect all the selectors\n  for (let selector of selectors) {\n    switch (selector.type) {\n      case 'TextPositionSelector':\n        position = selector;\n        options.hint = position.start; // TextQuoteAnchor hint\n        break;\n      case 'TextQuoteSelector':\n        quote = selector;\n        break;\n      case 'RangeSelector':\n        range = selector;\n        break;\n    }\n  }\n\n  /**\n   * Assert the quote matches the stored quote, if applicable\n   * @param {Range} range\n   */\n  const maybeAssertQuote = range => {\n    if (quote?.exact && range.toString() !== quote.exact) {\n      throw new Error('quote mismatch');\n    } else {\n      return range;\n    }\n  };\n\n  // From a default of failure, we build up catch clauses to try selectors in\n  // order, from simple to complex.\n  /** @type {Promise<Range>} */\n  let promise = Promise.reject('unable to anchor');\n\n  if (range) {\n    promise = promise.catch(() => {\n      let anchor = RangeAnchor.fromSelector(root, range);\n      return querySelector(anchor, options).then(maybeAssertQuote);\n    });\n  }\n\n  if (position) {\n    promise = promise.catch(() => {\n      let anchor = TextPositionAnchor.fromSelector(root, position);\n      return querySelector(anchor, options).then(maybeAssertQuote);\n    });\n  }\n\n  if (quote) {\n    promise = promise.catch(() => {\n      let anchor = TextQuoteAnchor.fromSelector(root, quote);\n      return querySelector(anchor, options);\n    });\n  }\n\n  return promise;\n}\n\n/**\n * @param {Element} root\n * @param {Range} range\n */\nexport function describe(root, range) {\n  const types = [RangeAnchor, TextPositionAnchor, TextQuoteAnchor];\n  const result = [];\n  for (let type of types) {\n    try {\n      const anchor = type.fromRange(root, range);\n      result.push(anchor.toSelector());\n    } catch (error) {\n      continue;\n    }\n  }\n  return result;\n}\n",
    "import approxSearch from 'approx-string-match';\n\n/**\n * @typedef {import('approx-string-match').Match} StringMatch\n */\n\n/**\n * @typedef Match\n * @prop {number} start - Start offset of match in text\n * @prop {number} end - End offset of match in text\n * @prop {number} score -\n *   Score for the match between 0 and 1.0, where 1.0 indicates a perfect match\n *   for the quote and context.\n */\n\n/**\n * Find the best approximate matches for `str` in `text` allowing up to `maxErrors` errors.\n *\n * @param {string} text\n * @param {string} str\n * @param {number} maxErrors\n * @return {StringMatch[]}\n */\nfunction search(text, str, maxErrors) {\n  // Do a fast search for exact matches. The `approx-string-match` library\n  // doesn't currently incorporate this optimization itself.\n  let matchPos = 0;\n  let exactMatches = [];\n  while (matchPos !== -1) {\n    matchPos = text.indexOf(str, matchPos);\n    if (matchPos !== -1) {\n      exactMatches.push({\n        start: matchPos,\n        end: matchPos + str.length,\n        errors: 0,\n      });\n      matchPos += 1;\n    }\n  }\n  if (exactMatches.length > 0) {\n    return exactMatches;\n  }\n\n  // If there are no exact matches, do a more expensive search for matches\n  // with errors.\n  return approxSearch(text, str, maxErrors);\n}\n\n/**\n * Compute a score between 0 and 1.0 for the similarity between `text` and `str`.\n *\n * @param {string} text\n * @param {string} str\n */\nfunction textMatchScore(text, str) {\n  /* istanbul ignore next - `scoreMatch` will never pass an empty string */\n  if (str.length === 0) {\n    return 0.0;\n  }\n  const matches = search(text, str, str.length);\n\n  // prettier-ignore\n  return 1 - (matches[0].errors / str.length);\n}\n\n/**\n * Find the best approximate match for `quote` in `text`.\n *\n * Returns `null` if no match exceeding the minimum quality threshold was found.\n *\n * @param {string} text - Document text to search\n * @param {string} quote - String to find within `text`\n * @param {Object} context -\n *   Context in which the quote originally appeared. This is used to choose the\n *   best match.\n *   @param {string} [context.prefix] - Expected text before the quote\n *   @param {string} [context.suffix] - Expected text after the quote\n *   @param {number} [context.hint] - Expected offset of match within text\n * @return {Match|null}\n */\nexport function matchQuote(text, quote, context = {}) {\n  if (quote.length === 0) {\n    return null;\n  }\n\n  // Choose the maximum number of errors to allow for the initial search.\n  // This choice involves a tradeoff between:\n  //\n  //  - Recall (proportion of \"good\" matches found)\n  //  - Precision (proportion of matches found which are \"good\")\n  //  - Cost of the initial search and of processing the candidate matches [1]\n  //\n  // [1] Specifically, the expected-time complexity of the initial search is\n  //     `O((maxErrors / 32) * text.length)`. See `approx-string-match` docs.\n  const maxErrors = Math.min(256, quote.length / 2);\n\n  // Find closest matches for `quote` in `text` based on edit distance.\n  const matches = search(text, quote, maxErrors);\n\n  if (matches.length === 0) {\n    return null;\n  }\n\n  /**\n   * Compute a score between 0 and 1.0 for a match candidate.\n   *\n   * @param {StringMatch} match\n   */\n  const scoreMatch = match => {\n    const quoteWeight = 50; // Similarity of matched text to quote.\n    const prefixWeight = 20; // Similarity of text before matched text to `context.prefix`.\n    const suffixWeight = 20; // Similarity of text after matched text to `context.suffix`.\n    const posWeight = 2; // Proximity to expected location. Used as a tie-breaker.\n\n    const quoteScore = 1 - match.errors / quote.length;\n\n    const prefixScore = context.prefix\n      ? textMatchScore(\n          text.slice(match.start - context.prefix.length, match.start),\n          context.prefix\n        )\n      : 1.0;\n    const suffixScore = context.suffix\n      ? textMatchScore(\n          text.slice(match.end, match.end + context.suffix.length),\n          context.suffix\n        )\n      : 1.0;\n\n    let posScore = 1.0;\n    if (typeof context.hint === 'number') {\n      const offset = Math.abs(match.start - context.hint);\n      posScore = 1.0 - offset / text.length;\n    }\n\n    const rawScore =\n      quoteWeight * quoteScore +\n      prefixWeight * prefixScore +\n      suffixWeight * suffixScore +\n      posWeight * posScore;\n    const maxScore = quoteWeight + prefixWeight + suffixWeight + posWeight;\n    const normalizedScore = rawScore / maxScore;\n\n    return normalizedScore;\n  };\n\n  // Rank matches based on similarity of actual and expected surrounding text\n  // and actual/expected offset in the document text.\n  const scoredMatches = matches.map(m => ({\n    start: m.start,\n    end: m.end,\n    score: scoreMatch(m),\n  }));\n\n  // Choose match with highest score.\n  scoredMatches.sort((a, b) => b.score - a.score);\n  return scoredMatches[0];\n}\n",
    "/* global PDFViewerApplication */\n\nimport RenderingStates from '../pdfjs-rendering-states';\n\nimport { TextPosition, TextRange } from './text-range';\nimport { TextQuoteAnchor } from './types';\n\n/**\n * @typedef {import('../../types/api').TextPositionSelector} TextPositionSelector\n * @typedef {import('../../types/api').TextQuoteSelector} TextQuoteSelector\n * @typedef {import('../../types/api').Selector} Selector\n *\n * @typedef {import('../../types/pdfjs').PDFPageView} PDFPageView\n * @typedef {import('../../types/pdfjs').PDFViewer} PDFViewer\n */\n\n/**\n * @typedef PdfTextRange\n * @prop {number} pageIndex\n * @prop {Object} anchor\n * @prop {number} anchor.start - Start character offset within the page's text\n * @prop {number} anchor.end - End character offset within the page's text\n */\n\n// Caches for performance.\n\n/**\n * Map of page index to page text content.\n *\n * @type {Object<number,Promise<string>>}\n */\nlet pageTextCache = {};\n\n/**\n * A cache that maps a `(quote, text offset in document)` key to a specific\n * location in the document.\n *\n * The components of the key come from an annotation's selectors. This is used\n * to speed up re-anchoring an annotation that was previously anchored in the\n * current session.\n *\n * @type {Object<string, Object<number, PdfTextRange>>}\n */\nlet quotePositionCache = {};\n\n/**\n * Return offset of `node` among its siblings\n *\n * @param {Node} node\n */\nfunction getSiblingIndex(node) {\n  let index = 0;\n  while (node.previousSibling) {\n    ++index;\n    node = node.previousSibling;\n  }\n  return index;\n}\n\n/**\n * Return the text layer element of the PDF page containing `node`.\n *\n * @param {Node|Element} node\n * @return {Element|null}\n */\nfunction getNodeTextLayer(node) {\n  const el = 'closest' in node ? node : node.parentElement;\n  return el?.closest('.textLayer') ?? null;\n}\n\n/**\n * Get the PDF.js viewer application.\n *\n * @return {PDFViewer}\n */\nfunction getPdfViewer() {\n  // @ts-ignore - TS doesn't know about PDFViewerApplication global.\n  return PDFViewerApplication.pdfViewer;\n}\n\n/**\n * Returns the view into which a PDF page is drawn.\n *\n * If called while the PDF document is still loading, this will delay until\n * the document loading has progressed far enough for a `PDFPageView` and its\n * associated `PDFPage` to be ready.\n *\n * @param {number} pageIndex\n * @return {Promise<PDFPageView>}\n */\nasync function getPageView(pageIndex) {\n  const pdfViewer = getPdfViewer();\n  let pageView = pdfViewer.getPageView(pageIndex);\n\n  if (!pageView || !pageView.pdfPage) {\n    // If the document is still loading, wait for the `pagesloaded` event.\n    //\n    // Note that loading happens in several stages. Initially the page view\n    // objects do not exist (`pageView` will be nullish), then after the\n    // \"pagesinit\" event, the page view exists but it does not have a `pdfPage`\n    // property set, then finally after the \"pagesloaded\" event, it will have\n    // a \"pdfPage\" property.\n    pageView = await new Promise(resolve => {\n      const onPagesLoaded = () => {\n        if (pdfViewer.eventBus) {\n          pdfViewer.eventBus.off('pagesloaded', onPagesLoaded);\n        } else {\n          document.removeEventListener('pagesloaded', onPagesLoaded);\n        }\n\n        resolve(pdfViewer.getPageView(pageIndex));\n      };\n\n      if (pdfViewer.eventBus) {\n        pdfViewer.eventBus.on('pagesloaded', onPagesLoaded);\n      } else {\n        // Old PDF.js versions (< 1.6.210) use DOM events.\n        document.addEventListener('pagesloaded', onPagesLoaded);\n      }\n    });\n  }\n\n  return /** @type {PDFPageView} */ (pageView);\n}\n\n/**\n * Return true if the document has selectable text.\n */\nexport async function documentHasText() {\n  const viewer = getPdfViewer();\n  let hasText = false;\n  for (let i = 0; i < viewer.pagesCount; i++) {\n    const pageText = await getPageTextContent(i);\n    if (pageText.trim().length > 0) {\n      hasText = true;\n      break;\n    }\n  }\n  return hasText;\n}\n\n/**\n * Return the text of a given PDF page.\n *\n * @param {number} pageIndex\n * @return {Promise<string>}\n */\nasync function getPageTextContent(pageIndex) {\n  if (pageTextCache[pageIndex]) {\n    return pageTextCache[pageIndex];\n  }\n\n  // Join together PDF.js `TextItem`s representing pieces of text in a PDF page.\n  const joinItems = items => {\n    // Skip empty items since PDF.js leaves their text layer divs blank.\n    // Excluding them makes our measurements match the rendered text layer.\n    // Otherwise, the selectors we generate would not match this stored text.\n    // See the `appendText` method of `TextLayerBuilder` in PDF.js.\n    const nonEmpty = items\n      .filter(item => /\\S/.test(item.str))\n      .map(item => item.str);\n    const textContent = nonEmpty.join('');\n    return textContent;\n  };\n\n  // Fetch the text content for a given page as a string.\n  const getTextContent = async pageIndex => {\n    const pageView = await getPageView(pageIndex);\n    const textContent = await pageView.pdfPage.getTextContent({\n      normalizeWhitespace: true,\n    });\n    return joinItems(textContent.items);\n  };\n\n  pageTextCache[pageIndex] = getTextContent(pageIndex);\n\n  return pageTextCache[pageIndex];\n}\n\n/**\n * Return the offset in the text for the whole document at which the text for\n * `pageIndex` begins.\n *\n * @param {number} pageIndex\n * @return {Promise<number>} - Character position at which page text starts\n */\nfunction getPageOffset(pageIndex) {\n  let index = -1;\n\n  const next = offset => {\n    ++index;\n    if (index === pageIndex) {\n      return Promise.resolve(offset);\n    }\n\n    return getPageTextContent(index).then(textContent =>\n      next(offset + textContent.length)\n    );\n  };\n\n  return next(0);\n}\n\n/**\n * Information about the page where a particular character position in the\n * text of the document occurs.\n *\n * @typedef PageOffset\n * @prop {number} index - Index of page containing offset\n * @prop {number} offset -\n *  Character position of the start of `textContent`\n *  within the full text of the document\n * @prop {string} textContent - Full text of page containing offset\n */\n\n/**\n * Find the index and text content of a page containing the character position\n * `offset` within the complete text of the document.\n *\n * @param {number} offset\n * @return {Promise<PageOffset>}\n */\nfunction findPage(offset) {\n  let index = 0;\n  let total = 0;\n\n  // We call `count` once for each page, in order. The passed offset is found on\n  // the first page where the cumulative length of the text content exceeds the\n  // offset value.\n  //\n  // When we find the page the offset is on, we return an object containing the\n  // page index, the offset at the start of that page, and the textContent of\n  // that page.\n  //\n  // To understand this a little better, here's a worked example. Imagine a\n  // document with the following page lengths:\n  //\n  //    Page 0 has length 100\n  //    Page 1 has length 50\n  //    Page 2 has length 50\n  //\n  // Then here are the pages that various offsets are found on:\n  //\n  //    offset | index\n  //    --------------\n  //    0      | 0\n  //    99     | 0\n  //    100    | 1\n  //    101    | 1\n  //    149    | 1\n  //    150    | 2\n  const count = textContent => {\n    const lastPageIndex = getPdfViewer().pagesCount - 1;\n    if (total + textContent.length > offset || index === lastPageIndex) {\n      // Offset is in current page.\n      offset = total;\n      return Promise.resolve({ index, offset, textContent });\n    } else {\n      // Offset is within a subsequent page.\n      ++index;\n      total += textContent.length;\n      return getPageTextContent(index).then(count);\n    }\n  };\n\n  return getPageTextContent(0).then(count);\n}\n\n/**\n * Locate the DOM Range which a position selector refers to.\n *\n * If the page is off-screen it may be in an unrendered state, in which case\n * the text layer will not have been created. In that case a placeholder\n * DOM element is created and the returned range refers to that placeholder.\n * In that case, the selector will need to be re-anchored when the page is\n * scrolled into view.\n *\n * @param {number} pageIndex - The PDF page index\n * @param {number} start - Character offset within the page's text\n * @param {number} end - Character offset within the page's text\n * @return {Promise<Range>}\n */\nasync function anchorByPosition(pageIndex, start, end) {\n  const page = await getPageView(pageIndex);\n\n  if (\n    page.renderingState === RenderingStates.FINISHED &&\n    page.textLayer &&\n    page.textLayer.renderingDone\n  ) {\n    // The page has been rendered. Locate the position in the text layer.\n    const root = page.textLayer.textLayerDiv;\n    const startPos = new TextPosition(root, start);\n    const endPos = new TextPosition(root, end);\n    return new TextRange(startPos, endPos).toRange();\n  }\n\n  // The page has not been rendered yet. Create a placeholder element and\n  // anchor to that instead.\n  let placeholder = page.div.querySelector('.annotator-placeholder');\n  if (!placeholder) {\n    placeholder = document.createElement('span');\n    placeholder.classList.add('annotator-placeholder');\n    placeholder.textContent = 'Loading annotations';\n    page.div.appendChild(placeholder);\n  }\n  const range = document.createRange();\n  range.setStartBefore(placeholder);\n  range.setEndAfter(placeholder);\n  return range;\n}\n\n/**\n * Search for a quote in the given pages.\n *\n * @param {number[]} pageIndexes - Pages to search in priority order\n * @param {TextQuoteSelector} quoteSelector\n * @param {Object} positionHint - Options to pass to `TextQuoteAnchor#toPositionAnchor`\n * @return {Promise<Range>} Location of quote\n */\nfunction findInPages(pageIndexes, quoteSelector, positionHint) {\n  if (pageIndexes.length === 0) {\n    // We reached the end of the document without finding a match for the quote.\n    return Promise.reject(new Error('Quote not found'));\n  }\n\n  const [pageIndex, ...rest] = pageIndexes;\n\n  const content = getPageTextContent(pageIndex);\n  const offset = getPageOffset(pageIndex);\n\n  const attempt = ([content, offset]) => {\n    const root = document.createElement('div');\n    root.textContent = content;\n    const anchor = TextQuoteAnchor.fromSelector(root, quoteSelector);\n    if (positionHint) {\n      let hint = positionHint.start - offset;\n      hint = Math.max(0, hint);\n      hint = Math.min(hint, content.length);\n      return anchor.toPositionAnchor({ hint });\n    }\n    return anchor.toPositionAnchor();\n  };\n\n  const next = () => findInPages(rest, quoteSelector, positionHint);\n\n  const cacheAndFinish = anchor => {\n    if (positionHint) {\n      if (!quotePositionCache[quoteSelector.exact]) {\n        quotePositionCache[quoteSelector.exact] = {};\n      }\n      quotePositionCache[quoteSelector.exact][positionHint.start] = {\n        pageIndex,\n        anchor,\n      };\n    }\n    return anchorByPosition(pageIndex, anchor.start, anchor.end);\n  };\n\n  // First, get the text offset and other details of the current page.\n  return (\n    Promise.all([content, offset])\n      // Attempt to locate the quote in the current page.\n      .then(attempt)\n      // If the quote is located, find the DOM range and return it.\n      .then(cacheAndFinish)\n      // If the quote was not found, try the next page.\n      .catch(next)\n  );\n}\n\n/**\n * Return a list of page indexes to search for a quote in priority order.\n *\n * When a position anchor is available, quote search can be optimized by\n * searching pages nearest the expected position first.\n *\n * @param {number} position - Text offset from start of document\n * @return {Promise<number[]>}\n */\nfunction prioritizePages(position) {\n  const pageCount = getPdfViewer().pagesCount;\n  const pageIndices = Array(pageCount)\n    .fill(0)\n    .map((_, i) => i);\n\n  if (!position) {\n    return Promise.resolve(pageIndices);\n  }\n\n  /**\n   * Sort page indexes by offset from `pageIndex`.\n   *\n   * @param {number} pageIndex\n   */\n  function sortPages(pageIndex) {\n    const left = pageIndices.slice(0, pageIndex);\n    const right = pageIndices.slice(pageIndex);\n    const result = [];\n    while (left.length > 0 || right.length > 0) {\n      if (right.length) {\n        result.push(/** @type {number} */ (right.shift()));\n      }\n      if (left.length) {\n        result.push(/** @type {number} */ (left.pop()));\n      }\n    }\n    return result;\n  }\n\n  return findPage(position).then(({ index }) => sortPages(index));\n}\n\n/**\n * Anchor a set of selectors to a DOM Range.\n *\n * @param {HTMLElement} root\n * @param {Selector[]} selectors - Selector objects to anchor\n * @return {Promise<Range>}\n */\nexport function anchor(root, selectors) {\n  const position = /** @type {TextPositionSelector|undefined} */ (selectors.find(\n    s => s.type === 'TextPositionSelector'\n  ));\n  const quote = /** @type {TextQuoteSelector|undefined} */ (selectors.find(\n    s => s.type === 'TextQuoteSelector'\n  ));\n\n  /** @type {Promise<Range>} */\n  let result = Promise.reject('unable to anchor');\n\n  const checkQuote = range => {\n    if (quote && quote.exact !== range.toString()) {\n      throw new Error('quote mismatch');\n    }\n    return range;\n  };\n\n  if (position) {\n    result = result.catch(() => {\n      return findPage(position.start).then(({ index, offset, textContent }) => {\n        const start = position.start - offset;\n        const end = position.end - offset;\n        const length = end - start;\n\n        checkQuote(textContent.substr(start, length));\n\n        return anchorByPosition(index, start, end);\n      });\n    });\n  }\n\n  if (quote) {\n    result = result.catch(() => {\n      if (\n        position &&\n        quotePositionCache[quote.exact] &&\n        quotePositionCache[quote.exact][position.start]\n      ) {\n        const { pageIndex, anchor } = quotePositionCache[quote.exact][\n          position.start\n        ];\n        return anchorByPosition(pageIndex, anchor.start, anchor.end);\n      }\n\n      return prioritizePages(position?.start ?? 0).then(pageIndices => {\n        return findInPages(pageIndices, quote, position);\n      });\n    });\n  }\n\n  return result;\n}\n\n/**\n * Convert a DOM Range object into a set of selectors.\n *\n * Converts a DOM `Range` object into a `[position, quote]` tuple of selectors\n * which can be saved with an annotation and later passed to `anchor` to\n * convert the selectors back to a `Range`.\n *\n * @param {HTMLElement} root - The root element\n * @param {Range} range\n * @return {Promise<Selector[]>}\n */\nexport async function describe(root, range) {\n  // \"Shrink\" the range so that the start and endpoints are at offsets within\n  // text nodes rather than any containing nodes.\n  try {\n    range = TextRange.fromRange(range).toRange();\n  } catch {\n    throw new Error('Selection does not contain text');\n  }\n\n  const startTextLayer = getNodeTextLayer(range.startContainer);\n  const endTextLayer = getNodeTextLayer(range.endContainer);\n\n  if (!startTextLayer || !endTextLayer) {\n    throw new Error('Selection is outside page text');\n  }\n\n  if (startTextLayer !== endTextLayer) {\n    throw new Error('Selecting across page breaks is not supported');\n  }\n\n  const startPos = TextPosition.fromPoint(\n    range.startContainer,\n    range.startOffset\n  ).relativeTo(startTextLayer);\n\n  const endPos = TextPosition.fromPoint(\n    range.endContainer,\n    range.endOffset\n  ).relativeTo(endTextLayer);\n\n  const startPageIndex = getSiblingIndex(\n    /** @type {Node} */ (startTextLayer.parentNode)\n  );\n  const pageOffset = await getPageOffset(startPageIndex);\n\n  /** @type {TextPositionSelector} */\n  const position = {\n    type: 'TextPositionSelector',\n    start: pageOffset + startPos.offset,\n    end: pageOffset + endPos.offset,\n  };\n\n  const quote = TextQuoteAnchor.fromRange(root, range).toSelector();\n\n  return [position, quote];\n}\n\n/**\n * Clear this module's internal caches.\n *\n * This exists mainly as a helper for use in tests.\n */\nexport function purgeCache() {\n  pageTextCache = {};\n  quotePositionCache = {};\n}\n",
    "import { xpathFromNode, nodeFromXPath } from './xpath';\nimport {\n  getFirstTextNodeNotBefore,\n  getLastTextNodeUpTo,\n  getTextNodes,\n} from './xpath-util';\n\n/**\n * Return ancestors of `node`.\n *\n * @param {Node} node\n */\nfunction parents(node) {\n  const parents = [];\n  while (node.parentElement) {\n    parents.push(node.parentElement);\n    node = node.parentElement;\n  }\n  return parents;\n}\n\n/**\n * Creates a wrapper around a range object obtained from a DOMSelection.\n */\nexport class BrowserRange {\n  /**\n   * Creates an instance of BrowserRange.\n   *\n   * object - A range object obtained via DOMSelection#getRangeAt().\n   *\n   * Examples\n   *\n   *   selection = window.getSelection()\n   *   range = new Range.BrowserRange(selection.getRangeAt(0))\n   *\n   * Returns an instance of BrowserRange.\n   */\n  constructor(obj) {\n    this.commonAncestorContainer = obj.commonAncestorContainer;\n    this.startContainer = obj.startContainer;\n    this.startOffset = obj.startOffset;\n    this.endContainer = obj.endContainer;\n    this.endOffset = obj.endOffset;\n    this.tainted = false;\n  }\n\n  /**\n   * normalize works around the fact that browsers don't generate\n   * ranges/selections in a consistent manner. Some (Safari) will create\n   * ranges that have (say) a textNode startContainer and elementNode\n   * endContainer. Others (Firefox) seem to only ever generate\n   * textNode/textNode or elementNode/elementNode pairs.\n   *\n   * Returns an instance of NormalizedRange\n   */\n  normalize() {\n    if (this.tainted) {\n      throw new Error('You may only call normalize() once on a BrowserRange!');\n    } else {\n      this.tainted = true;\n    }\n    const range = {};\n\n    // Look at the start\n    if (this.startContainer.nodeType === Node.ELEMENT_NODE) {\n      // We are dealing with element nodes\n      if (this.startOffset < this.startContainer.childNodes.length) {\n        range.start = getFirstTextNodeNotBefore(\n          this.startContainer.childNodes[this.startOffset]\n        );\n      } else {\n        range.start = getFirstTextNodeNotBefore(this.startContainer);\n      }\n      range.startOffset = 0;\n    } else {\n      // We are dealing with simple text nodes\n      range.start = this.startContainer;\n      range.startOffset = this.startOffset;\n    }\n\n    // Look at the end\n    if (this.endContainer.nodeType === Node.ELEMENT_NODE) {\n      // Get specified node.\n      let node = this.endContainer.childNodes[this.endOffset];\n      // Does that node exist?\n      if (node) {\n        // Look for a text node either at the immediate beginning of node\n        let n = node;\n        while (n && n.nodeType !== Node.TEXT_NODE) {\n          n = n.firstChild;\n        }\n        // Did we find a text node at the start of this element?\n        if (n) {\n          range.end = n;\n          range.endOffset = 0;\n        }\n      }\n\n      if (!range.end) {\n        // We need to find a text node in the previous sibling of the node at the\n        // given offset, if one exists, or in the previous sibling of its container.\n        if (this.endOffset) {\n          node = this.endContainer.childNodes[this.endOffset - 1];\n        } else {\n          node = this.endContainer.previousSibling;\n        }\n        range.end = getLastTextNodeUpTo(node);\n        range.endOffset = range.end.nodeValue.length;\n      }\n    } else {\n      // We are dealing with simple text nodes\n      range.end = this.endContainer;\n      range.endOffset = this.endOffset;\n    }\n\n    // We have collected the initial data.\n    // Now let's start to slice & dice the text elements!\n    const normalRange = {};\n\n    if (range.startOffset > 0) {\n      // Do we really have to cut?\n      if (\n        !range.start.nextSibling ||\n        range.start.nodeValue.length > range.startOffset\n      ) {\n        // Yes. Cut.\n        normalRange.start = range.start.splitText(range.startOffset);\n      } else {\n        // Avoid splitting off zero-length pieces.\n        normalRange.start = getFirstTextNodeNotBefore(range.start.nextSibling);\n      }\n    } else {\n      normalRange.start = range.start;\n    }\n\n    // Is the whole selection inside one text element?\n    if (range.start === range.end) {\n      if (\n        normalRange.start.nodeValue.length >\n        range.endOffset - range.startOffset\n      ) {\n        normalRange.start.splitText(range.endOffset - range.startOffset);\n      }\n      normalRange.end = normalRange.start;\n    } else {\n      // No, the end of the selection is in a separate text element\n      // does the end need to be cut?\n      if (range.end.nodeValue.length > range.endOffset) {\n        range.end.splitText(range.endOffset);\n      }\n      normalRange.end = range.end;\n    }\n\n    // Make sure the common ancestor is an element node.\n    normalRange.commonAncestor = this.commonAncestorContainer;\n    while (normalRange.commonAncestor.nodeType !== Node.ELEMENT_NODE) {\n      normalRange.commonAncestor = normalRange.commonAncestor.parentNode;\n    }\n\n    // Circular dependency. Remove this once *Range classes are refactored\n    // eslint-disable-next-line no-use-before-define\n    return new NormalizedRange(normalRange);\n  }\n\n  /**\n   * Creates a range suitable for storage.\n   *\n   * root           - A root Element from which to anchor the serialization.\n   *\n   * Returns an instance of SerializedRange.\n   */\n  serialize(root) {\n    return this.normalize().serialize(root);\n  }\n}\n\n/**\n * A normalized range is most commonly used throughout the annotator.\n * its the result of a deserialized SerializedRange or a BrowserRange without\n * browser inconsistencies.\n */\nexport class NormalizedRange {\n  /**\n   * Creates an instance of a NormalizedRange.\n   *\n   * This is usually created by calling the .normalize() method on one of the\n   * other Range classes rather than manually.\n   *\n   * obj - An Object literal. Should have the following properties.\n   *       commonAncestor: A Element that encompasses both the start and end nodes\n   *       start:          The first TextNode in the range.\n   *       end             The last TextNode in the range.\n   *\n   * Returns an instance of NormalizedRange.\n   */\n  constructor(obj) {\n    this.commonAncestor = obj.commonAncestor;\n    this.start = obj.start;\n    this.end = obj.end;\n  }\n\n  /**\n   * For API consistency.\n   *\n   * Returns itself.\n   */\n  normalize() {\n    return this;\n  }\n\n  /**\n   * Limits the nodes within the NormalizedRange to those contained\n   * withing the bounds parameter. It returns an updated range with all\n   * properties updated. NOTE: Method returns null if all nodes fall outside\n   * of the bounds.\n   *\n   * bounds - An Element to limit the range to.\n   *\n   * Returns updated self or null.\n   */\n  limit(bounds) {\n    const nodes = this.textNodes().filter(node =>\n      bounds.contains(node.parentNode)\n    );\n    if (!nodes.length) {\n      return null;\n    }\n\n    this.start = nodes[0];\n    this.end = nodes[nodes.length - 1];\n\n    const startParents = parents(this.start);\n\n    for (let parent of parents(this.end)) {\n      if (startParents.indexOf(parent) !== -1) {\n        this.commonAncestor = parent;\n        break;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Convert this range into an object consisting of two pairs of (xpath,\n   * character offset), which can be easily stored in a database.\n   *\n   * root -           The root Element relative to which XPaths should be calculated\n   *\n   * Returns an instance of SerializedRange.\n   */\n  serialize(root) {\n    const serialization = (node, isEnd) => {\n      const origParent = node.parentElement;\n      const xpath = xpathFromNode(origParent, root ?? document);\n      const textNodes = getTextNodes(origParent);\n      // Calculate real offset as the combined length of all the\n      // preceding textNode siblings. We include the length of the\n      // node if it's the end node.\n      const nodes = textNodes.slice(0, textNodes.indexOf(node));\n      let offset = 0;\n      for (let n of nodes) {\n        offset += n.data.length;\n      }\n\n      if (isEnd) {\n        return [xpath, offset + node.nodeValue.length];\n      } else {\n        return [xpath, offset];\n      }\n    };\n\n    const start = serialization(this.start);\n    const end = serialization(this.end, true);\n\n    // Circular dependency. Remove this once *Range classes are refactored\n    // eslint-disable-next-line no-use-before-define\n    return new SerializedRange({\n      // XPath strings\n      start: start[0],\n      end: end[0],\n      // Character offsets (integer)\n      startOffset: start[1],\n      endOffset: end[1],\n    });\n  }\n\n  /**\n   * Creates a concatenated String of the contents of all the text nodes\n   * within the range.\n   *\n   * Returns a String.\n   */\n  text() {\n    return this.textNodes()\n      .map(node => node.nodeValue)\n      .join('');\n  }\n\n  /**\n   * Fetches only the text nodes within the range.\n   *\n   * Returns an Array of TextNode instances.\n   */\n  textNodes() {\n    const textNodes = getTextNodes(this.commonAncestor);\n    const start = textNodes.indexOf(this.start);\n    const end = textNodes.indexOf(this.end);\n    // Return the textNodes that fall between the start and end indexes.\n    return textNodes.slice(start, +end + 1 || undefined);\n  }\n\n  /**\n   * Converts the Normalized range to a native browser range.\n   *\n   * See: https://developer.mozilla.org/en/DOM/range\n   *\n   * Examples\n   *\n   *   selection = window.getSelection()\n   *   selection.removeAllRanges()\n   *   selection.addRange(normedRange.toRange())\n   *\n   * Returns a Range object.\n   */\n  toRange() {\n    const range = document.createRange();\n    range.setStartBefore(this.start);\n    range.setEndAfter(this.end);\n    return range;\n  }\n}\n\n/**\n * A range suitable for storing in local storage or serializing to JSON.\n */\nexport class SerializedRange {\n  /**\n   * Creates a SerializedRange\n   *\n   * obj - The stored object. It should have the following properties.\n   *       start:       An xpath to the Element containing the first TextNode\n   *                    relative to the root Element.\n   *       startOffset: The offset to the start of the selection from obj.start.\n   *       end:         An xpath to the Element containing the last TextNode\n   *                    relative to the root Element.\n   *       startOffset: The offset to the end of the selection from obj.end.\n   *\n   * Returns an instance of SerializedRange\n   */\n  constructor(obj) {\n    this.start = obj.start;\n    this.startOffset = obj.startOffset;\n    this.end = obj.end;\n    this.endOffset = obj.endOffset;\n  }\n\n  /**\n   * Creates a NormalizedRange.\n   *\n   * root - The root Element from which the XPaths were generated.\n   *\n   * Returns a NormalizedRange instance.\n   */\n  normalize(root) {\n    const range = {};\n\n    for (let p of ['start', 'end']) {\n      let node;\n      try {\n        node = nodeFromXPath(this[p], root);\n        if (!node) {\n          throw new Error('Node not found');\n        }\n      } catch (e) {\n        throw new RangeError(`Error while finding ${p} node: ${this[p]}: ` + e);\n      }\n      // Unfortunately, we *can't* guarantee only one textNode per\n      // elementNode, so we have to walk along the element's textNodes until\n      // the combined length of the textNodes to that point exceeds or\n      // matches the value of the offset.\n      let length = 0;\n      let targetOffset = this[p + 'Offset'];\n\n      // Range excludes its endpoint because it describes the boundary position.\n      // Target the string index of the last character inside the range.\n      if (p === 'end') {\n        targetOffset--;\n      }\n\n      for (let tn of getTextNodes(node)) {\n        if (length + tn.data.length > targetOffset) {\n          range[p + 'Container'] = tn;\n          range[p + 'Offset'] = this[p + 'Offset'] - length;\n          break;\n        } else {\n          length += tn.data.length;\n        }\n      }\n\n      // If we fall off the end of the for loop without having set\n      // 'startOffset'/'endOffset', the element has shorter content than when\n      // we annotated, so throw an error:\n      if (range[p + 'Offset'] === undefined) {\n        throw new RangeError(\n          `Couldn't find offset ${this[p + 'Offset']} in element ${this[p]}`\n        );\n      }\n    }\n\n    for (let parent of parents(range.startContainer)) {\n      if (parent.contains(range.endContainer)) {\n        range.commonAncestorContainer = parent;\n        break;\n      }\n    }\n\n    return new BrowserRange(range).normalize();\n  }\n\n  /**\n   * Creates a range suitable for storage.\n   *\n   * root           - A root Element from which to anchor the serialization.\n   *\n   * Returns an instance of SerializedRange.\n   */\n  serialize(root) {\n    return this.normalize(root).serialize(root);\n  }\n\n  // Returns the range as an Object literal.\n  toObject() {\n    return {\n      start: this.start,\n      startOffset: this.startOffset,\n      end: this.end,\n      endOffset: this.endOffset,\n    };\n  }\n}\n\n/**\n * Determines the type of Range of the provided object and returns\n * a suitable Range instance.\n *\n * r - A range Object.\n *\n * Examples\n *\n *   selection = window.getSelection()\n *   Range.sniff(selection.getRangeAt(0))\n *   # => Returns a BrowserRange instance.\n *\n * Returns a Range object or false.\n */\nexport function sniff(range) {\n  if (range.commonAncestorContainer !== undefined) {\n    return new BrowserRange(range);\n  } else if (typeof range.start === 'string') {\n    return new SerializedRange(range);\n  } else if (range.start && typeof range.start === 'object') {\n    return new NormalizedRange(range);\n  } else {\n    throw new Error('Could not sniff range type');\n  }\n}\n",
    "/**\n * Return the combined length of text nodes contained in `node`.\n *\n * @param {Node} node\n */\nfunction nodeTextLength(node) {\n  switch (node.nodeType) {\n    case Node.ELEMENT_NODE:\n    case Node.TEXT_NODE:\n      // nb. `textContent` excludes text in comments and processing instructions\n      // when called on a parent element, so we don't need to subtract that here.\n\n      return /** @type {string} */ (node.textContent).length;\n    default:\n      return 0;\n  }\n}\n\n/**\n * Return the total length of the text of all previous siblings of `node`.\n *\n * @param {Node} node\n */\nfunction previousSiblingsTextLength(node) {\n  let sibling = node.previousSibling;\n  let length = 0;\n  while (sibling) {\n    length += nodeTextLength(sibling);\n    sibling = sibling.previousSibling;\n  }\n  return length;\n}\n\n/**\n * Resolve one or more character offsets within an element to (text node, position)\n * pairs.\n *\n * @param {Element} element\n * @param {number[]} offsets - Offsets, which must be sorted in ascending order\n * @return {{ node: Text, offset: number }[]}\n */\nfunction resolveOffsets(element, ...offsets) {\n  let nextOffset = offsets.shift();\n  const nodeIter = /** @type {Document} */ (element.ownerDocument).createNodeIterator(\n    element,\n    NodeFilter.SHOW_TEXT\n  );\n  const results = [];\n\n  let currentNode = nodeIter.nextNode();\n  let textNode;\n  let length = 0;\n\n  // Find the text node containing the `nextOffset`th character from the start\n  // of `element`.\n  while (nextOffset !== undefined && currentNode) {\n    textNode = /** @type {Text} */ (currentNode);\n    if (length + textNode.data.length > nextOffset) {\n      results.push({ node: textNode, offset: nextOffset - length });\n      nextOffset = offsets.shift();\n    } else {\n      currentNode = nodeIter.nextNode();\n      length += textNode.data.length;\n    }\n  }\n\n  // Boundary case.\n  while (nextOffset !== undefined && textNode && length === nextOffset) {\n    results.push({ node: textNode, offset: textNode.data.length });\n    nextOffset = offsets.shift();\n  }\n\n  if (nextOffset !== undefined) {\n    throw new RangeError('Offset exceeds text length');\n  }\n\n  return results;\n}\n\nexport let RESOLVE_FORWARDS = 1;\nexport let RESOLVE_BACKWARDS = 2;\n\n/**\n * Represents an offset within the text content of an element.\n *\n * This position can be resolved to a specific descendant node in the current\n * DOM subtree of the element using the `resolve` method.\n */\nexport class TextPosition {\n  /**\n   * Construct a `TextPosition` that refers to the text position `offset` within\n   * the text content of `element`.\n   *\n   * @param {Element} element\n   * @param {number} offset\n   */\n  constructor(element, offset) {\n    if (offset < 0) {\n      throw new Error('Offset is invalid');\n    }\n\n    /** Element that `offset` is relative to. */\n    this.element = element;\n\n    /** Character offset from the start of the element's `textContent`. */\n    this.offset = offset;\n  }\n\n  /**\n   * Return a copy of this position with offset relative to a given ancestor\n   * element.\n   *\n   * @param {Element} parent - Ancestor of `this.element`\n   * @return {TextPosition}\n   */\n  relativeTo(parent) {\n    if (!parent.contains(this.element)) {\n      throw new Error('Parent is not an ancestor of current element');\n    }\n\n    let el = this.element;\n    let offset = this.offset;\n    while (el !== parent) {\n      offset += previousSiblingsTextLength(el);\n      el = /** @type {Element} */ (el.parentElement);\n    }\n\n    return new TextPosition(el, offset);\n  }\n\n  /**\n   * Resolve the position to a specific text node and offset within that node.\n   *\n   * Throws if `this.offset` exceeds the length of the element's text. In the\n   * case where the element has no text and `this.offset` is 0, the `direction`\n   * option determines what happens.\n   *\n   * Offsets at the boundary between two nodes are resolved to the start of the\n   * node that begins at the boundary.\n   *\n   * @param {Object} [options]\n   *   @param {RESOLVE_FORWARDS|RESOLVE_BACKWARDS} [options.direction] -\n   *     Specifies in which direction to search for the nearest text node if\n   *     `this.offset` is `0` and `this.element` has no text. If not specified\n   *     an error is thrown.\n   * @return {{ node: Text, offset: number }}\n   * @throws {RangeError}\n   */\n  resolve(options = {}) {\n    try {\n      return resolveOffsets(this.element, this.offset)[0];\n    } catch (err) {\n      if (this.offset === 0 && options.direction !== undefined) {\n        const tw = document.createTreeWalker(\n          this.element.getRootNode(),\n          NodeFilter.SHOW_TEXT\n        );\n        tw.currentNode = this.element;\n        const forwards = options.direction === RESOLVE_FORWARDS;\n        const text = /** @type {Text|null} */ (forwards\n          ? tw.nextNode()\n          : tw.previousNode());\n        if (!text) {\n          throw err;\n        }\n        return { node: text, offset: forwards ? 0 : text.data.length };\n      } else {\n        throw err;\n      }\n    }\n  }\n\n  /**\n   * Construct a `TextPosition` representing the range start or end point (node, offset).\n   *\n   * @param {Node} node\n   * @param {number} offset\n   * @return {TextPosition}\n   */\n  static fromPoint(node, offset) {\n    switch (node.nodeType) {\n      case Node.TEXT_NODE: {\n        if (offset < 0 || offset > /** @type {Text} */ (node).data.length) {\n          throw new Error('Text node offset is out of range');\n        }\n\n        if (!node.parentElement) {\n          throw new Error('Text node has no parent');\n        }\n\n        // Get the offset from the start of the parent element.\n        const textOffset = previousSiblingsTextLength(node) + offset;\n\n        return new TextPosition(node.parentElement, textOffset);\n      }\n      case Node.ELEMENT_NODE: {\n        if (offset < 0 || offset > node.childNodes.length) {\n          throw new Error('Child node offset is out of range');\n        }\n\n        // Get the text length before the `offset`th child of element.\n        let textOffset = 0;\n        for (let i = 0; i < offset; i++) {\n          textOffset += nodeTextLength(node.childNodes[i]);\n        }\n\n        return new TextPosition(/** @type {Element} */ (node), textOffset);\n      }\n      default:\n        throw new Error('Point is not in an element or text node');\n    }\n  }\n}\n\n/**\n * Represents a region of a document as a (start, end) pair of `TextPosition` points.\n *\n * Representing a range in this way allows for changes in the DOM content of the\n * range which don't affect its text content, without affecting the text content\n * of the range itself.\n */\nexport class TextRange {\n  /**\n   * Construct an immutable `TextRange` from a `start` and `end` point.\n   *\n   * @param {TextPosition} start\n   * @param {TextPosition} end\n   */\n  constructor(start, end) {\n    this.start = start;\n    this.end = end;\n  }\n\n  /**\n   * Return a copy of this range with start and end positions relative to a\n   * given ancestor. See `TextPosition.relativeTo`.\n   *\n   * @param {Element} element\n   */\n  relativeTo(element) {\n    return new TextRange(\n      this.start.relativeTo(element),\n      this.end.relativeTo(element)\n    );\n  }\n\n  /**\n   * Resolve the `TextRange` to a DOM range.\n   *\n   * The resulting DOM Range will always start and end in a `Text` node.\n   * Hence `TextRange.fromRange(range).toRange()` can be used to \"shrink\" a\n   * range to the text it contains.\n   *\n   * May throw if the `start` or `end` positions cannot be resolved to a range.\n   *\n   * @return {Range}\n   */\n  toRange() {\n    let start;\n    let end;\n\n    if (\n      this.start.element === this.end.element &&\n      this.start.offset <= this.end.offset\n    ) {\n      // Fast path for start and end points in same element.\n      [start, end] = resolveOffsets(\n        this.start.element,\n        this.start.offset,\n        this.end.offset\n      );\n    } else {\n      start = this.start.resolve({ direction: RESOLVE_FORWARDS });\n      end = this.end.resolve({ direction: RESOLVE_BACKWARDS });\n    }\n\n    const range = new Range();\n    range.setStart(start.node, start.offset);\n    range.setEnd(end.node, end.offset);\n    return range;\n  }\n\n  /**\n   * Convert an existing DOM `Range` to a `TextRange`\n   *\n   * @param {Range} range\n   * @return {TextRange}\n   */\n  static fromRange(range) {\n    const start = TextPosition.fromPoint(\n      range.startContainer,\n      range.startOffset\n    );\n    const end = TextPosition.fromPoint(range.endContainer, range.endOffset);\n    return new TextRange(start, end);\n  }\n\n  /**\n   * Return a `TextRange` from the `start`th to `end`th characters in `root`.\n   *\n   * @param {Element} root\n   * @param {number} start\n   * @param {number} end\n   */\n  static fromOffsets(root, start, end) {\n    return new TextRange(\n      new TextPosition(root, start),\n      new TextPosition(root, end)\n    );\n  }\n}\n",
    "/**\n * This module exports a set of classes for converting between DOM `Range`\n * objects and different types of selectors. It is mostly a thin wrapper around a\n * set of anchoring libraries. It serves two main purposes:\n *\n *  1. Providing a consistent interface across different types of anchors.\n *  2. Insulating the rest of the code from API changes in the underlying anchoring\n *     libraries.\n */\n\nimport { SerializedRange, sniff } from './range';\nimport { TextRange } from './text-range';\nimport { matchQuote } from './match-quote';\n\n/**\n * @typedef {import(\"./range\").BrowserRange} BrowserRange}\n * @typedef {import(\"./range\").NormalizedRange} NormalizedRange}\n * @typedef {Range|BrowserRange|NormalizedRange|SerializedRange} AnyRangeType\n *\n * @typedef {import('../../types/api').RangeSelector} RangeSelector\n * @typedef {import('../../types/api').TextPositionSelector} TextPositionSelector\n * @typedef {import('../../types/api').TextQuoteSelector} TextQuoteSelector\n *\n * @typedef TextContentNode\n * @prop {string} textContent\n */\n\n/**\n * Converts between `RangeSelector` selectors and `Range` objects.\n */\nexport class RangeAnchor {\n  /**\n   * @param {Node} root - A root element from which to anchor.\n   * @param {AnyRangeType} range -  A range describing the anchor.\n   */\n  constructor(root, range) {\n    this.root = root;\n    this.range = sniff(range).normalize(this.root);\n  }\n\n  /**\n   * @param {Node} root -  A root element from which to anchor.\n   * @param {AnyRangeType} range -  A range describing the anchor.\n   */\n  static fromRange(root, range) {\n    return new RangeAnchor(root, range);\n  }\n\n  /**\n   * Create an anchor from a serialized `RangeSelector` selector.\n   *\n   * @param {Node} root -  A root element from which to anchor.\n   * @param {RangeSelector} selector\n   */\n  static fromSelector(root, selector) {\n    const data = {\n      start: selector.startContainer,\n      startOffset: selector.startOffset,\n      end: selector.endContainer,\n      endOffset: selector.endOffset,\n    };\n    const range = new SerializedRange(data);\n    return new RangeAnchor(root, range);\n  }\n\n  toRange() {\n    return this.range.toRange();\n  }\n\n  /**\n   * @return {RangeSelector}\n   */\n  toSelector() {\n    const range = this.range.serialize(this.root);\n    return {\n      type: 'RangeSelector',\n      startContainer: range.start,\n      startOffset: range.startOffset,\n      endContainer: range.end,\n      endOffset: range.endOffset,\n    };\n  }\n}\n\n/**\n * Converts between `TextPositionSelector` selectors and `Range` objects.\n */\nexport class TextPositionAnchor {\n  /**\n   * @param {Element} root\n   * @param {number} start\n   * @param {number} end\n   */\n  constructor(root, start, end) {\n    this.root = root;\n    this.start = start;\n    this.end = end;\n  }\n\n  /**\n   * @param {Element} root\n   * @param {Range} range\n   */\n  static fromRange(root, range) {\n    const textRange = TextRange.fromRange(range).relativeTo(root);\n    return new TextPositionAnchor(\n      root,\n      textRange.start.offset,\n      textRange.end.offset\n    );\n  }\n  /**\n   * @param {Element} root\n   * @param {TextPositionSelector} selector\n   */\n  static fromSelector(root, selector) {\n    return new TextPositionAnchor(root, selector.start, selector.end);\n  }\n\n  /**\n   * @return {TextPositionSelector}\n   */\n  toSelector() {\n    return {\n      type: 'TextPositionSelector',\n      start: this.start,\n      end: this.end,\n    };\n  }\n\n  toRange() {\n    return TextRange.fromOffsets(this.root, this.start, this.end).toRange();\n  }\n}\n\n/**\n * @typedef QuoteMatchOptions\n * @prop {number} [hint] - Expected position of match in text. See `matchQuote`.\n */\n\n/**\n * Converts between `TextQuoteSelector` selectors and `Range` objects.\n */\nexport class TextQuoteAnchor {\n  /**\n   * @param {Element} root - A root element from which to anchor.\n   * @param {string} exact\n   * @param {Object} context\n   *   @param {string} [context.prefix]\n   *   @param {string} [context.suffix]\n   */\n  constructor(root, exact, context = {}) {\n    this.root = root;\n    this.exact = exact;\n    this.context = context;\n  }\n\n  /**\n   * Create a `TextQuoteAnchor` from a range.\n   *\n   * Will throw if `range` does not contain any text nodes.\n   *\n   * @param {Element} root\n   * @param {Range} range\n   */\n  static fromRange(root, range) {\n    const text = /** @type {string} */ (root.textContent);\n    const textRange = TextRange.fromRange(range).relativeTo(root);\n\n    const start = textRange.start.offset;\n    const end = textRange.end.offset;\n\n    // Number of characters around the quote to capture as context. We currently\n    // always use a fixed amount, but it would be better if this code was aware\n    // of logical boundaries in the document (paragraph, article etc.) to avoid\n    // capturing text unrelated to the quote.\n    //\n    // In regular prose the ideal content would often be the surrounding sentence.\n    // This is a natural unit of meaning which enables displaying quotes in\n    // context even when the document is not available. We could use `Intl.Segmenter`\n    // for this when available.\n    const contextLen = 32;\n\n    return new TextQuoteAnchor(root, text.slice(start, end), {\n      prefix: text.slice(Math.max(0, start - contextLen), start),\n      suffix: text.slice(end, Math.min(text.length, end + contextLen)),\n    });\n  }\n\n  /**\n   * @param {Element} root\n   * @param {TextQuoteSelector} selector\n   */\n  static fromSelector(root, selector) {\n    const { prefix, suffix } = selector;\n    return new TextQuoteAnchor(root, selector.exact, { prefix, suffix });\n  }\n\n  /**\n   * @return {TextQuoteSelector}\n   */\n  toSelector() {\n    return {\n      type: 'TextQuoteSelector',\n      exact: this.exact,\n      prefix: this.context.prefix,\n      suffix: this.context.suffix,\n    };\n  }\n\n  /**\n   * @param {QuoteMatchOptions} [options]\n   */\n  toRange(options = {}) {\n    return this.toPositionAnchor(options).toRange();\n  }\n\n  /**\n   * @param {QuoteMatchOptions} [options]\n   */\n  toPositionAnchor(options = {}) {\n    const text = /** @type {string} */ (this.root.textContent);\n    const match = matchQuote(text, this.exact, {\n      ...this.context,\n      hint: options.hint,\n    });\n    if (!match) {\n      throw new Error('Quote not found');\n    }\n    return new TextPositionAnchor(this.root, match.start, match.end);\n  }\n}\n",
    "/**\n * Get the node name for use in generating an xpath expression.\n *\n * @param {Node} node\n */\nfunction getNodeName(node) {\n  const nodeName = node.nodeName.toLowerCase();\n  let result = nodeName;\n  if (nodeName === '#text') {\n    result = 'text()';\n  }\n  return result;\n}\n\n/**\n * Get the index of the node as it appears in its parent's child list\n *\n * @param {Node} node\n */\nfunction getNodePosition(node) {\n  let pos = 0;\n  /** @type {Node|null} */\n  let tmp = node;\n  while (tmp) {\n    if (tmp.nodeName === node.nodeName) {\n      pos += 1;\n    }\n    tmp = tmp.previousSibling;\n  }\n  return pos;\n}\n\nfunction getPathSegment(node) {\n  const name = getNodeName(node);\n  const pos = getNodePosition(node);\n  return `${name}[${pos}]`;\n}\n\n/**\n * A simple XPath generator which can generate XPaths of the form\n * /tag[index]/tag[index].\n *\n * @param {Node} node - The node to generate a path to\n * @param {Node} root - Root node to which the returned path is relative\n */\nexport function xpathFromNode(node, root) {\n  let xpath = '';\n\n  /** @type {Node|null} */\n  let elem = node;\n  while (elem !== root) {\n    if (!elem) {\n      throw new Error('Node is not a descendant of root');\n    }\n    xpath = getPathSegment(elem) + '/' + xpath;\n    elem = elem.parentNode;\n  }\n  xpath = '/' + xpath;\n  xpath = xpath.replace(/\\/$/, ''); // Remove trailing slash\n\n  return xpath;\n}\n\n/**\n * Return all text node descendants of `parent`.\n *\n * @param {Node} parent\n * @return {Text[]}\n */\nexport function getTextNodes(parent) {\n  const nodes = [];\n  for (let node of Array.from(parent.childNodes)) {\n    // We test `nodeType` here rather than using `instanceof` because we have\n    // tests where `node` comes from a different iframe.\n    if (node.nodeType === Node.TEXT_NODE) {\n      nodes.push(/** @type {Text} */ (node));\n    } else if (node.nodeType === Node.ELEMENT_NODE) {\n      nodes.push(...getTextNodes(/** @type {Element} */ (node)));\n    }\n  }\n  return nodes;\n}\n\n/**\n * Determine the last text node inside or before the given node.\n */\nexport function getLastTextNodeUpTo(node) {\n  switch (node.nodeType) {\n    case Node.TEXT_NODE:\n      return node; // We have found our text node.\n    case Node.ELEMENT_NODE:\n      // This is an element, we need to dig in\n      if (node.lastChild) {\n        // Does it have children at all?\n        const result = getLastTextNodeUpTo(node.lastChild);\n        if (result) {\n          return result;\n        }\n      }\n  }\n  // Could not find a text node in current node, go backwards\n  const prev = node.previousSibling;\n  if (prev) {\n    // eslint-disable-next-line no-unused-vars\n    return getLastTextNodeUpTo(prev);\n  } else {\n    return null;\n  }\n}\n\n/**\n * Determine the first text node in or after the given node.\n */\nexport function getFirstTextNodeNotBefore(node) {\n  switch (node.nodeType) {\n    case Node.TEXT_NODE:\n      return node; // We have found our text node.\n    case Node.ELEMENT_NODE:\n      // This is an element, we need to dig in\n      if (node.firstChild) {\n        // Does it have children at all?\n        const result = getFirstTextNodeNotBefore(node.firstChild);\n        if (result) {\n          return result;\n        }\n      }\n  }\n  // Could not find a text node in current node, go forward\n  const next = node.nextSibling;\n  if (next) {\n    // eslint-disable-next-line no-unused-vars\n    return getFirstTextNodeNotBefore(next);\n  } else {\n    return null;\n  }\n}\n",
    "export { xpathFromNode } from './xpath-util';\n\n/**\n * Return the `index`'th immediate child of `element` whose tag name is\n * `nodeName` (case insensitive).\n *\n * @param {Element} element\n * @param {string} nodeName\n * @param {number} index\n */\nfunction nthChildOfType(element, nodeName, index) {\n  nodeName = nodeName.toUpperCase();\n\n  let matchIndex = -1;\n  for (let i = 0; i < element.children.length; i++) {\n    const child = element.children[i];\n    if (child.nodeName.toUpperCase() === nodeName) {\n      ++matchIndex;\n      if (matchIndex === index) {\n        return child;\n      }\n    }\n  }\n\n  return null;\n}\n\n/**\n * Evaluate a _simple XPath_ relative to a `root` element and return the\n * matching element.\n *\n * A _simple XPath_ is a sequence of one or more `/tagName[index]` strings.\n *\n * Unlike `document.evaluate` this function:\n *\n *  - Only supports simple XPaths\n *  - Is not affected by the document's _type_ (HTML or XML/XHTML)\n *  - Ignores element namespaces when matching element names in the XPath against\n *    elements in the DOM tree\n *  - Is case insensitive for all elements, not just HTML elements\n *\n * The matching element is returned or `null` if no such element is found.\n * An error is thrown if `xpath` is not a simple XPath.\n *\n * @param {string} xpath\n * @param {Element} root\n * @return {Element|null}\n */\nfunction evaluateSimpleXPath(xpath, root) {\n  const isSimpleXPath =\n    xpath.match(/^(\\/[A-Za-z0-9-]+(\\[[0-9]+\\])?)+$/) !== null;\n  if (!isSimpleXPath) {\n    throw new Error('Expression is not a simple XPath');\n  }\n\n  const segments = xpath.split('/');\n  let element = root;\n\n  // Remove leading empty segment. The regex above validates that the XPath\n  // has at least two segments, with the first being empty and the others non-empty.\n  segments.shift();\n\n  for (let segment of segments) {\n    let elementName;\n    let elementIndex;\n\n    const separatorPos = segment.indexOf('[');\n    if (separatorPos !== -1) {\n      elementName = segment.slice(0, separatorPos);\n\n      const indexStr = segment.slice(separatorPos + 1, segment.indexOf(']'));\n      elementIndex = parseInt(indexStr) - 1;\n      if (elementIndex < 0) {\n        return null;\n      }\n    } else {\n      elementName = segment;\n      elementIndex = 0;\n    }\n\n    const child = nthChildOfType(element, elementName, elementIndex);\n    if (!child) {\n      return null;\n    }\n\n    element = child;\n  }\n\n  return element;\n}\n\n/**\n * Finds an element node using an XPath relative to `root`\n *\n * Example:\n *   node = nodeFromXPath('/main/article[1]/p[3]', document.body)\n *\n * @param {string} xpath\n * @param {Element} [root]\n * @return {Node|null}\n */\nexport function nodeFromXPath(xpath, root = document.body) {\n  try {\n    return evaluateSimpleXPath(xpath, root);\n  } catch (err) {\n    return document.evaluate(\n      '.' + xpath,\n      root,\n\n      // nb. The `namespaceResolver` and `result` arguments are optional in the spec\n      // but required in Edge Legacy.\n      null /* namespaceResolver */,\n      XPathResult.FIRST_ORDERED_NODE_TYPE,\n      null /* result */\n    ).singleNodeValue;\n  }\n}\n",
    "import events from '../shared/bridge-events';\n\nconst ANNOTATION_COUNT_ATTR = 'data-hypothesis-annotation-count';\n\n/**\n * Update the elements in the container element with the count data attribute\n * with the new annotation count.\n *\n * @param {Element} rootEl - The DOM element which contains the elements that\n * display annotation count.\n */\n\nexport default function annotationCounts(rootEl, crossframe) {\n  crossframe.on(\n    events.PUBLIC_ANNOTATION_COUNT_CHANGED,\n    updateAnnotationCountElems\n  );\n\n  function updateAnnotationCountElems(newCount) {\n    const elems = rootEl.querySelectorAll('[' + ANNOTATION_COUNT_ATTR + ']');\n    Array.from(elems).forEach(function (elem) {\n      elem.textContent = newCount;\n    });\n  }\n}\n",
    "/**\n * @typedef {import('../types/annotator').AnnotationData} AnnotationData\n * @typedef {import('../shared/bridge').default} Bridge\n */\n\n/**\n * Message sent between the sidebar and annotator about an annotation that has\n * changed.\n *\n * @typedef RpcMessage\n * @prop {string} tag\n * @prop {AnnotationData} msg\n */\n\n/**\n * AnnotationSync listens for messages from the sidebar app indicating that\n * annotations have been added or removed and relays them to Guest.\n *\n * It also listens for events from Guest when new annotations are created or\n * annotations successfully anchor and relays these to the sidebar app.\n */\nexport default class AnnotationSync {\n  /**\n   * @param {Bridge} bridge\n   * @param {Object} options\n   *   @param {(event: string, callback: (...args: any[]) => void) => void} options.on -\n   *     Function that registers a listener for an event from the rest of the\n   *     annotator\n   *   @param {(event: string, ...args: any[]) => void} options.emit -\n   *     Function that publishes an event to the rest of the annotator\n   */\n  constructor(bridge, options) {\n    this.bridge = bridge;\n\n    /**\n     * Mapping from annotation tags to annotation objects for annotations which\n     * have been sent to or received from the sidebar.\n     *\n     * @type {{ [tag: string]: AnnotationData }}\n     */\n    this.cache = {};\n\n    this._on = options.on;\n    this._emit = options.emit;\n\n    // Relay events from the sidebar to the rest of the annotator.\n    this.bridge.on('deleteAnnotation', (body, callback) => {\n      const annotation = this._parse(body);\n      delete this.cache[annotation.$tag];\n      this._emit('annotationDeleted', annotation);\n      callback(null, this._format(annotation));\n    });\n\n    this.bridge.on('loadAnnotations', (bodies, callback) => {\n      const annotations = bodies.map(body => this._parse(body));\n      this._emit('annotationsLoaded', annotations);\n      callback(null, annotations);\n    });\n\n    // Relay events from annotator to sidebar.\n    this._on('beforeAnnotationCreated', annotation => {\n      if (annotation.$tag) {\n        return;\n      }\n      this.bridge.call('beforeCreateAnnotation', this._format(annotation));\n    });\n  }\n\n  /**\n   * Relay updated annotations from the annotator to the sidebar.\n   *\n   * This is called for example after annotations are anchored to notify the\n   * sidebar about the current anchoring status.\n   *\n   * @param {AnnotationData[]} annotations\n   */\n  sync(annotations) {\n    this.bridge.call(\n      'sync',\n      annotations.map(ann => this._format(ann))\n    );\n  }\n\n  /**\n   * Assign a non-enumerable \"tag\" to identify annotations exchanged between\n   * the sidebar and annotator and associate the tag with the `annotation` instance\n   * in the local cache.\n   *\n   * @param {AnnotationData} annotation\n   * @param {string} [tag] - The tag to assign\n   * @return {AnnotationData}\n   */\n  _tag(annotation, tag) {\n    if (annotation.$tag) {\n      return annotation;\n    }\n    tag = tag || window.btoa(Math.random().toString());\n    Object.defineProperty(annotation, '$tag', {\n      value: tag,\n    });\n    this.cache[tag] = annotation;\n    return annotation;\n  }\n\n  /**\n   * Copy annotation data from an RPC message into a local copy (in `this.cache`)\n   * and return the local copy.\n   *\n   * @param {RpcMessage} body\n   * @return {AnnotationData}\n   */\n  _parse(body) {\n    const merged = Object.assign(this.cache[body.tag] || {}, body.msg);\n    return this._tag(merged, body.tag);\n  }\n\n  /**\n   * Format an annotation into an RPC message body.\n   *\n   * @param {AnnotationData} annotation\n   * @return {RpcMessage}\n   */\n  _format(annotation) {\n    this._tag(annotation);\n\n    return {\n      tag: annotation.$tag,\n      msg: annotation,\n    };\n  }\n}\n",
    "import classnames from 'classnames';\nimport { createElement } from 'preact';\nimport propTypes from 'prop-types';\n\nimport { useShortcut } from '../../shared/shortcut';\nimport SvgIcon from '../../shared/components/svg-icon';\n\n/**\n * @param {Object} props\n *  @param {number} [props.badgeCount]\n *  @param {string} [props.icon]\n *  @param {string} props.label\n *  @param {() => any} props.onClick\n *  @param {string|null} props.shortcut\n */\nfunction ToolbarButton({ badgeCount, icon, label, onClick, shortcut }) {\n  useShortcut(shortcut, onClick);\n\n  const title = shortcut ? `${label} (${shortcut})` : label;\n\n  return (\n    <button\n      className=\"annotator-adder-button\"\n      onClick={onClick}\n      aria-label={title}\n      title={title}\n    >\n      {icon && <SvgIcon name={icon} className=\"annotator-adder-button__icon\" />}\n      {typeof badgeCount === 'number' && (\n        <span className=\"annotator-adder-button__badge\">{badgeCount}</span>\n      )}\n      <span className=\"annotator-adder-button__label\">{label}</span>\n    </button>\n  );\n}\n\nToolbarButton.propTypes = {\n  badgeCount: propTypes.number,\n  icon: propTypes.string,\n  label: propTypes.string.isRequired,\n  onClick: propTypes.func.isRequired,\n  shortcut: propTypes.string,\n};\n\n/**\n * Union of possible toolbar commands.\n *\n * @typedef {'annotate'|'highlight'|'show'} Command\n */\n\n/**\n * @typedef AdderToolbarProps\n * @prop {'up'|'down'} arrowDirection -\n *   Whether the arrow pointing out of the toolbar towards the selected text\n *   should appear above the toolbar pointing Up or below the toolbar pointing\n *   Down.\n * @prop {boolean} isVisible - Whether to show the toolbar or not.\n * @prop {(c: Command) => any} onCommand - Called when a toolbar button is clicked.\n * @prop {number} [annotationCount] -\n *   Number of annotations associated with the selected text.\n *   If non-zero, a \"Show\" button is displayed to allow the user to see the\n *   annotations that correspond to the selection.\n */\n\n/**\n * The toolbar that is displayed above selected text in the document providing\n * options to create annotations or highlights.\n *\n * @param {AdderToolbarProps} props\n */\nexport default function AdderToolbar({\n  arrowDirection,\n  isVisible,\n  onCommand,\n  annotationCount = 0,\n}) {\n  const handleCommand = (event, command) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    onCommand(command);\n  };\n\n  // Since the selection toolbar is only shown when there is a selection\n  // of static text, we can use a plain key without any modifier as\n  // the shortcut. This avoids conflicts with browser/OS shortcuts.\n  const annotateShortcut = isVisible ? 'a' : null;\n  const highlightShortcut = isVisible ? 'h' : null;\n  const showShortcut = isVisible ? 's' : null;\n\n  // nb. The adder is hidden using the `visibility` property rather than `display`\n  // so that we can compute its size in order to position it before display.\n  return (\n    // @ts-ignore - TS doesn't know about our custom element types.\n    <hypothesis-adder-toolbar\n      class={classnames('annotator-adder', {\n        'annotator-adder--down': arrowDirection === 'up',\n        'annotator-adder--up': arrowDirection === 'down',\n        'is-active': isVisible,\n      })}\n      style={{ visibility: isVisible ? 'visible' : 'hidden' }}\n    >\n      {/* @ts-ignore */}\n      <hypothesis-adder-actions className=\"annotator-adder-actions\">\n        <ToolbarButton\n          icon=\"annotate\"\n          onClick={e => handleCommand(e, 'annotate')}\n          label=\"Annotate\"\n          shortcut={annotateShortcut}\n        />\n        <ToolbarButton\n          icon=\"highlight\"\n          onClick={e => handleCommand(e, 'highlight')}\n          label=\"Highlight\"\n          shortcut={highlightShortcut}\n        />\n        {annotationCount > 0 && (\n          <div className=\"annotator-adder-actions__separator\" />\n        )}\n        {annotationCount > 0 && (\n          <ToolbarButton\n            badgeCount={annotationCount}\n            onClick={e => handleCommand(e, 'show')}\n            label=\"Show\"\n            shortcut={showShortcut}\n          />\n        )}\n        {/* @ts-ignore */}\n      </hypothesis-adder-actions>\n      <SvgIcon\n        name=\"pointer\"\n        inline={true}\n        className={classnames('annotator-adder-arrow', {\n          'annotator-adder-arrow--down': arrowDirection === 'down',\n          'annotator-adder-arrow--up': arrowDirection === 'up',\n        })}\n      />\n      {/* @ts-ignore */}\n    </hypothesis-adder-toolbar>\n  );\n}\n\nAdderToolbar.propTypes = {\n  arrowDirection: propTypes.oneOf(['up', 'down']).isRequired,\n  isVisible: propTypes.bool.isRequired,\n  onCommand: propTypes.func.isRequired,\n  annotationCount: propTypes.number,\n};\n",
    "import { createElement } from 'preact';\nimport classnames from 'classnames';\nimport propTypes from 'prop-types';\nimport scrollIntoView from 'scroll-into-view';\n\nimport { setHighlightsFocused } from '../highlighter';\nimport { findClosestOffscreenAnchor } from '../util/buckets';\n\n/**\n * @typedef {import('../../types/annotator').AnnotationData} AnnotationData\n * @typedef {import('../util/buckets').Bucket} Bucket\n */\n\n/**\n * A left-pointing indicator button that, when hovered or clicked, highlights\n * or selects associated annotations.\n *\n * @param {Object} props\n *  @param {Bucket} props.bucket\n *  @param {(annotations: AnnotationData[], toggle: boolean) => any} props.onSelectAnnotations\n */\nfunction BucketButton({ bucket, onSelectAnnotations }) {\n  const annotations = bucket.anchors.map(anchor => anchor.annotation);\n  const buttonTitle = `Select nearby annotations (${bucket.anchors.length})`;\n\n  function selectAnnotations(event) {\n    event.stopPropagation();\n    onSelectAnnotations(annotations, event.metaKey || event.ctrlKey);\n  }\n\n  function setFocus(focusState) {\n    bucket.anchors.forEach(anchor => {\n      setHighlightsFocused(anchor.highlights || [], focusState);\n    });\n  }\n\n  return (\n    <button\n      className=\"bucket-button bucket-button--left\"\n      onClick={event => selectAnnotations(event)}\n      onMouseMove={() => setFocus(true)}\n      onMouseOut={() => setFocus(false)}\n      onBlur={() => setFocus(false)}\n      title={buttonTitle}\n      aria-label={buttonTitle}\n    >\n      {bucket.anchors.length}\n    </button>\n  );\n}\n\nBucketButton.propTypes = {\n  bucket: propTypes.object.isRequired,\n  onSelectAnnotations: propTypes.func.isRequired,\n};\n\n/**\n * An up- or down-pointing button that will scroll to the next closest bucket\n * of annotations in the given direction.\n *\n * @param {Object} props\n *   @param {Bucket} props.bucket\n *   @param {'up'|'down'} props.direction\n */\nfunction NavigationBucketButton({ bucket, direction }) {\n  const buttonTitle = `Go ${direction} to next annotations (${bucket.anchors.length})`;\n\n  function scrollToClosest(event) {\n    event.stopPropagation();\n    const closest = findClosestOffscreenAnchor(bucket.anchors, direction);\n    if (closest?.highlights?.length) {\n      scrollIntoView(closest.highlights[0]);\n    }\n  }\n  return (\n    <button\n      className={classnames('bucket-button', `bucket-button--${direction}`)}\n      onClick={event => scrollToClosest(event)}\n      title={buttonTitle}\n      aria-label={buttonTitle}\n    >\n      {bucket.anchors.length}\n    </button>\n  );\n}\n\nNavigationBucketButton.propTypes = {\n  bucket: propTypes.object.isRequired,\n  direction: propTypes.string,\n};\n\n/**\n * A list of buckets, including up and down navigation (when applicable) and\n * on-screen buckets\n *\n * @param {Object} props\n *   @param {Bucket} props.above\n *   @param {Bucket} props.below\n *   @param {Bucket[]} props.buckets\n *   @param {(annotations: AnnotationData[], toggle: boolean) => any} props.onSelectAnnotations\n */\nexport default function Buckets({\n  above,\n  below,\n  buckets,\n  onSelectAnnotations,\n}) {\n  const showUpNavigation = above.anchors.length > 0;\n  const showDownNavigation = below.anchors.length > 0;\n\n  return (\n    <ul className=\"buckets\">\n      {showUpNavigation && (\n        <li className=\"bucket\" style={{ top: above.position }}>\n          <NavigationBucketButton bucket={above} direction=\"up\" />\n        </li>\n      )}\n      {buckets.map((bucket, index) => (\n        <li className=\"bucket\" style={{ top: bucket.position }} key={index}>\n          <BucketButton\n            bucket={bucket}\n            onSelectAnnotations={onSelectAnnotations}\n          />\n        </li>\n      ))}\n      {showDownNavigation && (\n        <li className=\"bucket\" style={{ top: below.position }}>\n          <NavigationBucketButton bucket={below} direction=\"down\" />\n        </li>\n      )}\n    </ul>\n  );\n}\n\nBuckets.propTypes = {\n  above: propTypes.object.isRequired,\n  below: propTypes.object.isRequired,\n  buckets: propTypes.array.isRequired,\n  onSelectAnnotations: propTypes.func.isRequired,\n};\n",
    "import propTypes from 'prop-types';\nimport { createElement } from 'preact';\n\nimport SvgIcon from '../../shared/components/svg-icon';\n\n/**\n * @param {Object} props\n *  @param {import(\"preact\").Ref<HTMLButtonElement>} [props.buttonRef]\n *  @param {boolean} [props.expanded]\n *  @param {string} [props.className]\n *  @param {string} props.label\n *  @param {string} props.icon\n *  @param {() => any} props.onClick\n *  @param {boolean} [props.selected]\n */\nfunction ToolbarButton({\n  buttonRef,\n  expanded,\n  className = 'annotator-toolbar-button',\n  label,\n  icon,\n  onClick,\n  selected = false,\n}) {\n  const handleClick = event => {\n    // Stop event from propagating up to the document and being treated as a\n    // click on document content, causing the sidebar to close.\n    event.stopPropagation();\n    onClick();\n  };\n\n  return (\n    <button\n      className={className}\n      aria-label={label}\n      aria-expanded={expanded}\n      aria-pressed={selected}\n      onClick={handleClick}\n      ref={buttonRef}\n      title={label}\n    >\n      <SvgIcon name={icon} />\n    </button>\n  );\n}\n\nToolbarButton.propTypes = {\n  buttonRef: propTypes.any,\n  expanded: propTypes.bool,\n  className: propTypes.string,\n  label: propTypes.string.isRequired,\n  icon: propTypes.string.isRequired,\n  onClick: propTypes.func.isRequired,\n  selected: propTypes.bool,\n};\n\n/**\n * @typedef ToolbarProps\n *\n * @prop {() => any} closeSidebar -\n *   Callback for the \"Close sidebar\" button. This button is only shown when\n *   `useMinimalControls` is true and the sidebar is open.\n * @prop {() => any} createAnnotation -\n *   Callback for the \"Create annotation\" / \"Create page note\" button. The type\n *   of annotation depends on whether there is a text selection and is decided\n *   by the caller.\n * @prop {boolean} isSidebarOpen - Is the sidebar currently visible?\n * @prop {'annotation'|'note'} newAnnotationType -\n *   Icon to show on the \"Create annotation\" button indicating what kind of annotation\n *   will be created.\n * @prop {boolean} showHighlights - Are highlights currently visible in the document?\n * @prop {() => any} toggleHighlights -\n *   Callback to toggle visibility of highlights in the document.\n * @prop {() => any} toggleSidebar -\n *   Callback to toggle the visibility of the sidebar.\n * @prop {import(\"preact\").Ref<HTMLButtonElement>} [toggleSidebarRef] -\n *   Ref that gets set to the toolbar button for toggling the sidebar.\n *   This is exposed to enable the drag-to-resize functionality of this\n *   button.\n * @prop {boolean} [useMinimalControls] -\n *   If true, all controls are hidden except for the \"Close sidebar\" button\n *   when the sidebar is open.\n */\n\n/**\n * Controls on the edge of the sidebar for opening/closing the sidebar,\n * controlling highlight visibility and creating new page notes.\n *\n * @param {ToolbarProps} props\n */\nexport default function Toolbar({\n  closeSidebar,\n  createAnnotation,\n  isSidebarOpen,\n  newAnnotationType,\n  showHighlights,\n  toggleHighlights,\n  toggleSidebar,\n  toggleSidebarRef,\n  useMinimalControls = false,\n}) {\n  return (\n    <div>\n      {useMinimalControls && isSidebarOpen && (\n        <ToolbarButton\n          className=\"annotator-toolbar__sidebar-close\"\n          label=\"Close annotation sidebar\"\n          icon=\"cancel\"\n          onClick={closeSidebar}\n        />\n      )}\n      {!useMinimalControls && (\n        <ToolbarButton\n          className=\"annotator-toolbar__sidebar-toggle\"\n          buttonRef={toggleSidebarRef}\n          label=\"Annotation sidebar\"\n          icon={isSidebarOpen ? 'caret-right' : 'caret-left'}\n          expanded={isSidebarOpen}\n          onClick={toggleSidebar}\n        />\n      )}\n      {!useMinimalControls && (\n        <div className=\"annotator-toolbar-buttonbar\">\n          <ToolbarButton\n            label=\"Show highlights\"\n            icon={showHighlights ? 'show' : 'hide'}\n            selected={showHighlights}\n            onClick={toggleHighlights}\n          />\n          <ToolbarButton\n            label={\n              newAnnotationType === 'note' ? 'New page note' : 'New annotation'\n            }\n            icon={newAnnotationType === 'note' ? 'note' : 'annotate'}\n            onClick={createAnnotation}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nToolbar.propTypes = {\n  closeSidebar: propTypes.func.isRequired,\n  createAnnotation: propTypes.func.isRequired,\n  isSidebarOpen: propTypes.bool.isRequired,\n  newAnnotationType: propTypes.oneOf(['annotation', 'note']).isRequired,\n  showHighlights: propTypes.bool.isRequired,\n  toggleHighlights: propTypes.func.isRequired,\n  toggleSidebar: propTypes.func.isRequired,\n  toggleSidebarRef: propTypes.any,\n  useMinimalControls: propTypes.bool,\n};\n",
    "/**\n * @typedef HypothesisWindowProps\n * @prop {() => Object} [hypothesisConfig] - Function that returns configuration\n *   for the Hypothesis client\n */\n\n/**\n * Return an object containing config settings from window.hypothesisConfig().\n *\n * Return an object containing config settings returned by the\n * window.hypothesisConfig() function provided by the host page:\n *\n *   {\n *     fooSetting: 'fooValue',\n *     barSetting: 'barValue',\n *     ...\n *   }\n *\n * If there's no window.hypothesisConfig() function then return {}.\n *\n * @param {Window & HypothesisWindowProps} window_ - The window to search for a hypothesisConfig() function\n * @return {Object} - Any config settings returned by hypothesisConfig()\n *\n */\nexport default function configFuncSettingsFrom(window_) {\n  if (!window_.hasOwnProperty('hypothesisConfig')) {\n    return {};\n  }\n\n  if (typeof window_.hypothesisConfig !== 'function') {\n    const docs =\n      'https://h.readthedocs.io/projects/client/en/latest/publishers/config/#window.hypothesisConfig';\n    console.warn('hypothesisConfig must be a function, see: ' + docs);\n    return {};\n  }\n\n  return window_.hypothesisConfig();\n}\n",
    "import settingsFrom from './settings';\nimport { toBoolean } from '../../shared/type-coercions';\n\n/**\n * Reads the Hypothesis configuration from the environment.\n *\n * @param {Window} window_ - The Window object to read config from.\n */\nexport default function configFrom(window_) {\n  const settings = settingsFrom(window_);\n  return {\n    annotations: settings.annotations,\n    // URL where client assets are served from. Used when injecting the client\n    // into child iframes.\n    assetRoot: settings.hostPageSetting('assetRoot', {\n      allowInBrowserExt: true,\n    }),\n    branding: settings.hostPageSetting('branding'),\n    // URL of the client's boot script. Used when injecting the client into\n    // child iframes.\n    clientUrl: settings.clientUrl,\n    enableExperimentalNewNoteButton: settings.hostPageSetting(\n      'enableExperimentalNewNoteButton'\n    ),\n    experimental: settings.hostPageSetting('experimental', {\n      defaultValue: {},\n    }),\n    group: settings.group,\n    focus: settings.hostPageSetting('focus'),\n    theme: settings.hostPageSetting('theme'),\n    usernameUrl: settings.hostPageSetting('usernameUrl'),\n    onLayoutChange: settings.hostPageSetting('onLayoutChange'),\n    openSidebar: settings.hostPageSetting('openSidebar', {\n      allowInBrowserExt: true,\n      // Coerce value to a boolean because it may come from via as a string\n      coerce: toBoolean,\n    }),\n    query: settings.query,\n    requestConfigFromFrame: settings.hostPageSetting('requestConfigFromFrame'),\n    services: settings.hostPageSetting('services'),\n    showHighlights: settings.showHighlights,\n    notebookAppUrl: settings.notebookAppUrl,\n    sidebarAppUrl: settings.sidebarAppUrl,\n    // Subframe identifier given when a frame is being embedded into\n    // by a top level client\n    subFrameIdentifier: settings.hostPageSetting('subFrameIdentifier', {\n      allowInBrowserExt: true,\n    }),\n    externalContainerSelector: settings.hostPageSetting(\n      'externalContainerSelector'\n    ),\n  };\n}\n",
    "/**\n * Return true if the client is from a browser extension.\n *\n * @returns {boolean} true if this instance of the Hypothesis client is one\n *   distributed in a browser extension, false if it's one embedded in a\n *   website.\n *\n */\nexport default function isBrowserExtension(app) {\n  return !(app.startsWith('http://') || app.startsWith('https://'));\n}\n",
    "import { parseJsonConfig } from '../../boot/parse-json-config';\n\nimport configFuncSettingsFrom from './config-func-settings-from';\nimport isBrowserExtension from './is-browser-extension';\n\nexport default function settingsFrom(window_) {\n  const jsonConfigs = parseJsonConfig(window_.document);\n  const configFuncSettings = configFuncSettingsFrom(window_);\n\n  /**\n   * Return the href of the first annotator link in the given\n   * document with this `rel` attribute.\n   *\n   * Return the value of the href attribute of the first\n   * `<link type=\"application/annotator+html\" rel=\"${rel}\">`\n   * element in the given document. This URL is used as the `src` for sidebar\n   * or notebook iframes.\n   *\n   * @param {string} rel - The `rel` attribute to match\n   * @return {string} - The URL to use for the iframe\n   * @throws {Error} - If there's no link with the `rel` indicated, or the first\n   *   matching link has no `href`\n   */\n  function urlFromLinkTag(rel) {\n    const link = window_.document.querySelector(\n      `link[type=\"application/annotator+html\"][rel=\"${rel}\"]`\n    );\n\n    if (!link) {\n      throw new Error(\n        `No application/annotator+html (rel=\"${rel}\") link in the document`\n      );\n    }\n\n    if (!link.href) {\n      throw new Error(\n        `application/annotator+html (rel=\"${rel}\") link has no href`\n      );\n    }\n\n    return link.href;\n  }\n\n  /**\n   * Return the href URL of the first annotator client link in the given document.\n   *\n   * Return the value of the href attribute of the first\n   * `<link type=\"application/annotator+javascript\" rel=\"hypothesis-client\">`\n   * element in the given document.\n   *\n   * This URL is used to identify where the client is from and what url should\n   * be used inside of subframes.\n   *\n   * @return {string} - The URL that the client is hosted from\n   * @throws {Error} - If there's no annotator link or the first annotator has\n   *   no href.\n   *\n   */\n  function clientUrl() {\n    const link = window_.document.querySelector(\n      'link[type=\"application/annotator+javascript\"][rel=\"hypothesis-client\"]'\n    );\n\n    if (!link) {\n      throw new Error(\n        'No application/annotator+javascript (rel=\"hypothesis-client\") link in the document'\n      );\n    }\n\n    if (!link.href) {\n      throw new Error(\n        'application/annotator+javascript (rel=\"hypothesis-client\") link has no href'\n      );\n    }\n\n    return link.href;\n  }\n\n  /**\n   * Return the `#annotations:*` ID from the given URL's fragment.\n   *\n   * If the URL contains a `#annotations:<ANNOTATION_ID>` fragment then return\n   * the annotation ID extracted from the fragment. Otherwise return `null`.\n   *\n   * @return {string|null} - The extracted ID, or null.\n   */\n  function annotations() {\n    /** Return the annotations from the URL, or null. */\n    function annotationsFromURL() {\n      // Annotation IDs are url-safe-base64 identifiers\n      // See https://tools.ietf.org/html/rfc4648#page-7\n      const annotFragmentMatch = window_.location.href.match(\n        /#annotations:([A-Za-z0-9_-]+)$/\n      );\n      if (annotFragmentMatch) {\n        return annotFragmentMatch[1];\n      }\n      return null;\n    }\n\n    return jsonConfigs.annotations || annotationsFromURL();\n  }\n\n  /**\n   * Return the `#annotations:group:*` ID from the given URL's fragment.\n   *\n   * If the URL contains a `#annotations:group:<GROUP_ID>` fragment then return\n   * the group ID extracted from the fragment. Otherwise return `null`.\n   *\n   * @return {string|null} - The extracted ID, or null.\n   */\n  function group() {\n    function groupFromURL() {\n      const groupFragmentMatch = window_.location.href.match(\n        /#annotations:group:([A-Za-z0-9_-]+)$/\n      );\n      if (groupFragmentMatch) {\n        return groupFragmentMatch[1];\n      }\n      return null;\n    }\n\n    return jsonConfigs.group || groupFromURL();\n  }\n\n  function showHighlights() {\n    let showHighlights_ = hostPageSetting('showHighlights');\n\n    if (showHighlights_ === null) {\n      showHighlights_ = 'always'; // The default value is 'always'.\n    }\n\n    // Convert legacy keys/values to corresponding current configuration.\n    if (typeof showHighlights_ === 'boolean') {\n      return showHighlights_ ? 'always' : 'never';\n    }\n\n    return showHighlights_;\n  }\n\n  /**\n   * Return the config.query setting from the host page or from the URL.\n   *\n   * If the host page contains a js-hypothesis-config script containing a\n   * query setting then return that.\n   *\n   * Otherwise if the host page's URL has a `#annotations:query:*` (or\n   * `#annotations:q:*`) fragment then return the query value from that.\n   *\n   * Otherwise return null.\n   *\n   * @return {string|null} - The config.query setting, or null.\n   */\n  function query() {\n    /** Return the query from the URL, or null. */\n    function queryFromURL() {\n      const queryFragmentMatch = window_.location.href.match(\n        /#annotations:(query|q):(.+)$/i\n      );\n      if (queryFragmentMatch) {\n        try {\n          return decodeURIComponent(queryFragmentMatch[2]);\n        } catch (err) {\n          // URI Error should return the page unfiltered.\n        }\n      }\n      return null;\n    }\n\n    return jsonConfigs.query || queryFromURL();\n  }\n\n  function hostPageSetting(name, options = {}) {\n    const allowInBrowserExt = options.allowInBrowserExt || false;\n    const hasDefaultValue = typeof options.defaultValue !== 'undefined';\n    // Optional coerce method, or a no-op.\n    const coerceValue =\n      typeof options.coerce === 'function' ? options.coerce : name => name;\n\n    if (!allowInBrowserExt && isBrowserExtension(urlFromLinkTag('sidebar'))) {\n      return hasDefaultValue ? options.defaultValue : null;\n    }\n\n    if (configFuncSettings.hasOwnProperty(name)) {\n      return coerceValue(configFuncSettings[name]);\n    }\n\n    if (jsonConfigs.hasOwnProperty(name)) {\n      return coerceValue(jsonConfigs[name]);\n    }\n\n    if (hasDefaultValue) {\n      return options.defaultValue;\n    }\n\n    return null;\n  }\n\n  return {\n    get annotations() {\n      return annotations();\n    },\n    get clientUrl() {\n      return clientUrl();\n    },\n    get group() {\n      return group();\n    },\n    get notebookAppUrl() {\n      return urlFromLinkTag('notebook');\n    },\n    get showHighlights() {\n      return showHighlights();\n    },\n    get sidebarAppUrl() {\n      return urlFromLinkTag('sidebar');\n    },\n    get query() {\n      return query();\n    },\n    hostPageSetting: hostPageSetting,\n  };\n}\n",
    "/**\n * Create the JSON-serializable subset of annotator configuration that should\n * be passed to the sidebar application.\n */\nexport function createSidebarConfig(config) {\n  const sidebarConfig = { ...config };\n\n  // Some config settings are not JSON-stringifiable (e.g. JavaScript\n  // functions) and will be omitted when the config is JSON-stringified.\n  // Add a JSON-stringifiable option for each of these so that the sidebar can\n  // at least know whether the callback functions were provided or not.\n  if (sidebarConfig.services?.length > 0) {\n    const service = sidebarConfig.services[0];\n    if (service.onLoginRequest) {\n      service.onLoginRequestProvided = true;\n    }\n    if (service.onLogoutRequest) {\n      service.onLogoutRequestProvided = true;\n    }\n    if (service.onSignupRequest) {\n      service.onSignupRequestProvided = true;\n    }\n    if (service.onProfileRequest) {\n      service.onProfileRequestProvided = true;\n    }\n    if (service.onHelpRequest) {\n      service.onHelpRequestProvided = true;\n    }\n  }\n\n  // Remove several annotator-only properties.\n  //\n  // nb. We don't currently strip all the annotator-only properties here.\n  // That's OK because validation / filtering happens in the sidebar app itself.\n  // It just results in unnecessary content in the sidebar iframe's URL string.\n  ['notebookAppUrl', 'sidebarAppUrl', 'pluginClasses'].forEach(\n    key => delete sidebarConfig[key]\n  );\n\n  return sidebarConfig;\n}\n",
    "import { TinyEmitter as EventEmitter } from 'tiny-emitter';\n\n// Adapted from:\n//  https://github.com/openannotation/annotator/blob/v1.2.x/src/class.coffee\n//\n//  Annotator v1.2.10\n//  https://github.com/openannotation/annotator\n//\n//  Copyright 2015, the Annotator project contributors.\n//  Dual licensed under the MIT and GPLv3 licenses.\n//  https://github.com/openannotation/annotator/blob/master/LICENSE\n\n/**\n * `Delegator` is a base class for many objects in the annotator.\n *\n * It provides:\n *\n *  - An event bus, attached to the DOM element passed to the constructor.\n *    When an event is published, all `Delegator` instances that share the same\n *    root element will be able to receive the event.\n *  - Configuration storage (via `this.options`)\n *  - A mechanism to clean up event listeners and other resources added to\n *    the page by implementing a `destroy` method, which will be called when\n *    the annotator is removed from the page.\n */\nexport default class Delegator {\n  /**\n   * Construct the `Delegator` instance.\n   *\n   * @param {HTMLElement} element\n   * @param {Object} [config]\n   */\n  constructor(element, config) {\n    this.options = { ...config };\n    this.element = element;\n\n    const el = /** @type {any} */ (element);\n\n    /** @type {EventEmitter} */\n    let eventBus = el._hypothesisEventBus;\n    if (!eventBus) {\n      eventBus = new EventEmitter();\n      el._hypothesisEventBus = eventBus;\n    }\n\n    this._eventBus = eventBus;\n\n    /** @type {[event: string, callback: Function][]} */\n    this._subscriptions = [];\n  }\n\n  /**\n   * Clean up event listeners and other resources.\n   *\n   * Sub-classes should override this to clean up their resources and then call\n   * the base implementation.\n   */\n  destroy() {\n    for (let [event, callback] of this._subscriptions) {\n      this._eventBus.off(event, callback);\n    }\n  }\n\n  /**\n   * Fire an event.\n   *\n   * This and other `Delegator` instances which share the same root element will\n   * be able to observe it.\n   *\n   * @param {string} event\n   * @param {any[]} [args]\n   */\n  publish(event, args = []) {\n    this._eventBus.emit(event, ...args);\n  }\n\n  /**\n   * Register an event handler.\n   *\n   * @param {string} event\n   * @param {Function} callback\n   */\n  subscribe(event, callback) {\n    this._eventBus.on(event, callback);\n    this._subscriptions.push([event, callback]);\n  }\n\n  /**\n   * Remove an event handler.\n   *\n   * @param {string} event\n   * @param {Function} callback\n   */\n  unsubscribe(event, callback) {\n    this._eventBus.off(event, callback);\n    this._subscriptions = this._subscriptions.filter(\n      ([subEvent, subCallback]) =>\n        subEvent !== event || subCallback !== callback\n    );\n  }\n}\n",
    "import events from '../shared/bridge-events';\nimport warnOnce from '../shared/warn-once';\n\nlet _features = {};\n\nconst _set = features => {\n  _features = features || {};\n};\n\nexport default {\n  init: function (crossframe) {\n    crossframe.on(events.FEATURE_FLAGS_UPDATED, _set);\n  },\n\n  reset: function () {\n    _set({});\n  },\n\n  flagEnabled: function (flag) {\n    if (!(flag in _features)) {\n      warnOnce('looked up unknown feature', flag);\n      return false;\n    }\n    return _features[flag];\n  },\n};\n",
    "import debounce from 'lodash.debounce';\n\nimport * as FrameUtil from './util/frame-util';\n\n// Find difference of two arrays\nlet difference = (arrayA, arrayB) => {\n  return arrayA.filter(x => !arrayB.includes(x));\n};\n\nexport const DEBOUNCE_WAIT = 40;\n\nexport default class FrameObserver {\n  constructor(target) {\n    this._target = target;\n    this._handledFrames = [];\n\n    this._mutationObserver = new MutationObserver(\n      debounce(() => {\n        this._discoverFrames();\n      }, DEBOUNCE_WAIT)\n    );\n  }\n\n  observe(onFrameAddedCallback, onFrameRemovedCallback) {\n    this._onFrameAdded = onFrameAddedCallback;\n    this._onFrameRemoved = onFrameRemovedCallback;\n\n    this._discoverFrames();\n    this._mutationObserver.observe(this._target, {\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  disconnect() {\n    this._mutationObserver.disconnect();\n  }\n\n  _addFrame(frame) {\n    if (FrameUtil.isAccessible(frame)) {\n      FrameUtil.isDocumentReady(frame, () => {\n        frame.contentWindow.addEventListener('unload', () => {\n          this._removeFrame(frame);\n        });\n        this._handledFrames.push(frame);\n        this._onFrameAdded(frame);\n      });\n    } else {\n      // Could warn here that frame was not cross origin accessible\n    }\n  }\n\n  _removeFrame(frame) {\n    this._onFrameRemoved(frame);\n\n    // Remove the frame from our list\n    this._handledFrames = this._handledFrames.filter(x => x !== frame);\n  }\n\n  _discoverFrames() {\n    let frames = FrameUtil.findFrames(this._target);\n\n    for (let frame of frames) {\n      if (!this._handledFrames.includes(frame)) {\n        this._addFrame(frame);\n      }\n    }\n\n    for (let frame of difference(this._handledFrames, frames)) {\n      this._removeFrame(frame);\n    }\n  }\n}\n",
    "import scrollIntoView from 'scroll-into-view';\n\nimport Delegator from './delegator';\nimport { Adder } from './adder';\n\nimport * as htmlAnchoring from './anchoring/html';\nimport { TextRange } from './anchoring/text-range';\nimport {\n  getHighlightsContainingNode,\n  highlightRange,\n  removeAllHighlights,\n  removeHighlights,\n  setHighlightsFocused,\n  setHighlightsVisible,\n} from './highlighter';\nimport * as rangeUtil from './range-util';\nimport { SelectionObserver } from './selection-observer';\nimport { normalizeURI } from './util/url';\n\n/**\n * @typedef {import('../types/annotator').AnnotationData} AnnotationData\n * @typedef {import('../types/annotator').Anchor} Anchor\n * @typedef {import('../types/api').Target} Target\n * @typedef {import('./toolbar').ToolbarController} ToolbarController\n */\n\n/**\n * HTML element created by the highlighter with an associated annotation.\n *\n * @typedef {HTMLElement & { _annotation?: AnnotationData }} AnnotationHighlight\n */\n\n/**\n * Return all the annotations associated with the selected text.\n *\n * @return {AnnotationData[]}\n */\nfunction annotationsForSelection() {\n  const selection = /** @type {Selection} */ (window.getSelection());\n  const range = selection.getRangeAt(0);\n  const items = rangeUtil.itemsForRange(\n    range,\n\n    // nb. Only non-nullish items are returned by `itemsForRange`.\n    node => /** @type {AnnotationHighlight} */ (node)._annotation\n  );\n  return /** @type {AnnotationData[]} */ (items);\n}\n\n/**\n * Return the annotations associated with any highlights that contain a given\n * DOM node.\n *\n * @param {Node} node\n * @return {AnnotationData[]}\n */\nfunction annotationsAt(node) {\n  const items = getHighlightsContainingNode(node)\n    .map(h => /** @type {AnnotationHighlight} */ (h)._annotation)\n    .filter(ann => ann !== undefined);\n  return /** @type {AnnotationData[]} */ (items);\n}\n\n/**\n * Resolve an anchor's associated document region to a concrete `Range`.\n *\n * This may fail if anchoring failed or if the document has been mutated since\n * the anchor was created in a way that invalidates the anchor.\n *\n * @param {Anchor} anchor\n * @return {Range|null}\n */\nfunction resolveAnchor(anchor) {\n  if (!anchor.range) {\n    return null;\n  }\n  try {\n    return anchor.range.toRange();\n  } catch {\n    return null;\n  }\n}\n\n/**\n * `Guest` is the central class of the annotator that handles anchoring (locating)\n * annotations in the document when they are fetched by the sidebar, rendering\n * highlights for them and handling subsequent interactions with the highlights.\n *\n * It is also responsible for listening to changes in the current selection\n * and triggering the display of controls to create new annotations. When one\n * of these controls is clicked, it creates the new annotation and sends it to\n * the sidebar.\n *\n * Within a browser tab, there is typically one `Guest` instance per frame that\n * loads Hypothesis (not all frames will be annotation-enabled). In one frame,\n * usually the top-level one, there will also be an instance of the `Sidebar`\n * class that shows the sidebar app and surrounding UI. The `Guest` instance in\n * each frame connects to the sidebar via the `CrossFrame` service.\n *\n * The anchoring implementation defaults to a generic one for HTML documents and\n * can be overridden to handle different document types.\n */\nexport default class Guest extends Delegator {\n  /**\n   * Initialize the Guest.\n   *\n   * @param {HTMLElement} element -\n   *   The root element in which the `Guest` instance should be able to anchor\n   *   or create annotations. In an ordinary web page this typically `document.body`.\n   * @param {Object} config\n   * @param {typeof htmlAnchoring} anchoring - Anchoring implementation\n   */\n  constructor(element, config, anchoring = htmlAnchoring) {\n    const defaultConfig = {\n      // This causes the `Document` plugin to be initialized.\n      Document: {},\n    };\n\n    super(element, { ...defaultConfig, ...config });\n\n    this.visibleHighlights = false;\n\n    /** @type {ToolbarController|null} */\n    this.toolbar = null;\n\n    this.adderToolbar = document.createElement('hypothesis-adder');\n    this.adderToolbar.style.display = 'none';\n    this.element.appendChild(this.adderToolbar);\n\n    this.adderCtrl = new Adder(this.adderToolbar, {\n      onAnnotate: () => {\n        this.createAnnotation();\n        /** @type {Selection} */ (document.getSelection()).removeAllRanges();\n      },\n      onHighlight: () => {\n        this.setVisibleHighlights(true);\n        this.createHighlight();\n        /** @type {Selection} */ (document.getSelection()).removeAllRanges();\n      },\n      onShowAnnotations: anns => {\n        this.selectAnnotations(anns);\n      },\n    });\n\n    this.selectionObserver = new SelectionObserver(range => {\n      if (range) {\n        this._onSelection(range);\n      } else {\n        this._onClearSelection();\n      }\n    });\n\n    this.plugins = {};\n\n    /** @type {Anchor[]} */\n    this.anchors = [];\n\n    // Set the frame identifier if it's available.\n    // The \"top\" guest instance will have this as null since it's in a top frame not a sub frame\n    this.frameIdentifier = config.subFrameIdentifier || null;\n\n    this.anchoring = anchoring;\n\n    const cfOptions = {\n      config,\n      on: (event, handler) => {\n        this.subscribe(event, handler);\n      },\n      emit: (event, ...args) => {\n        this.publish(event, args);\n      },\n    };\n\n    this.addPlugin('CrossFrame', cfOptions);\n    this.crossframe = this.plugins.CrossFrame;\n    this.crossframe.onConnect(() => this._setupInitialState(config));\n\n    // Whether clicks on non-highlighted text should close the sidebar\n    this.closeSidebarOnDocumentClick = true;\n    this._connectAnnotationSync();\n    this._connectAnnotationUISync(this.crossframe);\n\n    // Load plugins\n    for (let name of Object.keys(this.options)) {\n      const opts = this.options[name];\n      if (!this.plugins[name] && this.options.pluginClasses[name]) {\n        this.addPlugin(name, opts);\n      }\n    }\n\n    // Setup event handlers on the root element\n    this._elementEventListeners = [];\n    this._setupElementEvents();\n  }\n\n  // Add DOM event listeners for clicks, taps etc. on the document and\n  // highlights.\n  _setupElementEvents() {\n    const addListener = (event, callback) => {\n      this.element.addEventListener(event, callback);\n      this._elementEventListeners.push({ event, callback });\n    };\n\n    // Hide the sidebar in response to a document click or tap, so it doesn't obscure\n    // the document content.\n    const maybeHideSidebar = event => {\n      if (!this.closeSidebarOnDocumentClick || this.isEventInAnnotator(event)) {\n        // Don't hide the sidebar if event occurred inside Hypothesis UI, or\n        // the user is making a selection, or the behavior was disabled because\n        // the sidebar doesn't overlap the content.\n        return;\n      }\n      this.crossframe?.call('hideSidebar');\n    };\n\n    addListener('click', event => {\n      const annotations = annotationsAt(event.target);\n      if (annotations.length && this.visibleHighlights) {\n        const toggle = event.metaKey || event.ctrlKey;\n        this.selectAnnotations(annotations, toggle);\n      } else {\n        maybeHideSidebar(event);\n      }\n    });\n\n    // Allow taps on the document to hide the sidebar as well as clicks, because\n    // on touch-input devices, not all elements will generate a \"click\" event.\n    addListener('touchstart', event => {\n      if (!annotationsAt(event.target).length) {\n        maybeHideSidebar(event);\n      }\n    });\n\n    addListener('mouseover', event => {\n      const annotations = annotationsAt(event.target);\n      if (annotations.length && this.visibleHighlights) {\n        this.focusAnnotations(annotations);\n      }\n    });\n\n    addListener('mouseout', () => {\n      if (this.visibleHighlights) {\n        this.focusAnnotations([]);\n      }\n    });\n  }\n\n  _removeElementEvents() {\n    this._elementEventListeners.forEach(({ event, callback }) => {\n      this.element.removeEventListener(event, callback);\n    });\n  }\n\n  addPlugin(name, options) {\n    const Klass = this.options.pluginClasses[name];\n    this.plugins[name] = new Klass(this.element, options, this);\n  }\n\n  /**\n   * Retrieve metadata for the current document.\n   */\n  getDocumentInfo() {\n    let metadataPromise;\n    let uriPromise;\n    if (this.plugins.PDF) {\n      metadataPromise = Promise.resolve(this.plugins.PDF.getMetadata());\n      uriPromise = Promise.resolve(this.plugins.PDF.uri());\n    } else if (this.plugins.Document) {\n      uriPromise = Promise.resolve(this.plugins.Document.uri());\n      metadataPromise = Promise.resolve(this.plugins.Document.metadata);\n    } else {\n      uriPromise = Promise.reject();\n      metadataPromise = Promise.reject();\n    }\n\n    uriPromise = uriPromise.catch(() =>\n      decodeURIComponent(window.location.href)\n    );\n    metadataPromise = metadataPromise.catch(() => ({\n      title: document.title,\n      link: [{ href: decodeURIComponent(window.location.href) }],\n    }));\n\n    return Promise.all([metadataPromise, uriPromise]).then(\n      ([metadata, href]) => {\n        return {\n          uri: normalizeURI(href),\n          metadata,\n          frameIdentifier: this.frameIdentifier,\n        };\n      }\n    );\n  }\n\n  _setupInitialState(config) {\n    this.publish('panelReady');\n    this.setVisibleHighlights(config.showHighlights === 'always');\n  }\n\n  _connectAnnotationSync() {\n    this.subscribe('annotationDeleted', annotation => {\n      this.detach(annotation);\n    });\n\n    this.subscribe('annotationsLoaded', annotations => {\n      annotations.map(annotation => this.anchor(annotation));\n    });\n  }\n\n  _connectAnnotationUISync(crossframe) {\n    crossframe.on('focusAnnotations', (tags = []) => {\n      for (let anchor of this.anchors) {\n        if (anchor.highlights) {\n          const toggle = tags.includes(anchor.annotation.$tag);\n          setHighlightsFocused(anchor.highlights, toggle);\n        }\n      }\n    });\n\n    crossframe.on('scrollToAnnotation', tag => {\n      for (let anchor of this.anchors) {\n        if (anchor.highlights) {\n          if (anchor.annotation.$tag === tag) {\n            const range = resolveAnchor(anchor);\n            if (!range) {\n              continue;\n            }\n\n            const event = new CustomEvent('scrolltorange', {\n              bubbles: true,\n              cancelable: true,\n              detail: range,\n            });\n            const defaultNotPrevented = this.element.dispatchEvent(event);\n            if (defaultNotPrevented) {\n              scrollIntoView(anchor.highlights[0]);\n            }\n          }\n        }\n      }\n    });\n\n    crossframe.on('getDocumentInfo', cb => {\n      this.getDocumentInfo()\n        .then(info => cb(null, info))\n        .catch(reason => cb(reason));\n    });\n\n    crossframe.on('setVisibleHighlights', state => {\n      this.setVisibleHighlights(state);\n    });\n  }\n\n  destroy() {\n    this._removeElementEvents();\n\n    this.selectionObserver.disconnect();\n    this.adderToolbar.remove();\n\n    removeAllHighlights(this.element);\n\n    for (let name of Object.keys(this.plugins)) {\n      this.plugins[name].destroy();\n    }\n\n    super.destroy();\n  }\n\n  /**\n   * Anchor (locate) an annotation's selectors in the document.\n   *\n   * @param {AnnotationData} annotation\n   * @return {Promise<Anchor[]>}\n   */\n  anchor(annotation) {\n    let anchor;\n    const root = this.element;\n\n    // Anchors for all annotations are in the `anchors` instance property. These\n    // are anchors for this annotation only. After all the targets have been\n    // processed these will be appended to the list of anchors known to the\n    // instance. Anchors hold an annotation, a target of that annotation, a\n    // document range for that target and an Array of highlights.\n    const anchors = [];\n\n    // The targets that are already anchored. This function consults this to\n    // determine which targets can be left alone.\n    const anchoredTargets = [];\n\n    // These are the highlights for existing anchors of this annotation with\n    // targets that have since been removed from the annotation. These will\n    // be removed by this function.\n    let deadHighlights = [];\n\n    // Initialize the target array.\n    if (!annotation.target) {\n      annotation.target = [];\n    }\n\n    /**\n     * Locate the region of the current document that the annotation refers to.\n     *\n     * @param {Target} target\n     */\n    const locate = target => {\n      // Check that the anchor has a TextQuoteSelector -- without a\n      // TextQuoteSelector we have no basis on which to verify that we have\n      // reanchored correctly and so we shouldn't even try.\n      //\n      // Returning an anchor without a range will result in this annotation being\n      // treated as an orphan (assuming no other targets anchor).\n      if (\n        !target.selector ||\n        !target.selector.some(s => s.type === 'TextQuoteSelector')\n      ) {\n        return Promise.resolve({ annotation, target });\n      }\n\n      // Find a target using the anchoring module.\n      return this.anchoring\n        .anchor(root, target.selector)\n        .then(range => ({\n          annotation,\n          target,\n\n          // Convert the `Range` to a `TextRange` which can be converted back to\n          // a `Range` later. The `TextRange` representation allows for highlights\n          // to be inserted during anchoring other annotations without \"breaking\"\n          // this anchor.\n          range: TextRange.fromRange(range),\n        }))\n        .catch(() => ({\n          annotation,\n          target,\n        }));\n    };\n\n    /**\n     * Highlight the range for an anchor.\n     *\n     * @param {Anchor} anchor\n     */\n    const highlight = anchor => {\n      const range = resolveAnchor(anchor);\n      if (!range) {\n        return anchor;\n      }\n\n      const highlights = /** @type {AnnotationHighlight[]} */ (highlightRange(\n        range\n      ));\n      highlights.forEach(h => {\n        h._annotation = anchor.annotation;\n      });\n      anchor.highlights = highlights;\n      return anchor;\n    };\n\n    /**\n     * Inform other parts of Hypothesis (eg. the sidebar and bucket bar) about\n     * the results of anchoring.\n     *\n     * @param {Anchor[]} anchors\n     */\n    const sync = anchors => {\n      // An annotation is considered to be an orphan if it has at least one\n      // target with selectors, and all targets with selectors failed to anchor\n      // (i.e. we didn't find it in the page and thus it has no range).\n      let hasAnchorableTargets = false;\n      let hasAnchoredTargets = false;\n      for (let anchor of anchors) {\n        if (anchor.target.selector) {\n          hasAnchorableTargets = true;\n          if (anchor.range) {\n            hasAnchoredTargets = true;\n            break;\n          }\n        }\n      }\n      annotation.$orphan = hasAnchorableTargets && !hasAnchoredTargets;\n\n      // Add the anchors for this annotation to instance storage.\n      this.anchors = this.anchors.concat(anchors);\n\n      // Let plugins know about the new information.\n      this.plugins.BucketBar?.update();\n      this.plugins.CrossFrame?.sync([annotation]);\n\n      return anchors;\n    };\n\n    // Remove all the anchors for this annotation from the instance storage.\n    for (anchor of this.anchors.splice(0, this.anchors.length)) {\n      if (anchor.annotation === annotation) {\n        // Anchors are valid as long as they still have a range and their target\n        // is still in the list of targets for this annotation.\n        if (anchor.range && annotation.target.includes(anchor.target)) {\n          anchors.push(anchor);\n          anchoredTargets.push(anchor.target);\n        } else if (anchor.highlights) {\n          // These highlights are no longer valid and should be removed.\n          deadHighlights = deadHighlights.concat(anchor.highlights);\n          delete anchor.highlights;\n          delete anchor.range;\n        }\n      } else {\n        // These can be ignored, so push them back onto the new list.\n        this.anchors.push(anchor);\n      }\n    }\n\n    // Remove all the highlights that have no corresponding target anymore.\n    removeHighlights(deadHighlights);\n\n    // Anchor any targets of this annotation that are not anchored already.\n    for (let target of annotation.target) {\n      if (!anchoredTargets.includes(target)) {\n        anchor = locate(target).then(highlight);\n        anchors.push(anchor);\n      }\n    }\n\n    return Promise.all(anchors).then(sync);\n  }\n\n  /**\n   * Remove the anchors and associated highlights for an annotation from the document.\n   *\n   * @param {AnnotationData} annotation\n   */\n  detach(annotation) {\n    const anchors = [];\n    let unhighlight = [];\n\n    for (let anchor of this.anchors) {\n      if (anchor.annotation === annotation) {\n        unhighlight.push(...(anchor.highlights ?? []));\n      } else {\n        anchors.push(anchor);\n      }\n    }\n\n    this.anchors = anchors;\n\n    removeHighlights(unhighlight);\n    this.plugins.BucketBar?.update();\n  }\n\n  /**\n   * Create a new annotation that is associated with the selected region of\n   * the current document.\n   *\n   * @param {Partial<AnnotationData>} annotation - Initial properties of the\n   *   new annotation, other than `target`, `document` and `uri` which are\n   *   set by this method.\n   */\n  createAnnotation(annotation = {}) {\n    const root = this.element;\n\n    const ranges = this.selectedRanges ?? [];\n    this.selectedRanges = null;\n\n    const getSelectors = range => {\n      // Returns an array of selectors for the passed range.\n      return this.anchoring.describe(root, range);\n    };\n\n    const setDocumentInfo = info => {\n      annotation.document = info.metadata;\n      annotation.uri = info.uri;\n    };\n\n    const setTargets = ([info, selectors]) => {\n      // `selectors` is an array of arrays: each item is an array of selectors\n      // identifying a distinct target.\n      const source = info.uri;\n      annotation.target = selectors.map(selector => ({\n        source,\n        selector,\n      }));\n    };\n\n    const info = this.getDocumentInfo();\n    info.then(setDocumentInfo);\n\n    const selectors = Promise.all(ranges.map(getSelectors));\n    const targets = Promise.all([info, selectors]).then(setTargets);\n\n    targets.then(() => this.publish('beforeAnnotationCreated', [annotation]));\n    targets.then(() => this.anchor(/** @type {AnnotationData} */ (annotation)));\n\n    if (!annotation.$highlight) {\n      this.crossframe?.call('showSidebar');\n    }\n    return annotation;\n  }\n\n  /**\n   * Create a new annotation with the `$highlight` flag set.\n   *\n   * This flag indicates that the sidebar should save the new annotation\n   * automatically and not show a form for the user to enter a comment about it.\n   */\n  createHighlight() {\n    return this.createAnnotation({ $highlight: true });\n  }\n\n  /**\n   * Open the sidebar and set the selection to `annotations` (ie. Filter the annotation\n   * list to show only these annotations).\n   *\n   * @param {AnnotationData[]} annotations\n   */\n  showAnnotations(annotations) {\n    const tags = annotations.map(a => a.$tag);\n    this.crossframe?.call('showAnnotations', tags);\n    this.crossframe?.call('showSidebar');\n  }\n\n  /**\n   * Toggle whether the given annotations are included in the selection in the\n   * sidebar.\n   *\n   * @param {AnnotationData[]} annotations\n   */\n  toggleAnnotationSelection(annotations) {\n    const tags = annotations.map(a => a.$tag);\n    this.crossframe?.call('toggleAnnotationSelection', tags);\n  }\n\n  /**\n   * Indicate in the sidebar that certain annotations are focused (ie. the\n   * associated document region(s) is hovered).\n   *\n   * @param {AnnotationData[]} annotations\n   */\n  focusAnnotations(annotations) {\n    const tags = annotations.map(a => a.$tag);\n    this.crossframe?.call('focusAnnotations', tags);\n  }\n\n  /**\n   * Show or hide the adder toolbar when the selection changes.\n   *\n   * @param {Range} range\n   */\n  _onSelection(range) {\n    const selection = /** @type {Selection} */ (document.getSelection());\n    const isBackwards = rangeUtil.isSelectionBackwards(selection);\n    const focusRect = rangeUtil.selectionFocusRect(selection);\n    if (!focusRect) {\n      // The selected range does not contain any text\n      this._onClearSelection();\n      return;\n    }\n\n    this.selectedRanges = [range];\n    if (this.toolbar) {\n      this.toolbar.newAnnotationType = 'annotation';\n    }\n\n    this.adderCtrl.annotationsForSelection = annotationsForSelection();\n    this.adderCtrl.show(focusRect, isBackwards);\n  }\n\n  _onClearSelection() {\n    this.adderCtrl.hide();\n    this.selectedRanges = [];\n    if (this.toolbar) {\n      this.toolbar.newAnnotationType = 'note';\n    }\n  }\n\n  /**\n   * Set the selected annotations in the sidebar.\n   *\n   * @param {AnnotationData[]} annotations\n   * @param {boolean} [toggle]\n   */\n  selectAnnotations(annotations, toggle = false) {\n    if (toggle) {\n      this.toggleAnnotationSelection(annotations);\n    } else {\n      this.showAnnotations(annotations);\n    }\n  }\n\n  /**\n   * Did an event originate from an element in the sidebar UI? (eg. the sidebar\n   * iframe, or its toolbar)\n   *\n   * @param {Event} event\n   */\n  isEventInAnnotator(event) {\n    return (\n      /** @type {Element} */ (event.target).closest('.annotator-frame') !== null\n    );\n  }\n\n  /**\n   * Set whether highlights are visible in the document or not.\n   *\n   * @param {boolean} shouldShowHighlights\n   */\n  setVisibleHighlights(shouldShowHighlights) {\n    setHighlightsVisible(this.element, shouldShowHighlights);\n\n    this.visibleHighlights = shouldShowHighlights;\n    if (this.toolbar) {\n      this.toolbar.highlightsVisible = shouldShowHighlights;\n    }\n  }\n}\n",
    "import { isNodeInRange } from './range-util';\n\nconst SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n\nfunction isCSSPropertySupported(property, value) {\n  if (typeof CSS !== 'function' || typeof CSS.supports !== 'function') {\n    /* istanbul ignore next */\n    return false;\n  }\n  return CSS.supports(property, value);\n}\n\n/**\n * Return the canvas element underneath a highlight element in a PDF page's\n * text layer.\n *\n * Returns `null` if the highlight is not above a PDF canvas.\n *\n * @param {HTMLElement} highlightEl -\n *   A `<hypothesis-highlight>` element in the page's text layer\n * @return {HTMLCanvasElement|null}\n */\nfunction getPdfCanvas(highlightEl) {\n  // This code assumes that PDF.js renders pages with a structure like:\n  //\n  // <div class=\"page\">\n  //   <div class=\"canvasWrapper\">\n  //     <canvas></canvas> <!-- The rendered PDF page -->\n  //   </div>\n  //   <div class=\"textLayer\">\n  //      <!-- Transparent text layer with text spans used to enable text selection -->\n  //   </div>\n  // </div>\n  //\n  // It also assumes that the `highlightEl` element is somewhere under\n  // the `.textLayer` div.\n\n  const pageEl = highlightEl.closest('.page');\n  if (!pageEl) {\n    return null;\n  }\n\n  const canvasEl = pageEl.querySelector('.canvasWrapper > canvas');\n  if (!canvasEl) {\n    return null;\n  }\n\n  return /** @type {HTMLCanvasElement} */ (canvasEl);\n}\n\n/**\n * Draw highlights in an SVG layer overlaid on top of a PDF.js canvas.\n *\n * Returns `null` if `highlightEl` is not above a PDF.js page canvas.\n *\n * @param {HTMLElement} highlightEl -\n *   An element that wraps the highlighted text in the transparent text layer\n *   above the PDF.\n * @return {SVGElement|null} -\n *   The SVG graphic element that corresponds to the highlight or `null` if\n *   no PDF page was found below the highlight.\n */\nfunction drawHighlightsAbovePdfCanvas(highlightEl) {\n  const canvasEl = getPdfCanvas(highlightEl);\n  if (!canvasEl || !canvasEl.parentElement) {\n    return null;\n  }\n\n  /** @type {SVGElement|null} */\n  let svgHighlightLayer = canvasEl.parentElement.querySelector(\n    '.hypothesis-highlight-layer'\n  );\n\n  const isCssBlendSupported = isCSSPropertySupported(\n    'mix-blend-mode',\n    'multiply'\n  );\n\n  if (!svgHighlightLayer) {\n    // Create SVG layer. This must be in the same stacking context as\n    // the canvas so that CSS `mix-blend-mode` can be used to control how SVG\n    // content blends with the canvas below.\n    svgHighlightLayer = document.createElementNS(SVG_NAMESPACE, 'svg');\n    svgHighlightLayer.setAttribute('class', 'hypothesis-highlight-layer');\n    canvasEl.parentElement.appendChild(svgHighlightLayer);\n\n    // Overlay SVG layer above canvas.\n    canvasEl.parentElement.style.position = 'relative';\n\n    const svgStyle = svgHighlightLayer.style;\n    svgStyle.position = 'absolute';\n    svgStyle.left = '0';\n    svgStyle.top = '0';\n    svgStyle.width = '100%';\n    svgStyle.height = '100%';\n\n    if (isCssBlendSupported) {\n      // Use multiply blending so that highlights drawn on top of text darken it\n      // rather than making it lighter. This improves contrast and thus readability\n      // of highlighted text, especially for overlapping highlights.\n      //\n      // This choice optimizes for the common case of dark text on a light background.\n      //\n      // @ts-ignore - `mixBlendMode` property is missing from type definitions.\n      svgStyle.mixBlendMode = 'multiply';\n    } else {\n      // For older browsers (eg. Edge < 79) we draw all the highlights as\n      // opaque and then make the entire highlight layer transparent. This means\n      // that there is no visual indication of whether text has one or multiple\n      // highlights, but it preserves readability.\n      svgStyle.opacity = '0.3';\n    }\n  }\n\n  const canvasRect = canvasEl.getBoundingClientRect();\n  const highlightRect = highlightEl.getBoundingClientRect();\n\n  // Create SVG element for the current highlight element.\n  const rect = document.createElementNS(SVG_NAMESPACE, 'rect');\n  rect.setAttribute('x', (highlightRect.left - canvasRect.left).toString());\n  rect.setAttribute('y', (highlightRect.top - canvasRect.top).toString());\n  rect.setAttribute('width', highlightRect.width.toString());\n  rect.setAttribute('height', highlightRect.height.toString());\n\n  if (isCssBlendSupported) {\n    rect.setAttribute('class', 'hypothesis-svg-highlight');\n  } else {\n    rect.setAttribute('class', 'hypothesis-svg-highlight is-opaque');\n  }\n\n  svgHighlightLayer.appendChild(rect);\n\n  return rect;\n}\n\n/**\n * Additional properties added to text highlight HTML elements.\n *\n * @typedef HighlightProps\n * @prop {SVGElement} [svgHighlight]\n */\n\n/**\n * @typedef {HTMLElement & HighlightProps} HighlightElement\n */\n\n/**\n * Return text nodes which are entirely inside `range`.\n *\n * If a range starts or ends part-way through a text node, the node is split\n * and the part inside the range is returned.\n *\n * @param {Range} range\n * @return {Text[]}\n */\nfunction wholeTextNodesInRange(range) {\n  if (range.collapsed) {\n    // Exit early for an empty range to avoid an edge case that breaks the algorithm\n    // below. Splitting a text node at the start of an empty range can leave the\n    // range ending in the left part rather than the right part.\n    return [];\n  }\n\n  /** @type {Node|null} */\n  let root = range.commonAncestorContainer;\n  if (root.nodeType !== Node.ELEMENT_NODE) {\n    // If the common ancestor is not an element, set it to the parent element to\n    // ensure that the loop below visits any text nodes generated by splitting\n    // the common ancestor.\n    //\n    // Note that `parentElement` may be `null`.\n    root = root.parentElement;\n  }\n  if (!root) {\n    // If there is no root element then we won't be able to insert highlights,\n    // so exit here.\n    return [];\n  }\n\n  const textNodes = [];\n  const nodeIter = /** @type {Document} */ (root.ownerDocument).createNodeIterator(\n    root,\n    NodeFilter.SHOW_TEXT // Only return `Text` nodes.\n  );\n  let node;\n  while ((node = nodeIter.nextNode())) {\n    if (!isNodeInRange(range, node)) {\n      continue;\n    }\n    let text = /** @type {Text} */ (node);\n\n    if (text === range.startContainer && range.startOffset > 0) {\n      // Split `text` where the range starts. The split will create a new `Text`\n      // node which will be in the range and will be visited in the next loop iteration.\n      text.splitText(range.startOffset);\n      continue;\n    }\n\n    if (text === range.endContainer && range.endOffset < text.data.length) {\n      // Split `text` where the range ends, leaving it as the part in the range.\n      text.splitText(range.endOffset);\n    }\n\n    textNodes.push(text);\n  }\n\n  return textNodes;\n}\n\n/**\n * Wraps the DOM Nodes within the provided range with a highlight\n * element of the specified class and returns the highlight Elements.\n *\n * @param {Range} range - Range to be highlighted\n * @param {string} cssClass - A CSS class to use for the highlight\n * @return {HighlightElement[]} - Elements wrapping text in `normedRange` to add a highlight effect\n */\nexport function highlightRange(range, cssClass = 'hypothesis-highlight') {\n  const textNodes = wholeTextNodesInRange(range);\n\n  // Check if this range refers to a placeholder for not-yet-rendered text in\n  // a PDF. These highlights should be invisible.\n  const isPlaceholder =\n    textNodes.length > 0 &&\n    /** @type {Element} */ (textNodes[0].parentNode).closest(\n      '.annotator-placeholder'\n    ) !== null;\n\n  // Group text nodes into spans of adjacent nodes. If a group of text nodes are\n  // adjacent, we only need to create one highlight element for the group.\n  let textNodeSpans = [];\n  let prevNode = null;\n  let currentSpan = null;\n\n  textNodes.forEach(node => {\n    if (prevNode && prevNode.nextSibling === node) {\n      currentSpan.push(node);\n    } else {\n      currentSpan = [node];\n      textNodeSpans.push(currentSpan);\n    }\n    prevNode = node;\n  });\n\n  // Filter out text node spans that consist only of white space. This avoids\n  // inserting highlight elements in places that can only contain a restricted\n  // subset of nodes such as table rows and lists.\n  const whitespace = /^\\s*$/;\n  textNodeSpans = textNodeSpans.filter(span =>\n    // Check for at least one text node with non-space content.\n    span.some(node => !whitespace.test(node.nodeValue))\n  );\n\n  // Wrap each text node span with a `<hypothesis-highlight>` element.\n  const highlights = [];\n  textNodeSpans.forEach(nodes => {\n    // A custom element name is used here rather than `<span>` to reduce the\n    // likelihood of highlights being hidden by page styling.\n\n    /** @type {HighlightElement} */\n    const highlightEl = document.createElement('hypothesis-highlight');\n    highlightEl.className = cssClass;\n\n    nodes[0].parentNode.replaceChild(highlightEl, nodes[0]);\n    nodes.forEach(node => highlightEl.appendChild(node));\n\n    if (!isPlaceholder) {\n      // For PDF highlights, create the highlight effect by using an SVG placed\n      // above the page's canvas rather than CSS `background-color` on the\n      // highlight element. This enables more control over blending of the\n      // highlight with the content below.\n      const svgHighlight = drawHighlightsAbovePdfCanvas(highlightEl);\n      if (svgHighlight) {\n        highlightEl.className += ' is-transparent';\n\n        // Associate SVG element with highlight for use by `removeHighlights`.\n        highlightEl.svgHighlight = svgHighlight;\n      }\n    }\n\n    highlights.push(highlightEl);\n  });\n\n  return highlights;\n}\n\n/**\n * Replace a child `node` with `replacements`.\n *\n * nb. This is like `ChildNode.replaceWith` but it works in older browsers.\n *\n * @param {ChildNode} node\n * @param {Node[]} replacements\n */\nfunction replaceWith(node, replacements) {\n  const parent = /** @type {Node} */ (node.parentNode);\n  replacements.forEach(r => parent.insertBefore(r, node));\n  node.remove();\n}\n\n/**\n * Remove all highlights under a given root element.\n *\n * @param {HTMLElement} root\n */\nexport function removeAllHighlights(root) {\n  const highlights = Array.from(root.querySelectorAll('hypothesis-highlight'));\n  removeHighlights(/** @type {HighlightElement[]} */ (highlights));\n}\n\n/**\n * Remove highlights from a range previously highlighted with `highlightRange`.\n *\n * @param {HighlightElement[]} highlights - The highlight elements returned by `highlightRange`\n */\nexport function removeHighlights(highlights) {\n  for (let h of highlights) {\n    if (h.parentNode) {\n      const children = Array.from(h.childNodes);\n      replaceWith(h, children);\n    }\n\n    if (h.svgHighlight) {\n      h.svgHighlight.remove();\n    }\n  }\n}\n\n/**\n * Set whether the given highlight elements should appear \"focused\".\n *\n * A highlight can be displayed in a different (\"focused\") style to indicate\n * that it is current in some other context - for example the user has selected\n * the corresponding annotation in the sidebar.\n *\n * @param {HighlightElement[]} highlights\n * @param {boolean} focused\n */\nexport function setHighlightsFocused(highlights, focused) {\n  highlights.forEach(h =>\n    h.classList.toggle('hypothesis-highlight-focused', focused)\n  );\n}\n\n/**\n * Set whether highlights under the given root element should be visible.\n *\n * @param {HTMLElement} root\n * @param {boolean} visible\n */\nexport function setHighlightsVisible(root, visible) {\n  const showHighlightsClass = 'hypothesis-highlights-always-on';\n  root.classList.toggle(showHighlightsClass, visible);\n}\n\n/**\n * Get the highlight elements that contain the given node.\n *\n * @param {Node} node\n * @return {HighlightElement[]}\n */\nexport function getHighlightsContainingNode(node) {\n  let el =\n    node.nodeType === Node.ELEMENT_NODE\n      ? /** @type {Element} */ (node)\n      : node.parentElement;\n\n  const highlights = [];\n\n  while (el) {\n    if (el.classList.contains('hypothesis-highlight')) {\n      highlights.push(/** @type {HighlightElement} */ (el));\n    }\n    el = el.parentElement;\n  }\n\n  return highlights;\n}\n\n/**\n * Subset of `DOMRect` interface.\n *\n * @typedef Rect\n * @prop {number} top\n * @prop {number} left\n * @prop {number} bottom\n * @prop {number} right\n */\n\n/**\n * Get the bounding client rectangle of a collection in viewport coordinates.\n * Unfortunately, Chrome has issues ([1]) with Range.getBoundingClient rect or we\n * could just use that.\n *\n * [1] https://bugs.chromium.org/p/chromium/issues/detail?id=324437\n *\n * @param {HTMLElement[]} collection\n * @return {Rect}\n */\nexport function getBoundingClientRect(collection) {\n  // Reduce the client rectangles of the highlights to a bounding box\n  const rects = collection.map(\n    n => /** @type {Rect} */ (n.getBoundingClientRect())\n  );\n  return rects.reduce((acc, r) => ({\n    top: Math.min(acc.top, r.top),\n    left: Math.min(acc.left, r.left),\n    bottom: Math.max(acc.bottom, r.bottom),\n    right: Math.max(acc.right, r.right),\n  }));\n}\n",
    "// @ts-nocheck\n\n/**\n * Set of icons used by the annotator part of the application via the `SvgIcon`\n * component.\n */\nexport default {\n  annotate: require('../images/icons/annotate.svg'),\n  cancel: require('../images/icons/cancel.svg'),\n  caution: require('../images/icons/caution.svg'),\n  'caret-left': require('../images/icons/caret-left.svg'),\n  'caret-right': require('../images/icons/caret-right.svg'),\n  hide: require('../images/icons/hide.svg'),\n  highlight: require('../images/icons/highlight.svg'),\n  note: require('../images/icons/note.svg'),\n  pointer: require('../images/icons/pointer.svg'),\n  show: require('../images/icons/show.svg'),\n};\n",
    "/* global process */\n\n/**\n * @typedef {import('../types/annotator').HypothesisWindow} HypothesisWindow\n */\n\n// Load polyfill for :focus-visible pseudo-class.\nimport 'focus-visible';\n\n// Enable debug checks for Preact components.\nif (process.env.NODE_ENV !== 'production') {\n  require('preact/debug');\n}\n\n// Load icons.\nimport { registerIcons } from '../shared/components/svg-icon';\nimport iconSet from './icons';\nregisterIcons(iconSet);\n\nimport configFrom from './config/index';\nimport BucketBarPlugin from './plugin/bucket-bar';\nimport CrossFramePlugin from './plugin/cross-frame';\nimport DocumentPlugin from './plugin/document';\nimport Guest from './guest';\nimport Notebook from './notebook';\nimport PDFPlugin from './plugin/pdf';\nimport PdfSidebar from './pdf-sidebar';\nimport Sidebar from './sidebar';\n\nconst pluginClasses = {\n  // UI plugins\n  BucketBar: BucketBarPlugin,\n\n  // Document type plugins\n  PDF: PDFPlugin,\n  Document: DocumentPlugin,\n\n  // Cross-frame communication\n  CrossFrame: CrossFramePlugin,\n};\n\nconst window_ = /** @type {HypothesisWindow} */ (window);\n\n// Look up the URL of the sidebar. This element is added to the page by the\n// boot script before the \"annotator\" bundle loads.\nconst appLinkEl = /** @type {Element} */ (document.querySelector(\n  'link[type=\"application/annotator+html\"][rel=\"sidebar\"]'\n));\n\nconst config = configFrom(window);\n\nfunction init() {\n  const isPDF = typeof window_.PDFViewerApplication !== 'undefined';\n\n  /** @type {new (e: HTMLElement, config: any) => Guest} */\n  let Klass = isPDF ? PdfSidebar : Sidebar;\n\n  if (config.subFrameIdentifier) {\n    // Make sure the PDF plugin is loaded if the subframe contains the PDF.js viewer.\n    if (isPDF) {\n      config.PDF = {};\n    }\n    Klass = Guest;\n\n    // Other modules use this to detect if this\n    // frame context belongs to hypothesis.\n    // Needs to be a global property that's set.\n    window_.__hypothesis_frame = true;\n  }\n\n  config.pluginClasses = pluginClasses;\n\n  const annotator = new Klass(document.body, config);\n  const notebook = new Notebook(document.body, config);\n  appLinkEl.addEventListener('destroy', function () {\n    annotator.destroy();\n    notebook.destroy();\n\n    // Remove all the `<link>`, `<script>` and `<style>` elements added to the\n    // page by the boot script.\n    const clientAssets = document.querySelectorAll('[data-hypothesis-asset]');\n    clientAssets.forEach(el => el.remove());\n  });\n}\n\n/**\n * Returns a Promise that resolves when the document has loaded (but subresources\n * may still be loading).\n * @returns {Promise<void>}\n */\nfunction documentReady() {\n  return new Promise(resolve => {\n    if (document.readyState !== 'loading') {\n      resolve();\n    }\n    // nb. `readystatechange` may be emitted twice, but `resolve` only resolves\n    // on the first call.\n    document.addEventListener('readystatechange', () => resolve());\n  });\n}\n\ndocumentReady().then(init);\n",
    "import Delegator from './delegator';\nimport { createSidebarConfig } from './config/sidebar';\n\n/**\n * Create the iframe that will load the notebook application.\n *\n * @return {HTMLIFrameElement}\n */\nfunction createNotebookFrame(config, groupId) {\n  const notebookConfig = createSidebarConfig(config);\n  // Explicity set the \"focused\" group\n  notebookConfig.group = groupId;\n  const configParam =\n    'config=' + encodeURIComponent(JSON.stringify(notebookConfig));\n  const notebookAppSrc = config.notebookAppUrl + '#' + configParam;\n\n  const notebookFrame = document.createElement('iframe');\n\n  // Enable media in annotations to be shown fullscreen\n  notebookFrame.setAttribute('allowfullscreen', '');\n\n  notebookFrame.src = notebookAppSrc;\n  notebookFrame.title = 'Hypothesis annotation notebook';\n  notebookFrame.className = 'notebook-inner';\n\n  return notebookFrame;\n}\n\nexport default class Notebook extends Delegator {\n  constructor(element, config) {\n    super(element, config);\n    this.frame = null;\n\n    this._groupId = null;\n    this._prevGroupId = null;\n\n    this.container = document.createElement('div');\n    this.container.style.display = 'none';\n    this.container.className = 'notebook-outer';\n\n    this.subscribe('showNotebook', groupId => {\n      this._groupId = groupId;\n      this.show();\n    });\n    this.subscribe('hideNotebook', () => this.hide());\n    // If the sidebar has opened, get out of the way\n    this.subscribe('sidebarOpened', () => this.hide());\n  }\n\n  _update() {\n    // Create a new iFrame if we don't have one at all yet, or if the\n    // groupId has changed since last use\n    const needIframe =\n      !this.frame || !this._prevGroupId || this._prevGroupId !== this._groupId;\n    this._prevGroupId = this._groupId;\n\n    if (needIframe) {\n      this.frame?.remove();\n      this.frame = createNotebookFrame(this.options, this._groupId);\n      this.container.appendChild(this.frame);\n      this.element.appendChild(this.container);\n    }\n  }\n\n  show() {\n    this._update();\n    this.container.classList.add('is-open');\n    this.container.style.display = '';\n  }\n\n  hide() {\n    this.container.classList.remove('is-open');\n    this.container.style.display = 'none';\n  }\n\n  destroy() {\n    this.frame?.remove();\n  }\n}\n",
    "import Sidebar from './sidebar';\n\n/**\n * @typedef {import('../types/annotator').HypothesisWindow} HypothesisWindow\n * @typedef {import('./sidebar').LayoutState} LayoutState\n */\n\nconst defaultConfig = {\n  PDF: {},\n  BucketBar: {\n    container: '.annotator-frame',\n    scrollables: ['#viewerContainer'],\n  },\n};\n\n// The viewport and controls for PDF.js start breaking down below about 670px\n// of available space, so only render PDF and sidebar side-by-side if there\n// is enough room. Otherwise, allow sidebar to overlap PDF\nconst MIN_PDF_WIDTH = 680;\n\nexport default class PdfSidebar extends Sidebar {\n  constructor(element, config) {\n    super(element, { ...defaultConfig, ...config });\n\n    this._lastSidebarLayoutState = {\n      expanded: false,\n      width: 0,\n      height: 0,\n    };\n\n    this.window = /** @type {HypothesisWindow} */ (window);\n    this.pdfViewer = this.window.PDFViewerApplication?.pdfViewer;\n    this.pdfContainer = this.window.PDFViewerApplication?.appConfig?.appContainer;\n\n    // Is the PDF currently displayed side-by-side with the sidebar?\n    this.sideBySideActive = false;\n\n    this.subscribe('sidebarLayoutChanged', state => this.fitSideBySide(state));\n    this.window.addEventListener('resize', () => this.fitSideBySide());\n  }\n\n  /**\n   * Set the PDF.js container element to the designated `width` and\n   * activate side-by-side mode.\n   *\n   * @param {number} width - in pixels\n   */\n  activateSideBySide(width) {\n    this.sideBySideActive = true;\n    this.closeSidebarOnDocumentClick = false;\n    this.pdfContainer.style.width = width + 'px';\n    this.pdfContainer.classList.add('hypothesis-side-by-side');\n  }\n\n  /**\n   * Deactivate side-by-side mode and allow PDF.js pages to render at\n   * whatever width the current full-page viewport allows.\n   */\n  deactivateSideBySide() {\n    this.sideBySideActive = false;\n    this.closeSidebarOnDocumentClick = true;\n    this.pdfContainer.style.width = 'auto';\n    this.pdfContainer.classList.remove('hypothesis-side-by-side');\n  }\n\n  /**\n   * Attempt to make the PDF viewer and the sidebar fit side-by-side without\n   * overlap if there is enough room in the viewport to do so reasonably.\n   * Resize the PDF viewer container element to leave the right amount of room\n   * for the sidebar, and prompt PDF.js to re-render the PDF pages to scale\n   * within that resized container.\n   *\n   * @param {LayoutState} [sidebarLayoutState]\n   */\n  fitSideBySide(sidebarLayoutState) {\n    if (!sidebarLayoutState) {\n      sidebarLayoutState = /** @type {LayoutState} */ (this\n        ._lastSidebarLayoutState);\n    }\n    const maximumWidthToFit = this.window.innerWidth - sidebarLayoutState.width;\n    if (sidebarLayoutState.expanded && maximumWidthToFit >= MIN_PDF_WIDTH) {\n      this.activateSideBySide(maximumWidthToFit);\n    } else {\n      this.deactivateSideBySide();\n    }\n\n    // The following logic is pulled from PDF.js `webViewerResize`\n    const currentScaleValue = this.pdfViewer.currentScaleValue;\n    if (\n      currentScaleValue === 'auto' ||\n      currentScaleValue === 'page-fit' ||\n      currentScaleValue === 'page-width'\n    ) {\n      // NB: There is logic within the setter for `currentScaleValue`\n      // Setting this scale value will prompt PDF.js to recalculate viewport\n      this.pdfViewer.currentScaleValue = currentScaleValue;\n    }\n    // This will cause PDF pages to re-render if their scaling has changed\n    this.pdfViewer.update();\n\n    this._lastSidebarLayoutState = sidebarLayoutState;\n  }\n}\n",
    "/**\n * Enum values for page rendering states (IRenderableView#renderingState)\n * in PDF.js. Taken from web/pdf_rendering_queue.js in the PDF.js library.\n *\n * Reproduced here because this enum is not exported consistently across\n * different versions of PDF.js\n */\nconst RenderingStates = {\n  INITIAL: 0,\n  RUNNING: 1,\n  PAUSED: 2,\n  FINISHED: 3,\n};\n\nexport default RenderingStates;\n",
    "import Delegator from '../delegator';\n\nimport { createElement, render } from 'preact';\nimport Buckets from '../components/buckets';\n\nimport { anchorBuckets } from '../util/buckets';\n\nexport default class BucketBar extends Delegator {\n  constructor(element, options, annotator) {\n    const defaultOptions = {\n      // Selectors for the scrollable elements on the page\n      scrollables: [],\n    };\n\n    const opts = { ...defaultOptions, ...options };\n\n    const el = document.createElement('div');\n    el.className = 'annotator-bucket-bar';\n    super(el, opts);\n\n    this.annotator = annotator;\n\n    // The element to append this plugin's element to; defaults to the provided\n    // `element` unless a `container` option was provided\n    let container = /** @type {HTMLElement} */ (element);\n\n    if (this.options.container) {\n      // If a container element selector has been provided, and there is an\n      // element corresponding to that container  use it\n      const containerEl = /** @type {HTMLElement | null } */ (document.querySelector(\n        this.options.container\n      ));\n      if (containerEl) {\n        container = containerEl;\n      } else {\n        // A container selector has been supplied, but it didn't pan out...\n        console.warn(\n          `Unable to find container element for selector '${this.options.container}'`\n        );\n      }\n    }\n    container.appendChild(this.element);\n\n    this.updateFunc = () => this.update();\n\n    window.addEventListener('resize', this.updateFunc);\n    window.addEventListener('scroll', this.updateFunc);\n    this.options.scrollables.forEach(scrollable => {\n      const scrollableElement = /** @type {HTMLElement | null} */ (document.querySelector(\n        scrollable\n      ));\n      scrollableElement?.addEventListener('scroll', this.updateFunc);\n    });\n  }\n\n  destroy() {\n    window.removeEventListener('resize', this.updateFunc);\n    window.removeEventListener('scroll', this.updateFunc);\n    this.options.scrollables.forEach(scrollable => {\n      const scrollableElement = /** @type {HTMLElement | null} */ (document.querySelector(\n        scrollable\n      ));\n      scrollableElement?.removeEventListener('scroll', this.updateFunc);\n    });\n  }\n\n  update() {\n    if (this._updatePending) {\n      return;\n    }\n    this._updatePending = true;\n    requestAnimationFrame(() => {\n      this._update();\n      this._updatePending = false;\n    });\n  }\n\n  _update() {\n    const buckets = anchorBuckets(this.annotator.anchors);\n    render(\n      <Buckets\n        above={buckets.above}\n        below={buckets.below}\n        buckets={buckets.buckets}\n        onSelectAnnotations={(annotations, toggle) =>\n          this.annotator.selectAnnotations(annotations, toggle)\n        }\n      />,\n      this.element\n    );\n  }\n}\n",
    "import AnnotationSync from '../annotation-sync';\nimport Bridge from '../../shared/bridge';\nimport Delegator from '../delegator';\nimport Discovery from '../../shared/discovery';\nimport * as frameUtil from '../util/frame-util';\nimport FrameObserver from '../frame-observer';\n\n/**\n * @typedef {import('../../types/annotator').AnnotationData} AnnotationData\n */\n\n/**\n * `CrossFrame` provides a connection from the annotator to the sidebar.\n *\n * It can be used to publish events to and subscribe to events from the sidebar.\n *\n * This class also has logic for injecting Hypothesis into iframes that\n * are added to the page if they have the `enable-annotation` attribute set\n * and are same-origin with the current document.\n */\nexport default class CrossFrame extends Delegator {\n  constructor(element, options) {\n    super(element, options);\n\n    const { config, server, on, emit } = options;\n    const discovery = new Discovery(window, { server });\n    const bridge = new Bridge();\n    const annotationSync = new AnnotationSync(bridge, { on, emit });\n    const frameObserver = new FrameObserver(element);\n    const frameIdentifiers = new Map();\n\n    /**\n     * Inject Hypothesis into a newly-discovered iframe.\n     */\n    const injectIntoFrame = frame => {\n      if (frameUtil.hasHypothesis(frame)) {\n        return;\n      }\n\n      const { clientUrl } = config;\n\n      frameUtil.isLoaded(frame, () => {\n        const subFrameIdentifier = discovery.generateToken();\n        frameIdentifiers.set(frame, subFrameIdentifier);\n        const injectedConfig = {\n          ...config,\n          subFrameIdentifier,\n        };\n\n        frameUtil.injectHypothesis(frame, clientUrl, injectedConfig);\n      });\n    };\n\n    const iframeUnloaded = frame => {\n      bridge.call('destroyFrame', frameIdentifiers.get(frame));\n      frameIdentifiers.delete(frame);\n    };\n\n    // Initiate connection to the sidebar.\n    const onDiscoveryCallback = (source, origin, token) =>\n      bridge.createChannel(source, origin, token);\n    discovery.startDiscovery(onDiscoveryCallback);\n    frameObserver.observe(injectIntoFrame, iframeUnloaded);\n\n    /**\n     * Remove the connection between the sidebar and annotator.\n     */\n    this.destroy = () => {\n      bridge.destroy();\n      discovery.stopDiscovery();\n      frameObserver.disconnect();\n\n      super.destroy();\n    };\n\n    /**\n     * Notify the sidebar about new annotations created in the page.\n     *\n     * @param {AnnotationData[]} annotations\n     */\n    this.sync = annotations => annotationSync.sync(annotations);\n\n    /**\n     * Subscribe to an event from the sidebar.\n     *\n     * @param {string} event\n     * @param {Function} callback\n     */\n    this.on = (event, callback) => bridge.on(event, callback);\n\n    /**\n     * Call an RPC method exposed by the sidebar to the annotator.\n     *\n     * @param {string} method\n     * @param {any[]} args\n     */\n    this.call = (method, ...args) => bridge.call(method, ...args);\n\n    /**\n     * Register a callback to be invoked once the connection to the sidebar\n     * is set up.\n     *\n     * @param {Function} callback\n     */\n    this.onConnect = callback => bridge.onConnect(callback);\n  }\n}\n",
    "/*\n ** Adapted from:\n ** https://github.com/openannotation/annotator/blob/v1.2.x/src/plugin/document.coffee\n **\n ** Annotator v1.2.10\n ** https://github.com/openannotation/annotator\n **\n ** Copyright 2015, the Annotator project contributors.\n ** Dual licensed under the MIT and GPLv3 licenses.\n ** https://github.com/openannotation/annotator/blob/master/LICENSE\n */\n\n/**\n * nb. The `DocumentMetadata` type is renamed to avoid a conflict with the\n * `DocumentMetadata` class below.\n *\n * @typedef {import('../../types/annotator').DocumentMetadata} Metadata\n */\n\nimport Delegator from '../delegator';\n\nimport { normalizeURI } from '../util/url';\n\n/**\n * Extension of the `Metadata` type with non-optional fields for `dc`, `eprints` etc.\n *\n * @typedef HTMLDocumentMetadata\n * @prop {string} title\n * @prop {Object[]} link\n *   @prop {string} [link.rel]\n *   @prop {string} [link.type]\n *   @prop {string} link.href\n * @prop {Object.<string, string[]>} dc\n * @prop {Object.<string, string[]>} eprints\n * @prop {Object.<string, string[]>} facebook\n * @prop {Object.<string, string[]>} highwire\n * @prop {Object.<string, string[]>} prism\n * @prop {Object.<string, string[]>} twitter\n * @prop {string} [favicon]\n * @prop {string} [documentFingerprint]\n */\n\n/**\n * Create an empty `HTMLDocumentMetadata` object.\n *\n * @return {HTMLDocumentMetadata}\n */\nfunction createMetadata() {\n  return {\n    title: document.title,\n    link: [],\n    dc: {},\n    eprints: {},\n    facebook: {},\n    highwire: {},\n    prism: {},\n    twitter: {},\n  };\n}\n\n/**\n * DocumentMeta reads metadata/links from the current HTML document and\n * populates the `document` property of new annotations.\n */\nexport default class DocumentMeta extends Delegator {\n  constructor(element, options) {\n    super(element, options);\n\n    this.metadata = createMetadata();\n\n    this.baseURI = options.baseURI || document.baseURI;\n    this.document = options.document || document;\n    this.normalizeURI = options.normalizeURI || normalizeURI;\n\n    /**\n     * Event handler that adds document metadata to new annotations.\n     */\n    this.beforeAnnotationCreated = annotation => {\n      annotation.document = this.metadata;\n    };\n    this.subscribe('beforeAnnotationCreated', this.beforeAnnotationCreated);\n\n    this.getDocumentMetadata();\n  }\n\n  destroy() {\n    this.unsubscribe('beforeAnnotationCreated', this.beforeAnnotationCreated);\n  }\n\n  /**\n   * Returns the primary URI for the document being annotated\n   *\n   * @return {string}\n   */\n  uri() {\n    let uri = decodeURIComponent(this._getDocumentHref());\n    for (let link of this.metadata.link) {\n      if (link.rel === 'canonical') {\n        uri = link.href;\n      }\n    }\n    return uri;\n  }\n\n  /**\n   * Returns all uris for the document being annotated\n   *\n   * @return {string[]}\n   */\n  uris() {\n    const uniqueUrls = {};\n    for (let link of this.metadata.link) {\n      if (link.href) {\n        uniqueUrls[link.href] = true;\n      }\n    }\n    return Object.keys(uniqueUrls);\n  }\n\n  /**\n   * Return metadata for the current page.\n   */\n  getDocumentMetadata() {\n    this.metadata = createMetadata();\n\n    // first look for some common metadata types\n    // TODO: look for microdata/rdfa?\n    this._getHighwire();\n    this._getDublinCore();\n    this._getFacebook();\n    this._getEprints();\n    this._getPrism();\n    this._getTwitter();\n    this._getFavicon();\n\n    // extract out/normalize some things\n    this._getTitle();\n    this._getLinks();\n\n    return this.metadata;\n  }\n\n  _getHighwire() {\n    this.metadata.highwire = this._getMetaTags('citation', 'name', '_');\n  }\n\n  _getFacebook() {\n    this.metadata.facebook = this._getMetaTags('og', 'property', ':');\n  }\n\n  _getTwitter() {\n    this.metadata.twitter = this._getMetaTags('twitter', 'name', ':');\n  }\n\n  _getDublinCore() {\n    this.metadata.dc = this._getMetaTags('dc', 'name', '.');\n  }\n\n  _getPrism() {\n    this.metadata.prism = this._getMetaTags('prism', 'name', '.');\n  }\n\n  _getEprints() {\n    this.metadata.eprints = this._getMetaTags('eprints', 'name', '.');\n  }\n\n  /**\n   * Return an array of all the `content` values of `<meta>` tags on the page\n   * where the attribute named `attribute` begins with `<prefix><delimiter>`.\n   *\n   * @param {string} prefix\n   * @param {string} attribute\n   * @param {string} delimiter\n   * @return {Object.<string,string[]>}\n   */\n  _getMetaTags(prefix, attribute, delimiter) {\n    /** @type {Object.<string,string[]>} */\n    const tags = {};\n    for (let meta of Array.from(this.document.querySelectorAll('meta'))) {\n      const name = meta.getAttribute(attribute);\n      const { content } = meta;\n      if (name) {\n        const match = name.match(RegExp(`^${prefix}${delimiter}(.+)$`, 'i'));\n        if (match) {\n          const n = match[1];\n          if (tags[n]) {\n            tags[n].push(content);\n          } else {\n            tags[n] = [content];\n          }\n        }\n      }\n    }\n    return tags;\n  }\n\n  _getTitle() {\n    if (this.metadata.highwire.title) {\n      this.metadata.title = this.metadata.highwire.title[0];\n    } else if (this.metadata.eprints.title) {\n      this.metadata.title = this.metadata.eprints.title[0];\n    } else if (this.metadata.prism.title) {\n      this.metadata.title = this.metadata.prism.title[0];\n    } else if (this.metadata.facebook.title) {\n      this.metadata.title = this.metadata.facebook.title[0];\n    } else if (this.metadata.twitter.title) {\n      this.metadata.title = this.metadata.twitter.title[0];\n    } else if (this.metadata.dc.title) {\n      this.metadata.title = this.metadata.dc.title[0];\n    } else {\n      this.metadata.title = this.document.title;\n    }\n  }\n\n  _getLinks() {\n    // We know our current location is a link for the document.\n    this.metadata.link = [{ href: this._getDocumentHref() }];\n\n    // Extract links from certain `<link>` tags.\n    const linkElements = Array.from(this.document.querySelectorAll('link'));\n    for (let link of linkElements) {\n      if (\n        !['alternate', 'canonical', 'bookmark', 'shortlink'].includes(link.rel)\n      ) {\n        continue;\n      }\n\n      if (link.rel === 'alternate') {\n        // Ignore RSS feed links.\n        if (link.type && link.type.match(/^application\\/(rss|atom)\\+xml/)) {\n          continue;\n        }\n        // Ignore alternate languages.\n        if (link.hreflang) {\n          continue;\n        }\n      }\n\n      try {\n        const href = this._absoluteUrl(link.href);\n        this.metadata.link.push({ href, rel: link.rel, type: link.type });\n      } catch (e) {\n        // Ignore URIs which cannot be parsed.\n      }\n    }\n\n    // look for links in scholar metadata\n    for (let name of Object.keys(this.metadata.highwire)) {\n      const values = this.metadata.highwire[name];\n      if (name === 'pdf_url') {\n        for (let url of values) {\n          try {\n            this.metadata.link.push({\n              href: this._absoluteUrl(url),\n              type: 'application/pdf',\n            });\n          } catch (e) {\n            // Ignore URIs which cannot be parsed.\n          }\n        }\n      }\n\n      // kind of a hack to express DOI identifiers as links but it's a\n      // convenient place to look them up later, and somewhat sane since\n      // they don't have a type\n      if (name === 'doi') {\n        for (let doi of values) {\n          if (doi.slice(0, 4) !== 'doi:') {\n            doi = `doi:${doi}`;\n          }\n          this.metadata.link.push({ href: doi });\n        }\n      }\n    }\n\n    // look for links in dublincore data\n    for (let name of Object.keys(this.metadata.dc)) {\n      const values = this.metadata.dc[name];\n      if (name === 'identifier') {\n        for (let id of values) {\n          if (id.slice(0, 4) === 'doi:') {\n            this.metadata.link.push({ href: id });\n          }\n        }\n      }\n    }\n\n    // look for a link to identify the resource in dublincore metadata\n    const dcRelationValues = this.metadata.dc['relation.ispartof'];\n    const dcIdentifierValues = this.metadata.dc.identifier;\n    if (dcRelationValues && dcIdentifierValues) {\n      const dcUrnRelationComponent =\n        dcRelationValues[dcRelationValues.length - 1];\n      const dcUrnIdentifierComponent =\n        dcIdentifierValues[dcIdentifierValues.length - 1];\n      const dcUrn =\n        'urn:x-dc:' +\n        encodeURIComponent(dcUrnRelationComponent) +\n        '/' +\n        encodeURIComponent(dcUrnIdentifierComponent);\n      this.metadata.link.push({ href: dcUrn });\n      // set this as the documentFingerprint as a hint to include this in search queries\n      this.metadata.documentFingerprint = dcUrn;\n    }\n  }\n\n  _getFavicon() {\n    for (let link of Array.from(this.document.querySelectorAll('link'))) {\n      if (['shortcut icon', 'icon'].includes(link.rel)) {\n        try {\n          this.metadata.favicon = this._absoluteUrl(link.href);\n        } catch (e) {\n          // Ignore URIs which cannot be parsed.\n        }\n      }\n    }\n  }\n\n  /**\n   * Convert a possibly relative URI to an absolute one. This will throw an\n   * exception if the URL cannot be parsed.\n   */\n  _absoluteUrl(url) {\n    return this.normalizeURI(url, this.baseURI);\n  }\n\n  // Get the true URI record when it's masked via a different protocol.\n  // This happens when an href is set with a uri using the 'blob:' protocol\n  // but the document can set a different uri through a <base> tag.\n  _getDocumentHref() {\n    const { href } = this.document.location;\n    const allowedSchemes = ['http:', 'https:', 'file:'];\n\n    // Use the current document location if it has a recognized scheme.\n    const scheme = new URL(href).protocol;\n    if (allowedSchemes.includes(scheme)) {\n      return href;\n    }\n\n    // Otherwise, try using the location specified by the <base> element.\n    if (\n      this.baseURI &&\n      allowedSchemes.includes(new URL(this.baseURI).protocol)\n    ) {\n      return this.baseURI;\n    }\n\n    // Fall back to returning the document URI, even though the scheme is not\n    // in the allowed list.\n    return href;\n  }\n}\n",
    "import { normalizeURI } from '../util/url';\n\n/**\n * @typedef {import('../../types/pdfjs').PDFViewerApplication} PDFViewerApplication\n */\n\n/**\n * @typedef Link\n * @prop {string} href\n */\n\n/**\n * @typedef Metadata\n * @prop {string} title - The document title\n * @prop {Link[]} link - Array of URIs associated with this document\n * @prop {string} documentFingerprint - The fingerprint of this PDF. This is\n *   referred to as the \"File Identifier\" in the PDF spec. It may be a hash of\n *   part of the content if the PDF file does not have a File Identifier.\n */\n\n/**\n * Wait for a PDFViewerApplication to be initialized.\n *\n * @param {PDFViewerApplication} app\n * @return {Promise<void>}\n */\nfunction pdfViewerInitialized(app) {\n  // `initializedPromise` was added in PDF.js v2.4.456.\n  // See https://github.com/mozilla/pdf.js/pull/11607. In earlier versions the\n  // `initialized` property can be queried.\n  if (app.initializedPromise) {\n    return app.initializedPromise;\n  } else if (app.initialized) {\n    return Promise.resolve();\n  } else {\n    // PDF.js < v2.4.456. The recommended approach is to listen for a `localized`\n    // DOM event, but this assumes that PDF.js has been configured to publish\n    // events to the DOM. Here we simply poll `app.initialized` because it is\n    // easier.\n    return new Promise(resolve => {\n      const timeout = setInterval(() => {\n        if (app.initialized) {\n          clearTimeout(timeout);\n          resolve();\n        }\n      }, 5);\n    });\n  }\n}\n\n/**\n * PDFMetadata extracts metadata about a loading/loaded PDF document from a\n * PDF.js PDFViewerApplication object.\n *\n * @example\n * // Invoke in a PDF.js viewer, before or after the PDF has finished loading.\n * const meta = new PDFMetadata(window.PDFViewerApplication)\n * meta.getUri().then(uri => {\n *    // Do something with the URL of the PDF.\n * })\n */\nexport default class PDFMetadata {\n  /**\n   * Construct a `PDFMetadata` that returns URIs/metadata associated with a\n   * given PDF viewer.\n   *\n   * @param {PDFViewerApplication} app - The `PDFViewerApplication` global from PDF.js\n   */\n  constructor(app) {\n    /** @type {Promise<PDFViewerApplication>} */\n    this._loaded = pdfViewerInitialized(app).then(() => {\n      // Check if document has already loaded.\n      if (app.downloadComplete) {\n        return app;\n      }\n\n      return new Promise(resolve => {\n        const finish = () => {\n          if (app.eventBus) {\n            app.eventBus.off('documentload', finish);\n            app.eventBus.off('documentloaded', finish);\n          } else {\n            window.removeEventListener('documentload', finish);\n          }\n          resolve(app);\n        };\n\n        // Listen for \"documentloaded\" event which signals that the document\n        // has been downloaded and the first page has been rendered.\n        if (app.eventBus) {\n          // PDF.js >= v1.6.210 dispatch events via an internal event bus.\n          // PDF.js < v2.5.207 also dispatches events to the DOM.\n\n          // `documentloaded` is the preferred event in PDF.js >= v2.0.943.\n          // See https://github.com/mozilla/pdf.js/commit/7bc4bfcc8b7f52b14107f0a551becdf01643c5c2\n          app.eventBus.on('documentloaded', finish);\n\n          // `documentload` is dispatched by PDF.js < v2.1.266.\n          app.eventBus.on('documentload', finish);\n        } else {\n          // PDF.js < v1.6.210 dispatches events only to the DOM.\n          window.addEventListener('documentload', finish);\n        }\n      });\n    });\n  }\n\n  /**\n   * Return the URI of the PDF.\n   *\n   * If the PDF is currently loading, the returned promise resolves once loading\n   * is complete.\n   *\n   * @return {Promise<string>}\n   */\n  getUri() {\n    return this._loaded.then(app => {\n      let uri = getPDFURL(app);\n      if (!uri) {\n        uri = fingerprintToURN(app.pdfDocument.fingerprint);\n      }\n      return uri;\n    });\n  }\n\n  /**\n   * Returns metadata about the document.\n   *\n   * If the PDF is currently loading, the returned promise resolves once loading\n   * is complete.\n   *\n   * @return {Promise<Metadata>}\n   */\n  getMetadata() {\n    return this._loaded.then(app => {\n      let title = document.title;\n\n      if (\n        app.metadata &&\n        app.metadata.has('dc:title') &&\n        app.metadata.get('dc:title') !== 'Untitled'\n      ) {\n        title = /** @type {string} */ (app.metadata.get('dc:title'));\n      } else if (app.documentInfo && app.documentInfo.Title) {\n        title = app.documentInfo.Title;\n      }\n\n      const link = [{ href: fingerprintToURN(app.pdfDocument.fingerprint) }];\n\n      const url = getPDFURL(app);\n      if (url) {\n        link.push({ href: url });\n      }\n\n      return {\n        title: title,\n        link: link,\n        documentFingerprint: app.pdfDocument.fingerprint,\n      };\n    });\n  }\n}\n\nfunction fingerprintToURN(fingerprint) {\n  return 'urn:x-pdf:' + String(fingerprint);\n}\n\nfunction getPDFURL(app) {\n  const url = normalizeURI(app.url);\n\n  // Local file:// URLs should not be saved in document metadata.\n  // Entries in document.link should be URIs. In the case of\n  // local files, omit the URL.\n  if (url.indexOf('file://') !== 0) {\n    return url;\n  }\n\n  return null;\n}\n",
    "import debounce from 'lodash.debounce';\nimport { Fragment, createElement, render } from 'preact';\n\nimport * as pdfAnchoring from '../anchoring/pdf';\nimport Delegator from '../delegator';\nimport RenderingStates from '../pdfjs-rendering-states';\n\nimport PDFMetadata from './pdf-metadata';\nimport SvgIcon from '../../shared/components/svg-icon';\n\n/**\n * @typedef {import('../../types/annotator').Anchor} Anchor\n * @typedef {import('../../types/annotator').Annotator} Annotator\n * @typedef {import('../../types/annotator').HypothesisWindow} HypothesisWindow\n */\n\n/**\n * A banner shown at the top of the PDF viewer if the PDF cannot be annotated\n * by Hypothesis.\n */\nfunction WarningBanner() {\n  return (\n    <Fragment>\n      <div className=\"annotator-pdf-warning-banner__type\">\n        <SvgIcon\n          name=\"caution\"\n          className=\"annotator-pdf-warning-banner__icon\"\n        />\n      </div>\n      <div className=\"annotator-pdf-warning-banner__message\">\n        <strong>This PDF does not contain selectable text:</strong>{' '}\n        <a\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          href=\"https://web.hypothes.is/help/how-to-ocr-optimize-pdfs/\"\n        >\n          Learn how to fix this\n        </a>{' '}\n        in order to annotate with Hypothesis.\n      </div>\n    </Fragment>\n  );\n}\n\nexport default class PDF extends Delegator {\n  /**\n   * @param {Annotator} annotator\n   */\n  constructor(element, config, annotator) {\n    super(element, config);\n\n    this.annotator = annotator;\n    annotator.anchoring = pdfAnchoring;\n\n    const window_ = /** @type {HypothesisWindow} */ (window);\n    this.pdfViewer = window_.PDFViewerApplication.pdfViewer;\n    this.pdfViewer.viewer.classList.add('has-transparent-text-layer');\n\n    this.pdfMetadata = new PDFMetadata(window_.PDFViewerApplication);\n\n    this.observer = new MutationObserver(debounce(() => this._update(), 100));\n    this.observer.observe(this.pdfViewer.viewer, {\n      attributes: true,\n      attributeFilter: ['data-loaded'],\n      childList: true,\n      subtree: true,\n    });\n\n    /**\n     * A banner shown at the top of the PDF viewer warning the user if the PDF\n     * is not suitable for use with Hypothesis.\n     *\n     * @type {HTMLElement|null}\n     */\n    this._warningBanner = null;\n\n    this._checkForSelectableText();\n\n    // Hide annotation layer when the user is making a selection. The annotation\n    // layer appears above the invisible text layer and can interfere with text\n    // selection. See https://github.com/hypothesis/client/issues/1464.\n    this._updateAnnotationLayerVisibility = () => {\n      const selection = /** @type {Selection} */ (window_.getSelection());\n\n      // Add CSS class to indicate whether there is a selection. Annotation\n      // layers are then hidden by a CSS rule in `pdfjs-overrides.scss`.\n      this.pdfViewer.viewer.classList.toggle(\n        'is-selecting',\n        !selection.isCollapsed\n      );\n    };\n\n    document.addEventListener(\n      'selectionchange',\n      this._updateAnnotationLayerVisibility\n    );\n  }\n\n  destroy() {\n    document.removeEventListener(\n      'selectionchange',\n      this._updateAnnotationLayerVisibility\n    );\n    this.pdfViewer.viewer.classList.remove('has-transparent-text-layer');\n    this.observer.disconnect();\n  }\n\n  uri() {\n    return this.pdfMetadata.getUri();\n  }\n\n  getMetadata() {\n    return this.pdfMetadata.getMetadata();\n  }\n\n  /**\n   * Check whether the PDF has selectable text and show a warning if not.\n   */\n  async _checkForSelectableText() {\n    // Wait for PDF to load.\n    try {\n      await this.uri();\n    } catch (e) {\n      return;\n    }\n\n    try {\n      const hasText = await pdfAnchoring.documentHasText();\n      this._showNoSelectableTextWarning(!hasText);\n    } catch (err) {\n      /* istanbul ignore next */\n      console.warn('Unable to check for text in PDF:', err);\n    }\n  }\n\n  /**\n   * Set whether the warning about a PDF's suitability for use with Hypothesis\n   * is shown.\n   *\n   * @param {boolean} showWarning\n   */\n  _showNoSelectableTextWarning(showWarning) {\n    if (!showWarning) {\n      this._warningBanner?.remove();\n      this._warningBanner = null;\n      return;\n    }\n\n    // Get a reference to the root element of the main content area in\n    // PDF.js.\n    const mainContainer = /** @type {HTMLElement} */ (document.querySelector(\n      '#mainContainer'\n    ));\n\n    // Update the position of the warning banner and `mainContainer` element\n    // below it when the size of the banner changes, eg. due to a window resize.\n    const updateBannerHeight = () => {\n      /* istanbul ignore next */\n      if (!this._warningBanner) {\n        return;\n      }\n      const rect = this._warningBanner.getBoundingClientRect();\n      mainContainer.style.top = rect.height + 'px';\n      this._warningBanner.style.top = -rect.height + 'px';\n    };\n\n    this._warningBanner = document.createElement('div');\n    this._warningBanner.className =\n      'annotator-pdf-warning-banner annotator-pdf-warning-banner--notice';\n    mainContainer.appendChild(this._warningBanner);\n    render(<WarningBanner />, this._warningBanner);\n\n    // nb. In browsers that don't support `ResizeObserver` the banner height\n    // will simply be static and not adjust if the window is resized.\n    //\n    // @ts-expect-error - TS is missing `ResizeObserver`\n    if (typeof ResizeObserver !== 'undefined') {\n      // Update the banner when the window is resized or the Hypothesis\n      // sidebar is opened.\n      // @ts-ignore\n      new ResizeObserver(updateBannerHeight).observe(this._warningBanner);\n    }\n    updateBannerHeight();\n  }\n\n  // This method (re-)anchors annotations when pages are rendered and destroyed.\n  _update() {\n    // A list of annotations that need to be refreshed.\n    const refreshAnnotations = [];\n\n    const pageCount = this.pdfViewer.pagesCount;\n    for (let pageIndex = 0; pageIndex < pageCount; pageIndex++) {\n      const page = this.pdfViewer.getPageView(pageIndex);\n      if (!page.textLayer?.renderingDone) {\n        continue;\n      }\n\n      // Detect what needs to be done by checking the rendering state.\n      switch (page.renderingState) {\n        case RenderingStates.INITIAL:\n          // This page has been reset to its initial state so its text layer\n          // is no longer valid. Null it out so that we don't process it again.\n          page.textLayer = null;\n          break;\n        case RenderingStates.FINISHED:\n          // This page is still rendered. If it has a placeholder node that\n          // means the PDF anchoring module anchored annotations before it was\n          // rendered. Remove this, which will cause the annotations to anchor\n          // again, below.\n          {\n            const placeholder = page.div.querySelector(\n              '.annotator-placeholder'\n            );\n            placeholder?.parentNode.removeChild(placeholder);\n          }\n          break;\n      }\n    }\n\n    // Find all the anchors that have been invalidated by page state changes.\n    for (let anchor of this.annotator.anchors) {\n      // Skip any we already know about.\n      if (anchor.highlights) {\n        if (refreshAnnotations.includes(anchor.annotation)) {\n          continue;\n        }\n\n        // If the highlights are no longer in the document it means that either\n        // the page was destroyed by PDF.js or the placeholder was removed above.\n        // The annotations for these anchors need to be refreshed.\n        for (let index = 0; index < anchor.highlights.length; index++) {\n          const hl = anchor.highlights[index];\n          if (!document.body.contains(hl)) {\n            anchor.highlights.splice(index, 1);\n            delete anchor.range;\n            refreshAnnotations.push(anchor.annotation);\n            break;\n          }\n        }\n      }\n    }\n\n    refreshAnnotations.map(annotation => this.annotator.anchor(annotation));\n  }\n}\n",
    "/**\n * Returns true if the start point of a selection occurs after the end point,\n * in document order.\n *\n * @param {Selection} selection\n */\nexport function isSelectionBackwards(selection) {\n  if (selection.focusNode === selection.anchorNode) {\n    return selection.focusOffset < selection.anchorOffset;\n  }\n\n  const range = selection.getRangeAt(0);\n  return range.startContainer === selection.focusNode;\n}\n\n/**\n * Returns true if any part of `node` lies within `range`.\n *\n * @param {Range} range\n * @param {Node} node\n */\nexport function isNodeInRange(range, node) {\n  try {\n    const length = node.nodeValue?.length ?? node.childNodes.length;\n    return (\n      // Check start of node is before end of range.\n      range.comparePoint(node, 0) <= 0 &&\n      // Check end of node is after start of range.\n      range.comparePoint(node, length) >= 0\n    );\n  } catch (e) {\n    // `comparePoint` may fail if the `range` and `node` do not share a common\n    // ancestor or `node` is a doctype.\n    return false;\n  }\n}\n\n/**\n * Iterate over all Node(s) which overlap `range` in document order and invoke\n * `callback` for each of them.\n *\n * @param {Range} range\n * @param {(n: Node) => any} callback\n */\nexport function forEachNodeInRange(range, callback) {\n  const root = range.commonAncestorContainer;\n  const nodeIter = /** @type {Document} */ (root.ownerDocument).createNodeIterator(\n    root,\n    NodeFilter.SHOW_ALL\n  );\n\n  let currentNode;\n  while ((currentNode = nodeIter.nextNode())) {\n    if (isNodeInRange(range, currentNode)) {\n      callback(currentNode);\n    }\n  }\n}\n\n/**\n * Returns the bounding rectangles of non-whitespace text nodes in `range`.\n *\n * @param {Range} range\n * @return {Array<DOMRect>} Array of bounding rects in viewport coordinates.\n */\nexport function getTextBoundingBoxes(range) {\n  const whitespaceOnly = /^\\s*$/;\n  const textNodes = [];\n  forEachNodeInRange(range, function (node) {\n    if (\n      node.nodeType === Node.TEXT_NODE &&\n      !(/** @type {string} */ (node.textContent).match(whitespaceOnly))\n    ) {\n      textNodes.push(node);\n    }\n  });\n\n  let rects = [];\n  textNodes.forEach(function (node) {\n    const nodeRange = node.ownerDocument.createRange();\n    nodeRange.selectNodeContents(node);\n    if (node === range.startContainer) {\n      nodeRange.setStart(node, range.startOffset);\n    }\n    if (node === range.endContainer) {\n      nodeRange.setEnd(node, range.endOffset);\n    }\n    if (nodeRange.collapsed) {\n      // If the range ends at the start of this text node or starts at the end\n      // of this node then do not include it.\n      return;\n    }\n\n    // Measure the range and translate from viewport to document coordinates\n    const viewportRects = Array.from(nodeRange.getClientRects());\n    nodeRange.detach();\n    rects = rects.concat(viewportRects);\n  });\n  return rects;\n}\n\n/**\n * Returns the rectangle, in viewport coordinates, for the line of text\n * containing the focus point of a Selection.\n *\n * Returns null if the selection is empty.\n *\n * @param {Selection} selection\n * @return {DOMRect|null}\n */\nexport function selectionFocusRect(selection) {\n  if (selection.isCollapsed) {\n    return null;\n  }\n  const textBoxes = getTextBoundingBoxes(selection.getRangeAt(0));\n  if (textBoxes.length === 0) {\n    return null;\n  }\n\n  if (isSelectionBackwards(selection)) {\n    return textBoxes[0];\n  } else {\n    return textBoxes[textBoxes.length - 1];\n  }\n}\n\n/**\n * Retrieve a set of items associated with nodes in a given range.\n *\n * An `item` can be any data that the caller wishes to compute from or associate\n * with a node. Only unique items, as determined by `Object.is`, are returned.\n *\n * @template T\n * @param {Range} range\n * @param {(n: Node) => T} itemForNode - Callback returning the item for a given node\n * @return {T[]} items\n */\nexport function itemsForRange(range, itemForNode) {\n  const checkedNodes = new Set();\n  const items = new Set();\n\n  forEachNodeInRange(range, node => {\n    /** @type {Node|null} */\n    let current = node;\n    while (current) {\n      if (checkedNodes.has(current)) {\n        break;\n      }\n      checkedNodes.add(current);\n\n      const item = itemForNode(current);\n      if (item) {\n        items.add(item);\n      }\n\n      current = current.parentNode;\n    }\n  });\n\n  return [...items];\n}\n",
    "/**\n * Return the current selection or `null` if there is no selection or it is empty.\n *\n * @param {Document} document\n * @return {Range|null}\n */\nfunction selectedRange(document) {\n  const selection = document.getSelection();\n  if (!selection || selection.rangeCount === 0) {\n    return null;\n  }\n  const range = selection.getRangeAt(0);\n  if (range.collapsed) {\n    return null;\n  }\n  return range;\n}\n\n/**\n * An observer that watches for and buffers changes to the document's current selection.\n */\nexport class SelectionObserver {\n  /**\n   * Start observing changes to the current selection in the document.\n   *\n   * @param {(range: Range|null) => any} callback -\n   *   Callback invoked with the selected region of the document when it has\n   *   changed.\n   * @param {Document} document_ - Test seam\n   */\n  constructor(callback, document_ = document) {\n    let isMouseDown = false;\n\n    this._pendingCallback = null;\n\n    const scheduleCallback = (delay = 10) => {\n      this._pendingCallback = setTimeout(() => {\n        callback(selectedRange(document_));\n      }, delay);\n    };\n\n    /** @param {Event} event */\n    this._eventHandler = event => {\n      if (event.type === 'mousedown') {\n        isMouseDown = true;\n      }\n      if (event.type === 'mouseup') {\n        isMouseDown = false;\n      }\n\n      // If the user makes a selection with the mouse, wait until they release\n      // it before reporting a selection change.\n      if (isMouseDown) {\n        return;\n      }\n\n      this._cancelPendingCallback();\n\n      // Schedule a notification after a short delay. The delay serves two\n      // purposes:\n      //\n      // - If this handler was called as a result of a 'mouseup' event then the\n      //   selection will not be updated until the next tick of the event loop.\n      //   In this case we only need a short delay.\n      //\n      // - If the user is changing the selection with a non-mouse input (eg.\n      //   keyboard or selection handles on mobile) this buffers updates and\n      //   makes sure that we only report one when the update has stopped\n      //   changing. In this case we want a longer delay.\n\n      const delay = event.type === 'mouseup' ? 10 : 100;\n      scheduleCallback(delay);\n    };\n\n    this._document = document_;\n    this._events = ['mousedown', 'mouseup', 'selectionchange'];\n    for (let event of this._events) {\n      document_.addEventListener(event, this._eventHandler);\n    }\n\n    // Report the initial selection.\n    scheduleCallback(1);\n  }\n\n  disconnect() {\n    for (let event of this._events) {\n      this._document.removeEventListener(event, this._eventHandler);\n    }\n    this._cancelPendingCallback();\n  }\n\n  _cancelPendingCallback() {\n    if (this._pendingCallback) {\n      clearTimeout(this._pendingCallback);\n      this._pendingCallback = null;\n    }\n  }\n}\n",
    "const SIDEBAR_TRIGGER_BTN_ATTR = 'data-hypothesis-trigger';\n\n/**\n * Show the sidebar when user clicks on an element with the\n * trigger data attribute.\n *\n * @param {Element} rootEl - The DOM element which contains the trigger elements.\n * @param {Object} showFn - Function which shows the sidebar.\n */\n\nexport default function trigger(rootEl, showFn) {\n  const triggerElems = rootEl.querySelectorAll(\n    '[' + SIDEBAR_TRIGGER_BTN_ATTR + ']'\n  );\n\n  Array.from(triggerElems).forEach(function (triggerElem) {\n    triggerElem.addEventListener('click', handleCommand);\n  });\n\n  function handleCommand(event) {\n    showFn();\n    event.stopPropagation();\n  }\n}\n",
    "import Hammer from 'hammerjs';\n\nimport annotationCounts from './annotation-counts';\nimport sidebarTrigger from './sidebar-trigger';\nimport { createSidebarConfig } from './config/sidebar';\nimport events from '../shared/bridge-events';\nimport features from './features';\n\nimport Guest from './guest';\nimport { ToolbarController } from './toolbar';\n\n/**\n * @typedef LayoutState\n * @prop {boolean} expanded\n * @prop {number} width\n * @prop {number} height\n */\n\n// Minimum width to which the frame can be resized.\nconst MIN_RESIZE = 280;\n\nconst defaultConfig = {\n  BucketBar: {\n    container: '.annotator-frame',\n  },\n};\n\n/**\n * Create the iframe that will load the sidebar application.\n *\n * @return {HTMLIFrameElement}\n */\nfunction createSidebarIframe(config) {\n  const sidebarConfig = createSidebarConfig(config);\n  const configParam =\n    'config=' + encodeURIComponent(JSON.stringify(sidebarConfig));\n  const sidebarAppSrc = config.sidebarAppUrl + '#' + configParam;\n\n  const sidebarFrame = document.createElement('iframe');\n\n  // Enable media in annotations to be shown fullscreen\n  sidebarFrame.setAttribute('allowfullscreen', '');\n\n  sidebarFrame.src = sidebarAppSrc;\n  sidebarFrame.title = 'Hypothesis annotation viewer';\n  sidebarFrame.className = 'h-sidebar-iframe';\n\n  return sidebarFrame;\n}\n\n/**\n * The `Sidebar` class creates the sidebar application iframe and its container,\n * as well as the adjacent controls.\n */\nexport default class Sidebar extends Guest {\n  constructor(element, config) {\n    if (config.theme === 'clean' || config.externalContainerSelector) {\n      delete config.pluginClasses.BucketBar;\n    }\n\n    let externalContainer = null;\n\n    if (config.externalContainerSelector) {\n      externalContainer = document.querySelector(\n        config.externalContainerSelector\n      );\n    }\n\n    let externalFrame;\n    let frame;\n\n    if (externalContainer) {\n      externalFrame = externalContainer;\n    } else {\n      frame = document.createElement('div');\n      frame.style.display = 'none';\n      frame.className = 'annotator-frame annotator-outer';\n\n      if (config.theme === 'clean') {\n        frame.classList.add('annotator-frame--theme-clean');\n      }\n\n      element.appendChild(frame);\n    }\n\n    const sidebarFrame = createSidebarIframe(config);\n\n    super(element, { ...defaultConfig, ...config });\n\n    this.externalFrame = externalFrame;\n    this.frame = frame;\n    (frame || externalFrame).appendChild(sidebarFrame);\n\n    this.subscribe('panelReady', () => {\n      // Show the UI\n      if (this.frame) {\n        this.frame.style.display = '';\n      }\n    });\n\n    this.subscribe('beforeAnnotationCreated', annotation => {\n      // When a new non-highlight annotation is created, focus\n      // the sidebar so that the text editor can be focused as\n      // soon as the annotation card appears\n      if (!annotation.$highlight) {\n        /** @type {Window} */ (sidebarFrame.contentWindow).focus();\n      }\n    });\n\n    if (\n      config.openSidebar ||\n      config.annotations ||\n      config.query ||\n      config.group\n    ) {\n      this.subscribe('panelReady', () => this.show());\n    }\n\n    if (this.plugins.BucketBar) {\n      this.plugins.BucketBar.element.addEventListener('click', () =>\n        this.show()\n      );\n    }\n\n    // Set up the toolbar on the left edge of the sidebar.\n    const toolbarContainer = document.createElement('div');\n    this.toolbar = new ToolbarController(toolbarContainer, {\n      createAnnotation: () => this.createAnnotation(),\n      setSidebarOpen: open => (open ? this.show() : this.hide()),\n      setHighlightsVisible: show => this.setAllVisibleHighlights(show),\n    });\n    this.toolbar.useMinimalControls = config.theme === 'clean';\n\n    if (this.frame) {\n      // If using our own container frame for the sidebar, add the toolbar to it.\n      this.frame.prepend(toolbarContainer);\n      this.toolbarWidth = this.toolbar.getWidth();\n    } else {\n      // If using a host-page provided container for the sidebar, the toolbar is\n      // not shown.\n      this.toolbarWidth = 0;\n    }\n\n    this._gestureState = {\n      // Initial position at the start of a drag/pan resize event (in pixels).\n      initial: /** @type {number|null} */ (null),\n\n      // Final position at end of drag resize event.\n      final: /** @type {number|null} */ (null),\n    };\n    this._setupGestures();\n    this.hide();\n\n    // Publisher-provided callback functions\n    const [serviceConfig] = config.services || [];\n    if (serviceConfig) {\n      this.onLoginRequest = serviceConfig.onLoginRequest;\n      this.onLogoutRequest = serviceConfig.onLogoutRequest;\n      this.onSignupRequest = serviceConfig.onSignupRequest;\n      this.onProfileRequest = serviceConfig.onProfileRequest;\n      this.onHelpRequest = serviceConfig.onHelpRequest;\n    }\n\n    this.onLayoutChange = config.onLayoutChange;\n\n    // Initial layout notification\n    this._notifyOfLayoutChange(false);\n    this._setupSidebarEvents();\n  }\n\n  destroy() {\n    this._hammerManager?.destroy();\n    this.frame?.remove();\n    super.destroy();\n  }\n\n  _setupSidebarEvents() {\n    annotationCounts(document.body, this.crossframe);\n    sidebarTrigger(document.body, () => this.show());\n    features.init(this.crossframe);\n\n    this.crossframe.on('showSidebar', () => this.show());\n    this.crossframe.on('hideSidebar', () => this.hide());\n\n    // Re-publish the crossframe event so that anything extending Delegator\n    // can subscribe to it (without need for crossframe)\n    this.crossframe.on('showNotebook', groupId => {\n      this.hide();\n      this.publish('showNotebook', [groupId]);\n    });\n    this.crossframe.on('hideNotebook', () => {\n      this.show();\n      this.publish('hideNotebook');\n    });\n\n    const eventHandlers = [\n      [events.LOGIN_REQUESTED, this.onLoginRequest],\n      [events.LOGOUT_REQUESTED, this.onLogoutRequest],\n      [events.SIGNUP_REQUESTED, this.onSignupRequest],\n      [events.PROFILE_REQUESTED, this.onProfileRequest],\n      [events.HELP_REQUESTED, this.onHelpRequest],\n    ];\n    eventHandlers.forEach(([event, handler]) => {\n      if (handler) {\n        this.crossframe.on(event, () => handler());\n      }\n    });\n  }\n\n  _resetGestureState() {\n    this._gestureState = { initial: null, final: null };\n  }\n\n  _setupGestures() {\n    const toggleButton = this.toolbar.sidebarToggleButton;\n    if (toggleButton) {\n      // Prevent any default gestures on the handle.\n      toggleButton.addEventListener('touchmove', e => e.preventDefault());\n\n      this._hammerManager = new Hammer.Manager(toggleButton)\n        // eslint-disable-next-line no-restricted-properties\n        .on('panstart panend panleft panright', this._onPan.bind(this));\n      this._hammerManager.add(\n        new Hammer.Pan({ direction: Hammer.DIRECTION_HORIZONTAL })\n      );\n    }\n  }\n\n  // Schedule any changes needed to update the sidebar layout.\n  _updateLayout() {\n    // Only schedule one frame at a time.\n    if (this.renderFrame) {\n      return;\n    }\n\n    // Schedule a frame.\n    this.renderFrame = requestAnimationFrame(() => {\n      this.renderFrame = null;\n\n      if (\n        this._gestureState.final !== this._gestureState.initial &&\n        this.frame\n      ) {\n        const margin = /** @type {number} */ (this._gestureState.final);\n        const width = -margin;\n        this.frame.style.marginLeft = `${margin}px`;\n        if (width >= MIN_RESIZE) {\n          this.frame.style.width = `${width}px`;\n        }\n        this._notifyOfLayoutChange();\n      }\n    });\n  }\n\n  /**\n   * Notify integrator when sidebar is opened, closed or resized.\n   *\n   * @param {boolean} [expanded] -\n   *   `true` or `false` if the sidebar is being directly opened or closed, as\n   *   opposed to being resized via the sidebar's drag handles\n   */\n  _notifyOfLayoutChange(expanded) {\n    // The sidebar structure is:\n    //\n    // [ Toolbar    ][                                   ]\n    // [ ---------- ][ Sidebar iframe container (@frame) ]\n    // [ Bucket Bar ][                                   ]\n    //\n    // The sidebar iframe is hidden or shown by adjusting the left margin of\n    // its container.\n\n    const toolbarWidth = (this.frame && this.toolbar.getWidth()) || 0;\n    const frame = this.frame || this.externalFrame;\n    const rect = frame.getBoundingClientRect();\n    const computedStyle = window.getComputedStyle(frame);\n    const width = parseInt(computedStyle.width);\n    const leftMargin = parseInt(computedStyle.marginLeft);\n\n    // The width of the sidebar that is visible on screen, including the\n    // toolbar, which is always visible.\n    let frameVisibleWidth = toolbarWidth;\n\n    if (typeof expanded === 'boolean') {\n      if (expanded) {\n        frameVisibleWidth += width;\n      }\n    } else {\n      if (leftMargin < MIN_RESIZE) {\n        frameVisibleWidth -= leftMargin;\n      } else {\n        frameVisibleWidth += width;\n      }\n\n      // Infer expanded state based on whether at least part of the sidebar\n      // frame is visible.\n      expanded = frameVisibleWidth > toolbarWidth;\n    }\n\n    const layoutState = /** @type LayoutState */ ({\n      expanded,\n      width: expanded ? frameVisibleWidth : toolbarWidth,\n      height: rect.height,\n    });\n\n    if (this.onLayoutChange) {\n      this.onLayoutChange(layoutState);\n    }\n    this.publish('sidebarLayoutChanged', [layoutState]);\n  }\n\n  _onPan(event) {\n    const frame = this.frame;\n    if (!frame) {\n      return;\n    }\n\n    switch (event.type) {\n      case 'panstart':\n        this._resetGestureState();\n\n        // Disable animated transition of sidebar position\n        frame.classList.add('annotator-no-transition');\n\n        // Disable pointer events on the iframe.\n        frame.style.pointerEvents = 'none';\n\n        this._gestureState.initial = parseInt(\n          getComputedStyle(frame).marginLeft\n        );\n\n        break;\n      case 'panend':\n        frame.classList.remove('annotator-no-transition');\n\n        // Re-enable pointer events on the iframe.\n        frame.style.pointerEvents = '';\n\n        // Snap open or closed.\n        if (\n          this._gestureState.final === null ||\n          this._gestureState.final <= -MIN_RESIZE\n        ) {\n          this.show();\n        } else {\n          this.hide();\n        }\n        this._resetGestureState();\n        break;\n      case 'panleft':\n      case 'panright': {\n        if (typeof this._gestureState.initial !== 'number') {\n          return;\n        }\n\n        const margin = this._gestureState.initial;\n        const delta = event.deltaX;\n        this._gestureState.final = Math.min(Math.round(margin + delta), 0);\n        this._updateLayout();\n        break;\n      }\n    }\n  }\n\n  show() {\n    this.crossframe.call('sidebarOpened');\n    this.publish('sidebarOpened');\n\n    if (this.frame) {\n      const width = this.frame.getBoundingClientRect().width;\n      this.frame.style.marginLeft = `${-1 * width}px`;\n      this.frame.classList.remove('annotator-collapsed');\n    }\n\n    this.toolbar.sidebarOpen = true;\n\n    if (this.options.showHighlights === 'whenSidebarOpen') {\n      this.setVisibleHighlights(true);\n    }\n\n    this._notifyOfLayoutChange(true);\n  }\n\n  hide() {\n    if (this.frame) {\n      this.frame.style.marginLeft = '';\n      this.frame.classList.add('annotator-collapsed');\n    }\n\n    this.toolbar.sidebarOpen = false;\n\n    if (this.options.showHighlights === 'whenSidebarOpen') {\n      this.setVisibleHighlights(false);\n    }\n\n    this._notifyOfLayoutChange(false);\n  }\n\n  /**\n   * Hide or show highlights associated with annotations in the document.\n   *\n   * @param {boolean} shouldShowHighlights\n   */\n  setAllVisibleHighlights(shouldShowHighlights) {\n    this.crossframe.call('setVisibleHighlights', shouldShowHighlights);\n  }\n}\n",
    "import { createElement, createRef, render } from 'preact';\n\nimport Toolbar from './components/toolbar';\n\n/**\n * @typedef ToolbarOptions\n * @prop {() => any} createAnnotation\n * @prop {(open: boolean) => any} setSidebarOpen\n * @prop {(visible: boolean) => any} setHighlightsVisible\n */\n\n/**\n * Controller for the toolbar on the edge of the sidebar.\n *\n * This toolbar provides controls for opening and closing the sidebar, toggling\n * highlight visibility etc.\n */\nexport class ToolbarController {\n  /**\n   * @param {HTMLElement} container - Element into which the toolbar is rendered\n   * @param {ToolbarOptions} options\n   */\n  constructor(container, options) {\n    const { createAnnotation, setSidebarOpen, setHighlightsVisible } = options;\n\n    this._container = container;\n    this._container.className = 'annotator-toolbar';\n\n    this._useMinimalControls = false;\n\n    /** @type {'annotation'|'note'} */\n    this._newAnnotationType = 'note';\n\n    this._highlightsVisible = false;\n    this._sidebarOpen = false;\n\n    this._closeSidebar = () => setSidebarOpen(false);\n    this._toggleSidebar = () => setSidebarOpen(!this._sidebarOpen);\n    this._toggleHighlights = () =>\n      setHighlightsVisible(!this._highlightsVisible);\n    this._createAnnotation = () => {\n      createAnnotation();\n      setSidebarOpen(true);\n    };\n\n    /** Reference to the sidebar toggle button. */\n    this._sidebarToggleButton = createRef();\n\n    this.render();\n  }\n\n  getWidth() {\n    return this._container.getBoundingClientRect().width;\n  }\n\n  /**\n   * Set whether the toolbar is in the \"minimal controls\" mode where\n   * only the \"Close\" button is shown.\n   */\n  set useMinimalControls(minimal) {\n    this._useMinimalControls = minimal;\n    this.render();\n  }\n\n  get useMinimalControls() {\n    return this._useMinimalControls;\n  }\n\n  /**\n   * Update the toolbar to reflect whether the sidebar is open or not.\n   */\n  set sidebarOpen(open) {\n    this._sidebarOpen = open;\n    this.render();\n  }\n\n  get sidebarOpen() {\n    return this._sidebarOpen;\n  }\n\n  /**\n   * Update the toolbar to reflect whether the \"Create annotation\" button will\n   * create a page note (if there is no selection) or an annotation (if there is\n   * a selection).\n   */\n  set newAnnotationType(type) {\n    this._newAnnotationType = type;\n    this.render();\n  }\n\n  get newAnnotationType() {\n    return this._newAnnotationType;\n  }\n\n  /**\n   * Update the toolbar to reflect whether highlights are currently visible.\n   */\n  set highlightsVisible(visible) {\n    this._highlightsVisible = visible;\n    this.render();\n  }\n\n  get highlightsVisible() {\n    return this._highlightsVisible;\n  }\n\n  /**\n   * Return the DOM element that toggles the sidebar's visibility.\n   *\n   * @type {HTMLButtonElement}\n   */\n  get sidebarToggleButton() {\n    return this._sidebarToggleButton.current;\n  }\n\n  render() {\n    render(\n      <Toolbar\n        closeSidebar={this._closeSidebar}\n        createAnnotation={this._createAnnotation}\n        newAnnotationType={this._newAnnotationType}\n        isSidebarOpen={this._sidebarOpen}\n        showHighlights={this._highlightsVisible}\n        toggleHighlights={this._toggleHighlights}\n        toggleSidebar={this._toggleSidebar}\n        toggleSidebarRef={this._sidebarToggleButton}\n        useMinimalControls={this.useMinimalControls}\n      />,\n      this._container\n    );\n  }\n}\n",
    "import { getBoundingClientRect } from '../highlighter';\n\n/**\n * @typedef {import('../../types/annotator').Anchor} Anchor\n */\n\n/**\n * @typedef Bucket\n * @prop {Anchor[]} anchors - The anchors in this bucket\n * @prop {number} position - The vertical pixel offset where this bucket should\n *                           appear in the bucket bar.\n */\n\n/**\n * @typedef BucketSet\n * @prop {Bucket} above - A single bucket containing all of the anchors that\n *                        are offscreen upwards\n * @prop {Bucket} below - A single bucket containing all of the anchors that are\n *                        offscreen downwards\n * @prop {Bucket[]} buckets - On-screen buckets\n */\n\n/**\n * @typedef WorkingBucket\n * @prop {Anchor[]} anchors - The anchors in this bucket\n * @prop {number} position - The computed position (offset) for this bucket,\n *   based on the current anchors. This is centered between `top` and `bottom`\n * @prop {number} top - The uppermost (lowest) vertical offset for the anchors\n *   in this bucket  the lowest `top` position value, akin to the top offest of\n *   a theoretical box drawn around all of the anchor highlights in this bucket\n * @prop {number} bottom - The bottommost (highest) vertical offset for the\n *   anchors in this bucket  the highest `top` position value, akin to the\n *   bottom of a theoretical box drawn around all of the anchor highlights in\n *   this bucket\n */\n\n/**\n * @typedef AnchorPosition\n * @prop {Anchor} anchor\n * @prop {number} top - The vertical offset, in pixels, of the top of this\n *   anchor's highlight(s) bounding box\n * @prop {number} bottom - The vertical offset, in pixels, of the bottom of this\n *   anchor's highlight(s) bounding box\n */\n\n// Only anchors with top offsets between `BUCKET_TOP_THRESHOLD` and\n// `window.innerHeight - BUCKET_BOTTOM_THRESHOLD` are considered \"on-screen\"\n// and will be bucketed. This is to account for bucket-bar tool buttons (top\n// and the height of the bottom navigation bucket (bottom)\nconst BUCKET_TOP_THRESHOLD = 137;\nconst BUCKET_BOTTOM_THRESHOLD = 22;\n// Generated buckets of annotation anchor highlights should be spaced by\n// at least this amount, in pixels\nconst BUCKET_GAP_SIZE = 60;\n\n/**\n * Find the closest valid anchor in `anchors` that is offscreen in the direction\n * indicated.\n *\n * @param {Anchor[]} anchors\n * @param {'up'|'down'} direction\n * @return {Anchor|null} - The closest anchor or `null` if no valid anchor found\n */\nexport function findClosestOffscreenAnchor(anchors, direction) {\n  let closestAnchor = null;\n  let closestTop = 0;\n\n  for (let anchor of anchors) {\n    if (!anchor.highlights?.length) {\n      continue;\n    }\n\n    const top = getBoundingClientRect(anchor.highlights).top;\n\n    // Verify that the anchor is offscreen in the direction we're headed\n    if (direction === 'up' && top >= BUCKET_TOP_THRESHOLD) {\n      // We're headed up but the anchor is already below the\n      // visible top of the bucket bar: it's not our guy\n      continue;\n    } else if (\n      direction === 'down' &&\n      top <= window.innerHeight - BUCKET_BOTTOM_THRESHOLD\n    ) {\n      // We're headed down but this anchor is already above\n      // the usable bottom of the screen: it's not our guy\n      continue;\n    }\n\n    if (\n      !closestAnchor ||\n      (direction === 'up' && top > closestTop) ||\n      (direction === 'down' && top < closestTop)\n    ) {\n      // This anchor is either:\n      // - The first anchor we've encountered off-screen in the direction\n      //   we're headed, or\n      // - Closer to the screen than the previous `closestAnchor`\n      closestAnchor = anchor;\n      closestTop = top;\n    }\n  }\n\n  return closestAnchor;\n}\n\n/**\n * Compute the AnchorPositions for the set of anchors provided, sorted\n * by top offset\n *\n * @param {Anchor[]} anchors\n * @return {AnchorPosition[]}\n */\nfunction getAnchorPositions(anchors) {\n  const anchorPositions = [];\n\n  anchors.forEach(anchor => {\n    if (!anchor.highlights?.length) {\n      return;\n    }\n    const anchorBox = getBoundingClientRect(anchor.highlights);\n    anchorPositions.push({\n      top: anchorBox.top,\n      bottom: anchorBox.bottom,\n      anchor,\n    });\n  });\n\n  // Now sort by top position\n  anchorPositions.sort((a, b) => {\n    if (a.top < b.top) {\n      return -1;\n    }\n    return 1;\n  });\n\n  return anchorPositions;\n}\n\n/**\n * Compute buckets\n *\n * @param {Anchor[]} anchors\n * @return {BucketSet}\n */\nexport function anchorBuckets(anchors) {\n  const anchorPositions = getAnchorPositions(anchors);\n  const aboveScreen = new Set();\n  const belowScreen = new Set();\n  const buckets = /** @type {Bucket[]} */ ([]);\n\n  // Hold current working anchors and positions as we build each bucket\n  /** @type {WorkingBucket|null} */\n  let currentBucket = null;\n\n  /**\n   * Create a new working bucket based on the provided `AnchorPosition`\n   *\n   * @param {AnchorPosition} anchorPosition\n   * @return {WorkingBucket}\n   */\n  function newBucket(anchorPosition) {\n    const anchorHeight = anchorPosition.bottom - anchorPosition.top;\n    const bucketPosition = anchorPosition.top + anchorHeight / 2;\n    const bucket = /** @type WorkingBucket */ ({\n      anchors: [anchorPosition.anchor],\n      top: anchorPosition.top,\n      bottom: anchorPosition.bottom,\n      position: bucketPosition,\n    });\n    return bucket;\n  }\n\n  // Build buckets from position information\n  anchorPositions.forEach(aPos => {\n    if (aPos.top < BUCKET_TOP_THRESHOLD) {\n      aboveScreen.add(aPos.anchor);\n      return;\n    } else if (aPos.top > window.innerHeight - BUCKET_BOTTOM_THRESHOLD) {\n      belowScreen.add(aPos.anchor);\n      return;\n    }\n\n    if (!currentBucket) {\n      // We've encountered our first on-screen anchor position:\n      // We'll need a bucket!\n      currentBucket = newBucket(aPos);\n      return;\n    }\n    // We want to contain overlapping highlights and those near each other\n    // within a shared bucket\n    const isContainedWithin =\n      aPos.top > currentBucket.top && aPos.bottom < currentBucket.bottom;\n\n    // The new anchor's position is far enough below the bottom of the current\n    // bucket to justify starting a new bucket\n    const isLargeGap = aPos.top - currentBucket.bottom > BUCKET_GAP_SIZE;\n\n    if (isLargeGap && !isContainedWithin) {\n      // We need to start a new bucket; push the working bucket and create\n      // a new bucket\n      buckets.push(currentBucket);\n      currentBucket = newBucket(aPos);\n    } else {\n      // We'll add this anchor to the current working bucket and update\n      // offset properties accordingly.\n      // We can be confident that `aPos.top` is >= `currentBucket.top` because\n      // AnchorPositions are sorted by their `top` offset  meaning that\n      // `currentBucket.top` still accurately represents the `top` offset of\n      // the virtual rectangle enclosing all anchors in this bucket. But\n      // let's check to see if the bottom is larger/lower:\n      const updatedBottom =\n        aPos.bottom > currentBucket.bottom ? aPos.bottom : currentBucket.bottom;\n      const updatedHeight = updatedBottom - currentBucket.top;\n\n      currentBucket.anchors.push(aPos.anchor);\n      currentBucket.bottom = updatedBottom;\n      currentBucket.position = currentBucket.top + updatedHeight / 2;\n    }\n  });\n\n  if (currentBucket) {\n    buckets.push(currentBucket);\n  }\n\n  // Add an upper \"navigation\" bucket with offscreen-above anchors\n  const above = {\n    anchors: Array.from(aboveScreen),\n    position: BUCKET_TOP_THRESHOLD,\n  };\n\n  // Add a lower \"navigation\" bucket with offscreen-below anchors\n  const below = {\n    anchors: Array.from(belowScreen),\n    position: window.innerHeight - BUCKET_BOTTOM_THRESHOLD,\n  };\n\n  return {\n    above,\n    below,\n    buckets,\n  };\n}\n",
    "/**\n * Return all `<iframe>` elements under `container` which are annotate-able.\n *\n * @param {Element} container\n * @return {HTMLIFrameElement[]}\n */\nexport function findFrames(container) {\n  const frames = Array.from(container.getElementsByTagName('iframe'));\n  return frames.filter(shouldEnableAnnotation);\n}\n\n// Check if the iframe has already been injected\nexport function hasHypothesis(iframe) {\n  return iframe.contentWindow.__hypothesis_frame === true;\n}\n\n// Inject embed.js into the iframe\nexport function injectHypothesis(iframe, scriptUrl, config) {\n  const configElement = document.createElement('script');\n  configElement.className = 'js-hypothesis-config';\n  configElement.type = 'application/json';\n  configElement.innerText = JSON.stringify(config);\n\n  const src = scriptUrl;\n  const embedElement = document.createElement('script');\n  embedElement.className = 'js-hypothesis-embed';\n  embedElement.async = true;\n  embedElement.src = src;\n\n  iframe.contentDocument.body.appendChild(configElement);\n  iframe.contentDocument.body.appendChild(embedElement);\n}\n\n// Check if we can access this iframe's document\nexport function isAccessible(iframe) {\n  try {\n    return !!iframe.contentDocument;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Return `true` if an iframe should be made annotate-able.\n *\n * To enable annotation, an iframe must be opted-in by adding the\n * \"enable-annotation\" attribute and must be visible.\n *\n * @param  {HTMLIFrameElement} iframe the frame being checked\n * @returns {boolean}   result of our validity checks\n */\nfunction shouldEnableAnnotation(iframe) {\n  // Ignore the Hypothesis sidebar.\n  const isNotClientFrame = !iframe.classList.contains('h-sidebar-iframe');\n\n  // Require iframes to opt into annotation support.\n  //\n  // Eventually we may want annotation to be enabled by default for iframes that\n  // pass certain tests. However we need to resolve a number of issues before we\n  // can do that. See https://github.com/hypothesis/client/issues/530\n  const enabled = iframe.hasAttribute('enable-annotation');\n\n  return isNotClientFrame && enabled;\n}\n\nexport function isDocumentReady(iframe, callback) {\n  if (iframe.contentDocument.readyState === 'loading') {\n    iframe.contentDocument.addEventListener('DOMContentLoaded', function () {\n      callback();\n    });\n  } else {\n    callback();\n  }\n}\n\nexport function isLoaded(iframe, callback) {\n  if (iframe.contentDocument.readyState !== 'complete') {\n    iframe.addEventListener('load', function () {\n      callback();\n    });\n  } else {\n    callback();\n  }\n}\n",
    "/**\n * Load stylesheets for annotator UI components into the shadow DOM root.\n */\nfunction loadStyles(shadowRoot) {\n  const url = /** @type {HTMLLinkElement|undefined} */ (document.querySelector(\n    'link[rel=\"stylesheet\"][href*=\"/build/styles/annotator.css\"]'\n  ))?.href;\n\n  if (!url) {\n    return;\n  }\n\n  // Stylesheet <link> elements are inert inside shadow roots [1]. Until\n  // Shadow DOM implementations support external stylesheets [2], grab the\n  // relevant CSS files from the current page and `@import` them.\n  //\n  // [1] http://stackoverflow.com/questions/27746590\n  // [2] https://github.com/w3c/webcomponents/issues/530\n  //\n  // This will unfortunately break if the page blocks inline stylesheets via\n  // CSP, but that appears to be rare and if this happens, the user will still\n  // get a usable adder, albeit one that uses browser default styles for the\n  // toolbar.\n  const styleEl = document.createElement('style');\n  styleEl.textContent = `@import \"${url}\";`;\n  shadowRoot.appendChild(styleEl);\n}\n\n/**\n * Create the shadow root for an annotator UI component and load the annotator\n * CSS styles into it.\n *\n * In browsers that support it, shadow DOM is used to isolate annotator UI\n * components from the host page's styles.\n *\n * @param {HTMLElement} container - Container element to render the UI into\n * @return {HTMLElement|ShadowRoot} -\n *   The element to render the UI into. This may be `container` or the shadow\n *   root.\n */\nexport function createShadowRoot(container) {\n  if (!container.attachShadow) {\n    return container;\n  }\n\n  const shadowRoot = container.attachShadow({ mode: 'open' });\n  loadStyles(shadowRoot);\n  return shadowRoot;\n}\n",
    "/**\n * Return a normalized version of a URI.\n *\n * This makes it absolute and strips the fragment identifier.\n *\n * @param {string} uri - Relative or absolute URL\n * @param {string} [base] - Base URL to resolve relative to. Defaults to\n *   the document's base URL.\n */\nexport function normalizeURI(uri, base = document.baseURI) {\n  const absUrl = new URL(uri, base).href;\n\n  // Remove the fragment identifier.\n  // This is done on the serialized URL rather than modifying `url.hash` due to\n  // a bug in Safari.\n  // See https://github.com/hypothesis/h/issues/3471#issuecomment-226713750\n  return absUrl.toString().replace(/#.*/, '');\n}\n",
    "// `Object.assign()`-like helper. Used because this script needs to work\n// in IE 10/11 without polyfills.\nfunction assign(dest, src) {\n  for (const k in src) {\n    if (src.hasOwnProperty(k)) {\n      dest[k] = src[k];\n    }\n  }\n  return dest;\n}\n\n/**\n * Return a parsed `js-hypothesis-config` object from the document, or `{}`.\n *\n * Find all `<script class=\"js-hypothesis-config\">` tags in the given document,\n * parse them as JSON, and return the parsed object.\n *\n * If there are no `js-hypothesis-config` tags in the document then return\n * `{}`.\n *\n * If there are multiple `js-hypothesis-config` tags in the document then merge\n * them into a single returned object (when multiple scripts contain the same\n * setting names, scripts further down in the document override those further\n * up).\n *\n * @param {Document|Element} document - The root element to search.\n */\nexport function parseJsonConfig(document) {\n  const config = {};\n  const settingsElements = document.querySelectorAll(\n    'script.js-hypothesis-config'\n  );\n\n  for (let i = 0; i < settingsElements.length; i++) {\n    let settings;\n    try {\n      settings = JSON.parse(settingsElements[i].textContent || '');\n    } catch (err) {\n      console.warn(\n        'Could not parse settings from js-hypothesis-config tags',\n        err\n      );\n      settings = {};\n    }\n    assign(config, settings);\n  }\n\n  return config;\n}\n",
    "module.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\\n  <path fill=\"currentColor\" fill-rule=\"nonzero\" d=\"M15 0c.27 0 .505.099.703.297A.961.961 0 0116 1v15l-4-3H1a.974.974 0 01-.703-.29A.953.953 0 010 12V1C0 .719.096.482.29.29A.966.966 0 011 0h14zM7 3l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C4.156 5.229 4 6 4 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188C4.729 8.854 5.082 9 5.5 9c.417 0 .77-.146 1.063-.438C6.854 8.271 7 7.918 7 7.5c0-.417-.146-.77-.438-1.063A1.447 1.447 0 005.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L7 4V3zm5 0l-.469.063c-.312.041-.656.187-1.031.437-.375.25-.719.646-1.031 1.188C9.156 5.229 9 6 9 7l.002.063.006.062a.896.896 0 01.008.11l-.002.074-.006.066a1.447 1.447 0 00.43 1.188c.291.291.645.437 1.062.437.417 0 .77-.146 1.063-.438.291-.291.437-.645.437-1.062 0-.417-.146-.77-.438-1.063A1.447 1.447 0 0010.5 6c-.073 0-.146.005-.219.016-.073.01-.14.026-.203.046.177-1.03.542-1.632 1.094-1.804L12 4V3z\"/>\\n</svg>\\n';",
    "module.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" aria-hidden=\"true\" focusable=\"false\" class=\"Icon Icon--cancel\"><g fill-rule=\"evenodd\"><rect fill=\"none\" stroke=\"none\" x=\"0\" y=\"0\" width=\"16\" height=\"16\"></rect><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 8l3.536-3.536L8 8 4.464 4.464 8 8zm0 0l-3.536 3.536L8 8l3.536 3.536L8 8z\"></path></g></svg>\\n';",
    "module.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"><g fill-rule=\"evenodd\"><rect fill=\"none\" stroke=\"none\" x=\"0\" y=\"0\" width=\"16\" height=\"16\"></rect><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 12L6 8l4-4\"></path></g></svg>\\n';",
    "module.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" aria-hidden=\"true\" focusable=\"false\" class=\"Icon Icon--caret-right\"><g fill-rule=\"evenodd\"><rect fill=\"none\" stroke=\"none\" x=\"0\" y=\"0\" width=\"16\" height=\"16\"></rect><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 4l4 4-4 4\"></path></g></svg>\\n';",
    "module.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-alert-triangle\"><path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path><line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line><line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line></svg>';",
    "module.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"><g fill-rule=\"evenodd\"><rect fill=\"none\" stroke=\"none\" x=\"0\" y=\"0\" width=\"16\" height=\"16\"></rect><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8.73 12.973A9.89 9.89 0 0 1 8 13c-3.866 0-7-2.239-7-5 0-.753.233-1.467.65-2.107m5.62-2.866A9.89 9.89 0 0 1 8 3c3.866 0 7 2.239 7 5 0 .753-.233 1.467-.65 2.107M1 1l14 14L1 1z\"></path></g></svg>\\n';",
    "module.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"><g fill-rule=\"evenodd\"><rect fill=\"none\" stroke=\"none\" x=\"0\" y=\"0\" width=\"16\" height=\"16\"></rect><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15H1h11zm-.5-6v2l-1 1v-2l1-1zm.5-7v6h-2V2h2zm0-1h-2 2zm0 8h-2 2z\"></path></g></svg>\\n';",
    "module.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"><g fill-rule=\"evenodd\"><rect fill=\"none\" stroke=\"none\" x=\"0\" y=\"0\" width=\"16\" height=\"16\"></rect><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M1 15h6l8-6V1H1v14zm6-1V9h7\"></path></g></svg>\\n';",
    "module.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"8\" viewBox=\"0 0 15 8\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M0 8 L7 0 L15 8\" stroke=\"currentColor\" strokeWidth=\"2\" /></svg>\\n';",
    "module.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\"><g fill-rule=\"evenodd\"><rect fill=\"none\" stroke=\"none\" x=\"0\" y=\"0\" width=\"16\" height=\"16\"></rect><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 13c3.866 0 7-2.239 7-5s-3.134-5-7-5-7 2.239-7 5 3.134 5 7 5zm0-4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"></path></g></svg>\\n';",
    "/**\n * This module defines the set of global events that are dispatched\n * across the bridge between the sidebar and annotator\n */\nexport default {\n  // Events that the sidebar sends to the annotator\n  // ----------------------------------------------\n\n  /**\n   * The updated feature flags for the user\n   */\n  FEATURE_FLAGS_UPDATED: 'featureFlagsUpdated',\n\n  /**\n   * The sidebar is asking the annotator to open the partner site help page.\n   */\n  HELP_REQUESTED: 'helpRequested',\n\n  /** The sidebar is asking the annotator to do a partner site log in\n   *  (for example, pop up a log in window). This is used when the client is\n   *  embedded in a partner site and a log in button in the client is clicked.\n   */\n  LOGIN_REQUESTED: 'loginRequested',\n\n  /** The sidebar is asking the annotator to do a partner site log out.\n   *  This is used when the client is embedded in a partner site and a log out\n   *  button in the client is clicked.\n   */\n  LOGOUT_REQUESTED: 'logoutRequested',\n\n  /**\n   * The sidebar is asking the annotator to open the partner site profile page.\n   */\n  PROFILE_REQUESTED: 'profileRequested',\n\n  /**\n   * The set of annotations was updated.\n   */\n  PUBLIC_ANNOTATION_COUNT_CHANGED: 'publicAnnotationCountChanged',\n\n  /**\n   * The sidebar is asking the annotator to do a partner site sign-up.\n   */\n  SIGNUP_REQUESTED: 'signupRequested',\n\n  // Events that the annotator sends to the sidebar\n  // ----------------------------------------------\n};\n",
    "import RPC from './frame-rpc';\n\n/**\n * The Bridge service sets up a channel between frames and provides an events\n * API on top of it.\n */\nexport default class Bridge {\n  constructor() {\n    this.links = [];\n    this.channelListeners = {};\n    this.onConnectListeners = [];\n  }\n\n  /**\n   * Destroy all channels created with `createChannel`.\n   *\n   * This removes the event listeners for messages arriving from other windows.\n   */\n  destroy() {\n    Array.from(this.links).map(link => link.channel.destroy());\n  }\n\n  /**\n   * Create a communication channel between this window and `source`.\n   *\n   * The created channel is added to the list of channels which `call`\n   * and `on` send and receive messages over.\n   *\n   * @param {Window} source - The source window.\n   * @param {string} origin - The origin of the document in `source`.\n   * @param {string} token\n   * @return {RPC} - Channel for communicating with the window.\n   */\n  createChannel(source, origin, token) {\n    let channel = null;\n    let connected = false;\n\n    const ready = () => {\n      if (connected) {\n        return;\n      }\n      connected = true;\n      Array.from(this.onConnectListeners).forEach(cb =>\n        cb.call(null, channel, source)\n      );\n    };\n\n    const connect = (_token, cb) => {\n      if (_token === token) {\n        cb();\n        ready();\n      }\n    };\n\n    const listeners = { connect, ...this.channelListeners };\n\n    // Set up a channel\n    channel = new RPC(window, source, origin, listeners);\n\n    // Fire off a connection attempt\n    channel.call('connect', token, ready);\n\n    // Store the newly created channel in our collection\n    this.links.push({\n      channel,\n      window: source,\n    });\n\n    return channel;\n  }\n\n  /**\n   * Make a method call on all channels, collect the results and pass them to a\n   * callback when all results are collected.\n   *\n   * @param {string} method - Name of remote method to call.\n   * @param {any[]} args - Arguments to method.\n   * @return {Promise<any[]>} - Array of results, one per connected frame\n   */\n  call(method, ...args) {\n    let cb;\n    if (typeof args[args.length - 1] === 'function') {\n      cb = args[args.length - 1];\n      args = args.slice(0, -1);\n    }\n\n    const _makeDestroyFn = c => {\n      return error => {\n        c.destroy();\n        this.links = Array.from(this.links)\n          .filter(l => l.channel !== c)\n          .map(l => l);\n        throw error;\n      };\n    };\n\n    const promises = this.links.map(function (l) {\n      const p = new Promise(function (resolve, reject) {\n        const timeout = setTimeout(() => resolve(null), 1000);\n        try {\n          return l.channel.call(\n            method,\n            ...Array.from(args),\n            function (err, result) {\n              clearTimeout(timeout);\n              if (err) {\n                return reject(err);\n              } else {\n                return resolve(result);\n              }\n            }\n          );\n        } catch (error) {\n          const err = error;\n          return reject(err);\n        }\n      });\n\n      // Don't assign here. The disconnect is handled asynchronously.\n      return p.catch(_makeDestroyFn(l.channel));\n    });\n\n    let resultPromise = Promise.all(promises);\n\n    if (cb) {\n      resultPromise = resultPromise\n        .then(results => cb(null, results))\n        .catch(error => cb(error));\n    }\n\n    return resultPromise;\n  }\n\n  /**\n   * Register a callback to be invoked when any connected channel sends a\n   * message to this `Bridge`.\n   *\n   * @param {string} method\n   * @param {Function} callback\n   */\n  on(method, callback) {\n    if (this.channelListeners[method]) {\n      throw new Error(`Listener '${method}' already bound in Bridge`);\n    }\n    this.channelListeners[method] = callback;\n    return this;\n  }\n\n  /**\n   * Unregister any callbacks registered with `on`.\n   *\n   * @param {string} method\n   */\n  off(method) {\n    delete this.channelListeners[method];\n    return this;\n  }\n\n  /**\n   * Add a function to be called upon a new connection.\n   *\n   * @param {Function} callback\n   */\n  onConnect(callback) {\n    this.onConnectListeners.push(callback);\n    return this;\n  }\n}\n",
    "/**\n * Normalize a keyboard event key name.\n *\n * Some old Microsoft browsers, such as IE 11 and Edge Legacy [1], use non-standard\n * names for some keys. If any abnormal keys are used, this method returns the\n * normalized name so our UI components don't require a special case.\n *\n * [1] https://caniuse.com/keyboardevent-key\n *\n * @param {string} key - The keyboard event `key` name\n * @return {string} - Normalized `key` name\n */\nexport function normalizeKeyName(key) {\n  const mappings = {\n    Left: 'ArrowLeft',\n    Up: 'ArrowUp',\n    Down: 'ArrowDown',\n    Right: 'ArrowRight',\n    Spacebar: ' ',\n    Del: 'Delete',\n  };\n  return mappings[key] ? mappings[key] : key;\n}\n",
    "import classnames from 'classnames';\nimport { createElement } from 'preact';\nimport { useLayoutEffect, useRef } from 'preact/hooks';\nimport propTypes from 'prop-types';\n\n/**\n * Object mapping icon names to SVG markup.\n *\n * @typedef {Object.<string,string>} IconMap\n */\n\n/**\n * @template T\n * @typedef {import(\"preact/hooks\").Ref<T>} Ref\n */\n\n/**\n * Map of icon name to SVG data.\n *\n * @type {IconMap}\n */\nlet iconRegistry = {};\n\n/**\n * @typedef SvgIconProps\n * @prop {string} name - The name of the icon to display.\n *   The name must match a name that has already been registered using the\n *   `registerIcons` function.\n * @prop {string} [className] - A CSS class to apply to the `<svg>` element.\n * @prop {boolean} [inline] - Apply a style allowing for inline display of icon wrapper.\n * @prop {string} [title] - Optional title attribute to apply to the SVG's containing `span`.\n */\n\n/**\n * Component that renders icons using inline `<svg>` elements.\n * This enables their appearance to be customized via CSS.\n *\n * This matches the way we do icons on the website, see\n * https://github.com/hypothesis/h/pull/3675\n *\n * @param {SvgIconProps} props\n */\nexport default function SvgIcon({\n  name,\n  className = '',\n  inline = false,\n  title = '',\n}) {\n  if (!iconRegistry[name]) {\n    throw new Error(`Icon name \"${name}\" is not registered`);\n  }\n  const markup = iconRegistry[name];\n\n  const element = /** @type {Ref<HTMLElement>} */ (useRef());\n  useLayoutEffect(() => {\n    const svg = element.current.querySelector('svg');\n\n    // The icon should always contain an `<svg>` element, but check here as we\n    // don't validate the markup when it is registered.\n    if (svg) {\n      svg.setAttribute('class', className);\n    }\n  }, [\n    className,\n    // `markup` is a dependency of this effect because the SVG is replaced if\n    // it changes.\n    markup,\n  ]);\n\n  const spanProps = {};\n  if (title) {\n    spanProps.title = title;\n  }\n\n  return (\n    <span\n      className={classnames('svg-icon', { 'svg-icon--inline': inline })}\n      dangerouslySetInnerHTML={{ __html: markup }}\n      ref={element}\n      {...spanProps}\n    />\n  );\n}\n\nSvgIcon.propTypes = {\n  name: propTypes.string.isRequired,\n  className: propTypes.string,\n  inline: propTypes.bool,\n  title: propTypes.string,\n};\n\n/**\n * Register icons for use with the `SvgIcon` component.\n *\n * @param {IconMap} icons\n * @param {Object} options\n *  @param {boolean} [options.reset] - If `true`, remove existing registered icons.\n */\nexport function registerIcons(icons, { reset = false } = {}) {\n  if (reset) {\n    iconRegistry = {};\n  }\n  Object.assign(iconRegistry, icons);\n}\n\n/**\n * Return the currently available icons.\n *\n * To register icons, don't mutate this directly but call `registerIcons`\n * instead.\n *\n * @return {IconMap}\n */\nexport function availableIcons() {\n  return iconRegistry;\n}\n",
    "/**\n * Callback invoked when another frame is discovered in this window which runs\n * the Hypothesis sidebar or annotation layer code.\n *\n * @callback DiscoveryCallback\n * @param {Window} source - The frame that was discovered.\n * @param {string} origin - The origin to use when posting messages to this frame.\n * @param {string} token - A random identifier used by this frame.\n */\n\n/**\n * Discovery finds frames in the current tab/window that can be annotated (the\n * \"clients\") or can fetch annotations from the backend (the \"server\").\n *\n * Currently only one frame can be designated as the server.\n * (FIXME: This causes problems. See https://github.com/hypothesis/client/issues/249,\n * https://github.com/hypothesis/client/issues/187).\n *\n * The discovery process works as follows:\n *\n * 1. Clients and servers perform a top-down, breadth-first traversal of the\n *    frame hierarchy in the tab and send either an \"offer\" (server) or\n *    \"discovery\" (client) message to each frame, except for their own frame.\n * 2. Clients listen for \"offer\" messages and respond with \"request\" messages.\n * 3. Servers listen for \"discovery\" messages and respond with \"offer\"\n *    messages.\n * 4. Servers also listen for \"request\" messages and respond with \"ack\" messages\n *    that include a random channel identifier. At this point servers call\n *    the callback to `startDiscovery`.\n * 5. Clients listen for \"ack\" messages. When they receive one from a server\n *    they call the callback to `startDiscovery`.\n */\nexport default class Discovery {\n  /**\n   * @param {Window} target\n   * @param {Object} options\n   */\n  constructor(target, options = {}) {\n    /** The window to send and listen for messages with. */\n    this.target = target;\n\n    /**\n     * Set whether this frame acts as a server (fetches annotations from the\n     * API) or a client (contains annotatable content and displays highlights).\n     */\n    this.server = false;\n\n    /** Origins allowed to communicate with this frame. */\n    this.origin = '*';\n\n    /**\n     * Flag set in client frames to indicate when they are waiting for a\n     * confirmation from a server frame.\n     */\n    this.requestInProgress = false;\n\n    this.onDiscovery = null;\n\n    if (typeof options.server !== 'undefined') {\n      this.server = options.server;\n    }\n\n    if (typeof options.origin !== 'undefined') {\n      this.origin = options.origin;\n    }\n\n    this._onMessage = this._onMessage.bind(this);\n  }\n\n  /**\n   * Find other frames to communicate with.\n   *\n   * See the class overview for a description of how the discovery process\n   * works.\n   *\n   * @param {DiscoveryCallback} onDiscovery - Callback to invoke with a token when\n   *   another frame is discovered.\n   */\n  startDiscovery(onDiscovery) {\n    if (this.onDiscovery) {\n      throw new Error(\n        'Discovery is already in progress. Call stopDiscovery() first'\n      );\n    }\n\n    this.onDiscovery = onDiscovery;\n\n    // Listen for messages from other frames.\n    this.target.addEventListener('message', this._onMessage, false);\n    this._beacon();\n  }\n\n  /**\n   * Stop listening for communication requests from other frames.\n   */\n  stopDiscovery() {\n    this.onDiscovery = null;\n    this.target.removeEventListener('message', this._onMessage);\n  }\n\n  /**\n   * Send a message to other frames in the current window to inform them about\n   * the existence of this frame and tell them whether this frame is a client\n   * or server.\n   */\n  _beacon() {\n    let beaconMessage;\n    if (this.server) {\n      beaconMessage = '__cross_frame_dhcp_offer';\n    } else {\n      beaconMessage = '__cross_frame_dhcp_discovery';\n    }\n\n    // Perform a top-down, breadth-first traversal of frames in the current\n    // window and send messages to them.\n    const queue = [this.target.top];\n    while (queue.length > 0) {\n      const parent = /** @type {Window} */ (queue.shift());\n      if (parent !== this.target) {\n        parent.postMessage(beaconMessage, this.origin);\n      }\n      for (let i = 0; i < parent.frames.length; i++) {\n        queue.push(parent.frames[i]);\n      }\n    }\n  }\n\n  /**\n   * Handle a `MessageEvent` from another frame which _may_ be from a\n   * `Discovery` instance.\n   */\n  _onMessage(event) {\n    const { source, data } = event;\n    let origin = event.origin;\n\n    // If `origin` is 'null' the source frame is a file URL or loaded over some\n    // other scheme for which the `origin` is undefined. In this case, the only\n    // way to ensure the message arrives is to use the wildcard origin. See:\n    //\n    //   https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage\n    //\n    // When sending messages to or from a Firefox WebExtension, current\n    // versions of Firefox have a bug that causes the origin check to fail even\n    // though the target and actual origins of the message match.\n    if (\n      origin === 'null' ||\n      origin.match('moz-extension:') ||\n      window.location.protocol === 'moz-extension:'\n    ) {\n      origin = '*';\n    }\n\n    // Check if this is a recognized message from a `Discovery` instance in\n    // another frame.\n    const match =\n      typeof data === 'string' &&\n      data.match(\n        /^__cross_frame_dhcp_(discovery|offer|request|ack)(?::(\\d+))?$/\n      );\n    if (!match) {\n      return;\n    }\n\n    // Handle the message, and send a response back to the original frame if\n    // appropriate.\n    let [, messageType, messageToken] = match;\n    const { reply, discovered, token } = this._processMessage(\n      messageType,\n      messageToken,\n      origin\n    );\n\n    if (reply) {\n      source.postMessage('__cross_frame_dhcp_' + reply, origin);\n    }\n\n    // Notify caller of `startDiscovery` in this frame that we found another\n    // frame.\n    if (discovered && this.onDiscovery) {\n      this.onDiscovery.call(null, source, origin, token);\n    }\n  }\n\n  _processMessage(messageType, token, origin) {\n    let reply = null;\n    let discovered = false;\n\n    if (this.server) {\n      // Handle message as a server frame.\n      if (messageType === 'discovery') {\n        reply = 'offer';\n      } else if (messageType === 'request') {\n        token = this.generateToken();\n        reply = `ack:${token}`;\n        discovered = true;\n      } else if (messageType === 'offer' || messageType === 'ack') {\n        throw new Error(\n          `A second Discovery server has been detected at ${origin}.\n This is unsupported and will cause unexpected behaviour.`\n        );\n      }\n    } else {\n      // Handle message as a client frame.\n      // eslint-disable-next-line no-lonely-if\n      if (messageType === 'offer') {\n        // eslint-disable-line no-lonely-if\n        if (!this.requestInProgress) {\n          this.requestInProgress = true;\n          reply = 'request';\n        }\n      } else if (messageType === 'ack') {\n        this.requestInProgress = false;\n        discovered = true;\n      }\n    }\n\n    return { reply, discovered, token };\n  }\n\n  /**\n   * Generate a random identifier for a communication channel between a client\n   * and a server.\n   */\n  generateToken() {\n    return Math.random().toString().replace(/\\D/g, '');\n  }\n}\n",
    "/* eslint-disable */\n\n/** This software is released under the MIT license:\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n  SOFTWARE.\n */\n\n/**\n * This is a modified copy of index.js from\n * https://github.com/substack/frame-rpc (see git log for the modifications),\n * upstream license above.\n */\n\nconst VERSION = '1.0.0';\n\n/**\n *  @constructor\n *  @param {Window} src\n *  @param {Window} dst\n *  @param {string} origin\n *  @param {(Object<string, ((any) => any)>) | ((any) => any)} methods\n */\nexport default function RPC(src, dst, origin, methods) {\n  const self = this;\n  this.src = src;\n  this.dst = dst;\n\n  if (origin === '*') {\n    this.origin = '*';\n  } else {\n    const uorigin = new URL(origin);\n    this.origin = uorigin.protocol + '//' + uorigin.host;\n  }\n\n  this._sequence = 0;\n  this._callbacks = {};\n\n  this._onmessage = function (ev) {\n    if (self._destroyed) return;\n    if (self.dst !== ev.source) return;\n    if (self.origin !== '*' && ev.origin !== self.origin) return;\n    if (!ev.data || typeof ev.data !== 'object') return;\n    if (ev.data.protocol !== 'frame-rpc') return;\n    if (!Array.isArray(ev.data.arguments)) return;\n    self._handle(ev.data);\n  };\n  this.src.addEventListener('message', this._onmessage);\n  this._methods =\n    (typeof methods === 'function' ? methods(this) : methods) || {};\n}\n\nRPC.prototype.destroy = function () {\n  this._destroyed = true;\n  this.src.removeEventListener('message', this._onmessage);\n};\n\n/**\n * @param {string} method\n */\nRPC.prototype.call = function (method) {\n  const args = [].slice.call(arguments, 1);\n  return this.apply(method, args);\n};\n\n/**\n * @param {string} method\n * @param {any[]} args\n */\nRPC.prototype.apply = function (method, args) {\n  if (this._destroyed) return;\n  const seq = this._sequence++;\n  if (typeof args[args.length - 1] === 'function') {\n    this._callbacks[seq] = args[args.length - 1];\n    args = args.slice(0, -1);\n  }\n  this.dst.postMessage(\n    {\n      protocol: 'frame-rpc',\n      version: VERSION,\n      sequence: seq,\n      method: method,\n      arguments: args,\n    },\n    this.origin\n  );\n};\n\nRPC.prototype._handle = function (msg) {\n  const self = this;\n  if (self._destroyed) return;\n  if (msg.hasOwnProperty('method')) {\n    if (!this._methods.hasOwnProperty(msg.method)) return;\n    const args = msg.arguments.concat(function () {\n      self.dst.postMessage(\n        {\n          protocol: 'frame-rpc',\n          version: VERSION,\n          response: msg.sequence,\n          arguments: [].slice.call(arguments),\n        },\n        self.origin\n      );\n    });\n    this._methods[msg.method].apply(this._methods, args);\n  } else if (msg.hasOwnProperty('response')) {\n    const cb = this._callbacks[msg.response];\n    delete this._callbacks[msg.response];\n    if (cb) cb.apply(null, msg.arguments);\n  }\n};\n",
    "import { useEffect } from 'preact/hooks';\n\nimport { normalizeKeyName } from './browser-compatibility-utils.js';\n\n// Bit flags indicating modifiers required by a shortcut or pressed in a key event.\nconst modifiers = {\n  alt: 1,\n  ctrl: 2,\n  meta: 4,\n  shift: 8,\n};\n\n/**\n * Match a `shortcut` key sequence against a keydown event.\n *\n * A shortcut key sequence is a string of \"+\"-separated keyboard modifiers and\n * keys. The list may contain zero or more modifiers and must contain exactly\n * one non-modifier key. The key and modifier names are case-insensitive.\n * For example \"Ctrl+Enter\", \"shift+a\". Key names are matched against `KeyboardEvent.key`.\n *\n * @param {KeyboardEvent} event\n * @param {string} shortcut\n * @return {boolean}\n */\nexport function matchShortcut(event, shortcut) {\n  const parts = shortcut.split('+').map(p => p.toLowerCase());\n\n  let requiredModifiers = 0;\n  let requiredKey = null;\n\n  for (let part of parts) {\n    const modifierFlag = modifiers[part];\n    if (modifierFlag) {\n      requiredModifiers |= modifierFlag;\n    } else if (requiredKey === null) {\n      requiredKey = part;\n    } else {\n      throw new Error('Multiple non-modifier keys specified');\n    }\n  }\n\n  if (!requiredKey) {\n    throw new Error(`Invalid shortcut: ${shortcut}`);\n  }\n\n  const actualModifiers =\n    (event.ctrlKey ? modifiers.ctrl : 0) |\n    (event.metaKey ? modifiers.meta : 0) |\n    (event.altKey ? modifiers.alt : 0) |\n    (event.shiftKey ? modifiers.shift : 0);\n\n  return (\n    actualModifiers === requiredModifiers &&\n    normalizeKeyName(event.key).toLowerCase() === requiredKey\n  );\n}\n\n/**\n * @typedef ShortcutOptions\n * @prop {HTMLElement} [rootElement] -\n *   Element on which the key event listener should be installed. Defaults to\n *   `document.body`.\n */\n\n/**\n * Install a shortcut key listener on the document.\n *\n * This can be used directly outside of a component. To use within a Preact\n * component, you probably want the `useShortcut` hook.\n *\n * @param {string} shortcut - Shortcut key sequence. See `matchShortcut`.\n * @param {(e: KeyboardEvent) => any} onPress - A function to call when the shortcut matches\n * @param {ShortcutOptions} [options]\n * @return {() => void} A function that removes the shortcut\n */\nexport function installShortcut(\n  shortcut,\n  onPress,\n  { rootElement = document.body } = {}\n) {\n  const onKeydown = event => {\n    if (matchShortcut(event, shortcut)) {\n      onPress(event);\n    }\n  };\n  rootElement.addEventListener('keydown', onKeydown);\n  return () => rootElement.removeEventListener('keydown', onKeydown);\n}\n\n/**\n * An effect hook that installs a shortcut using `installShortcut` and removes\n * it when the component is unmounted.\n *\n * This provides a convenient way to enable a document-level shortcut while\n * a component is mounted. This differs from adding an `onKeyDown` handler to\n * one of the component's DOM elements in that it doesn't require the component\n * to have focus.\n *\n * To conditionally disable the shortcut, set `shortcut` to `null`.\n *\n * @param {string|null} shortcut -\n *   A shortcut key sequence to match or `null` to disable. See `matchShortcut`.\n * @param {(e: KeyboardEvent) => any} onPress - A function to call when the shortcut matches\n * @param {ShortcutOptions} [options]\n */\nexport function useShortcut(\n  shortcut,\n  onPress,\n  { rootElement = document.body } = {}\n) {\n  useEffect(() => {\n    if (!shortcut) {\n      return undefined;\n    }\n    return installShortcut(shortcut, onPress, { rootElement });\n  }, [shortcut, onPress, rootElement]);\n}\n",
    "/**\n * Type conversion methods that coerce incoming configuration values to an\n * expected type or format that other parts of the UI may make assumptions\n * on. This is needed for incoming configuration values that are otherwise\n * not sanitized.\n *\n * Note that if the values passed are plain javascript values (such as ones\n * produced from JSON.parse), then these methods do not throw errors.\n */\n\n/**\n * Returns a boolean\n *\n * @param {any} value - initial value\n * @return {boolean}\n */\nexport function toBoolean(value) {\n  if (typeof value === 'string') {\n    if (value.trim().toLocaleLowerCase() === 'false') {\n      // \"false\", \"False\", \" false\", \"FALSE\" all return false\n      return false;\n    }\n  }\n  const numericalVal = Number(value);\n  if (!isNaN(numericalVal)) {\n    return Boolean(numericalVal);\n  }\n  // Any non numerical or falsely string should return true, otherwise return false\n  return typeof value === 'string';\n}\n\n/**\n * Returns either an integer or NaN\n *\n * @param {any} value - initial value\n * @return {number}\n */\nexport function toInteger(value) {\n  // Acts as a simple wrapper\n  return parseInt(value);\n}\n\n/**\n * Returns either the value if its an object or an empty object\n *\n * @param {any} value - initial value\n * @return {Object}\n */\nexport function toObject(value) {\n  if (typeof value === 'object' && value !== null) {\n    return value;\n  }\n  // Don't attempt to fix the values, just ensure type correctness\n  return {};\n}\n\n/**\n * Returns the value as a string or an empty string if the\n * value undefined, null or otherwise falsely.\n *\n * @param {any} value - initial value\n * @return {string}\n */\nexport function toString(value) {\n  if (value && typeof value.toString === 'function') {\n    return value.toString();\n  }\n  return '';\n}\n",
    "let shownWarnings = {};\n\n/**\n * Log a warning if it has not already been reported.\n *\n * This is useful to avoid spamming the console if a warning is emitted in a\n * context that may be called frequently.\n *\n * @param {...any} args -\n *   Arguments to forward to `console.warn`. The arguments `toString()` values\n *   are concatenated into a string key which is used to determine if the warning\n *   has been logged before.\n */\nexport default function warnOnce(...args) {\n  const key = args.join();\n  if (key in shownWarnings) {\n    return;\n  }\n  console.warn(...args);\n  shownWarnings[key] = true;\n}\n\nwarnOnce.reset = () => {\n  shownWarnings = {};\n};\n"
  ],
  "sourceRoot": ""
}